{"version":3,"sources":["common/values.ts","common/routing.ts","common/utils.ts","components/info/ChangeCoordinatesCard.tsx","components/info/CoordinatesCard.tsx","components/info/CoordinateInterface.tsx","img/logo-192.png","components/info/info.md","components/info/MarkdownOverrides.tsx","components/info/InfoDialog.tsx","dist/clientDetect.js","shaders/newSmoothJuliaShader.ts","common/settings.ts","components/settings/SettingsDefinitions.tsx","components/settings/SettingsContext.tsx","theme/theme.tsx","shaders/fullVertexShader.js","components/render/WebGLCanvas.tsx","components/render/MinimapViewer.tsx","components/render/JuliaRenderer.tsx","shaders/newSmoothMandelbrotShader.ts","components/info/FPSCard.tsx","components/render/MandelbrotRenderer.tsx","components/render/ViewChanger.tsx","serviceWorkerRegistration.ts","components/ServiceWorkerWrapper.tsx","components/settings/SettingsMenu.tsx","App.tsx","index.tsx"],"names":["viewerOrigin","xy","z","theta","defaultMandelbrotStart","defaultJuliaStart","defaultViewerStart","m","j","springsConfigs","default","mass","tension","friction","precision","zoom","rot","user","toFloatDisplay","n","p","toFixed","toFloatDisplayShort","NamedHashURLViewer","name","v","this","ViewerURLManager","vs","updateFromURL","asHashURL","params","currentViewerState","newV","undefined","map","toFloatDisplayDefault","updateViewer","currentLocation","window","location","hash","replace","l","viewerParams","split","filter","length","forEach","s","parsedVals","Number","some","isNaN","x","y","t","error","console","log","genericTouchBind","domTarget","controls","setDragging","DPR","xyCtrl","setControlXY","zoomCtrl","minZoom","maxZoom","setControlZoom","rotCtrl","setControlRot","zoomMult","getRealZoom","current","height","updateXY","relMove","down","addV","vScale","vRotate","config","immediate","updateZ","updateT","handlers","onPinch","event","da","vdva","movement","md","ma","delta","first","origin","memo","getValue","a","o","preventDefault","deg","newZ","_","clamp","newZclamp","realZoom","subV","Math","PI","onWheel","my","active","shiftKey","newT","onDrag","direction","pinching","velocity","cancel","last","eventOptions","passive","capture","warpToPoint","Rgb255ColourToFloat","c","r","g","b","e","ChangeCoordinatesCard","props","useState","setXY","setZoom","setTheta","Card","style","width","zIndex","position","padding","display","flexDirection","flexShrink","Grid","container","alignItems","TextField","size","onChange","target","value","type","defaultValue","inputProps","step","label","justify","min","Button","marginTop","onClick","mandelbrot","CoordinatesCard","marginBottom","Typography","align","fontFamily","fontSize","span","interpolate","CoordinateInterface","Grow","in","show","right","top","margin","mdOverrides","children","paragraph","title","href","Link","DialogInfoMarkdown","infoMdText","setInfoMdText","useEffect","fetch","infoTextMarkdown","then","response","text","options","wrapper","React","Fragment","overrides","DialogTitle","withStyles","theme","createStyles","root","spacing","image","marginRight","closeButton","marginLeft","color","palette","grey","classes","onClose","other","disableTypography","className","src","MandelbrotMapsLogo","alt","variant","IconButton","aria-label","DialogContent","MuiDialogContent","DialogActions","MuiDialogActions","Alert","elevation","DialogDivider","Divider","InfoDialog","ctrl","open","setOpen","snackBarOpen","setSnackBarOpen","handleClose","clientData","useMemo","screenSize","screen","windowSize","innerWidth","innerHeight","nameOffset","verOffset","ix","nVer","navigator","appVersion","nAgt","userAgent","browser","appName","version","parseFloat","majorVersion","parseInt","indexOf","substring","lastIndexOf","toLowerCase","toUpperCase","mobile","test","cookieEnabled","document","cookie","os","clientStrings","id","cs","osVersion","exec","gl","debugInfo","gpuVendor","renderer","system","device","canvas","createElement","getContext","getExtension","getParameter","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","browserVersion","browserRelease","platform","dpr","devicePixelRatio","gpu","clientDetect","writeClientDataToClipboard","data","JSON","stringify","clipboard","writeText","prompt","Dialog","aria-labelledby","maxWidth","PaperProps","maxHeight","dividers","Box","TableContainer","component","Paper","onContextMenu","Table","TableHead","TableRow","TableCell","colSpan","TableBody","Object","entries","k","userSelect","String","process","startIcon","Snackbar","autoHideDuration","reason","severity","survey","link","rel","textDecoration","autoFocus","newSmoothJuliaShader","maxI","AA","B","defaultSettings","showMinimap","showCrosshair","showCoordinates","showFPS","useDPR","useAA","colour","settingsWidgets","settings","checked","control","Switch","labelPlacement","Slider","max","valueLabelDisplay","marks","SettingsContext","createContext","setSettings","SettingsProvider","Provider","createMuiTheme","MuiSwitch","MuiButton","primary","main","colors","blue","secondary","red","info","shape","borderRadius","contrastBoxShadow","fullscreenVertexArray","numComponents","WebGLCanvas","forwardRef","refAny","canvasRef","useRef","renderRequestRef","bufferInfo","programInfo","u","setFps","fps","useCallback","mini","setupCanvas","debug","addEventListener","compileShader","ctx","twgl","fragShader","frames","elapsedTime","interval","render","time","prog","buff","viewport","uniforms","resolution","u_zoom","u_c","u_xy","u_maxI","u_theta","u_colour","useProgram","program","requestAnimationFrame","cancelAnimationFrame","ref","cursor","dragging","displayName","useStyles","makeStyles","MinimapViewer","rest","ButtonBase","left","bottom","boxShadow","overflow","JuliaRenderer","miniCanvasRef","miniFragShader","gtb","useGesture","Consumer","makeCrosshair","stroke","radius","standardCrosshair","miniCrosshair","newSmoothMandelbrotShader","crosshairShape","FPSCard","div","MandelbrotRenderer","changeViewButton","ViewChanger","vertical","changeFunc","mButton","jButton","ButtonGroup","orientation","transform","isLocalhost","Boolean","hostname","match","register","URL","swUrl","headers","contentType","get","status","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ServiceWorkerWrapper","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","waiting","onSWRegisterSuccess","anchorOrigin","horizontal","action","postMessage","settingsButton","popoverCardGrid","paddingTop","paddingBottom","paddingRight","paddingLeft","sliderControl","GroupDivider","GroupTitle","item","icon","SettingsMenu","anchorEl","setAnchorEl","ResetButton","aria-controls","reset","AboutButton","toggleInfo","Fab","aria-haspopup","currentTarget","Backdrop","Popover","keepMounted","transformOrigin","ExtensionIcon","widgets","PhotoIcon","getSettingsWidgetsGrouping","FormGroup","widget","FormControlLabel","slice","val","prevState","App","isClient","getSize","w","h","setWindowSize","handleResize","removeEventListener","useWindowSize","loc","setLoc","handler","to","useHashLocation","updateBrowserHash","history","replaceState","urlManager","updateHash","asFullHashURL","updateM","updateJ","mandelbrotControls","useSpring","onRest","juliaControls","showInfo","setShowInfo","showMandelbrot","showJulia","setViewerState","ThemeProvider","currentDPR","xs","flexGrow","i","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cf435719.chunk.js","sourcesContent":["import { RgbColor } from 'react-colorful';\nimport { ViewerLocation } from './types';\n\n// this multiplier subdivides the screen space into smaller increments\n// to allow for velocity calculations to not immediately decay, due to the\n// otherwise small scale that is being mapped to the screen.\n// export const screenScaleMultiplier = 1e-7;\n// TL;DR this was a workaround - react-spring allows for \"precision\"\n//       to be defined in each spring configuration, which is:\n//       > The smallest velocity before the animation is considered \"not moving\"\nexport const defaultPrecision = 1e-7;\n\nexport const viewerOrigin: ViewerLocation = {\n  xy: [0, 0],\n  z: 1,\n  theta: 0,\n};\n\nexport const defaultMandelbrotStart: ViewerLocation = {\n  xy: [0.2361652, 0.5633767],\n  z: 4,\n  theta: 0.2,\n};\nexport const defaultJuliaStart: ViewerLocation = {\n  xy: [0.4364131, -0.6468786],\n  z: 4,\n  theta: 2.12,\n};\n// indexable viewer start object\nexport const defaultViewerStart: { [k: string]: ViewerLocation } = {\n  m: defaultMandelbrotStart,\n  j: defaultJuliaStart,\n};\n\nexport const springsConfigs = {\n  /** used when the values are animated to a point, includes decay */\n  default: {\n    xy: { mass: 1, tension: 500, friction: 75, precision: defaultPrecision },\n    zoom: { mass: 1, tension: 300, friction: 40 },\n    rot: { mass: 1, tension: 400, friction: 75 },\n  },\n  /** used when a user is interacting with the view */\n  user: {\n    xy: { mass: 1, tension: 2000, friction: 75, precision: defaultPrecision },\n    zoom: { mass: 1, tension: 1200, friction: 75 },\n    rot: { mass: 1, tension: 1200, friction: 75 },\n  },\n  // default and decay are merged to give them single \"non-user\" values\n  // decay: {\n  //   /** used after the user has let go of the view, decaying */\n  //   xy: { mass: 1, tension: 500, friction: 75 },\n  //   zoom: { mass: 1, tension: 300, friction: 50 },\n  //   rot: { mass: 1, tension: 400, friction: 75 },\n  // },\n};\n\nexport const defaultShadingColour: RgbColor = { r: 0, g: 180, b: 255 };\n\n// export const defaultSpringConfig = { mass: 1, tension: 100, friction: 200 };\n\n// export const xyCtrlSpringConfig = { mass: 1, tension: 2000, friction: 100 };\n// export const xyCtrlSpringDecayConfig = { mass: 1, tension: 500, friction: 75 };\n\n// default number of numbers after the decimal point\nexport const defaultFloatFixedPrecision = 7;\nexport const shortFloatFixedPrecision = 2;\n\nexport const toFloatDisplay = (n: number, p: number): number => +n.toFixed(p);\n\nexport const toFloatDisplayDefault = (n: number): number =>\n  toFloatDisplay(n, defaultFloatFixedPrecision);\n\nexport const toFloatDisplayShort = (n: number): number =>\n  toFloatDisplay(n, shortFloatFixedPrecision);\n","import { useCallback, useEffect, useState } from 'react';\nimport { ReactUseStateType, ViewerLocation, XYType } from './types';\nimport {\n  defaultJuliaStart,\n  defaultMandelbrotStart,\n  defaultViewerStart,\n  toFloatDisplayDefault,\n  toFloatDisplayShort,\n} from './values';\n\nexport class NamedHashURLViewer {\n  name: string;\n  v: ViewerLocation;\n\n  constructor(name: string, v: ViewerLocation) {\n    this.name = name;\n    this.v = v;\n  }\n\n  /**\n   * convert a viewer's state into a defined URL representation\n   * @param namedViewer the viewer object to be converted\n   */\n  asHashURL(): string {\n    const { xy, z, theta } = this.v;\n    return `/${this.name}@${xy[0]},${xy[1]},${z},${theta}`;\n  }\n}\n\nexport class ViewerURLManager {\n  vs: {\n    [k: string]: NamedHashURLViewer;\n  };\n\n  constructor() {\n    this.vs = {};\n    this.updateFromURL();\n  }\n\n  asFullHashURL(): string {\n    return `#${this.vs['m'].asHashURL()}${this.vs['j'].asHashURL()}`;\n  }\n\n  updateFromURL(): void {\n    const params = currentViewerState();\n    this.vs['m'] = new NamedHashURLViewer(\n      'm',\n      params['m'] || { ...defaultMandelbrotStart },\n    );\n    this.vs['j'] = new NamedHashURLViewer('j', params['j'] || { ...defaultJuliaStart });\n  }\n\n  updateViewer(name: string, v: Partial<ViewerLocation>): void {\n    // console.log('updateViewer');\n    const { xy, z, theta } = v;\n    // const [[{ xy }], [{ z }], [{ theta }]] = [xyC]\n    // const [xy] = [xyCtrl?.xy];\n    const newV = this.vs[name].v;\n    if (xy !== undefined) newV.xy = xy.map((n) => toFloatDisplayDefault(n)) as XYType;\n    if (z !== undefined) newV.z = toFloatDisplayShort(z);\n    if (theta !== undefined) newV.theta = toFloatDisplayShort(theta);\n\n    this.vs[name].v = newV;\n  }\n\n  updateFromViewer(m: Partial<ViewerLocation>, j: Partial<ViewerLocation>): void {\n    this.updateViewer('m', m);\n    this.updateViewer('j', j);\n  }\n}\n\n// returns the current hash location in a normalized form\n// (excluding the leading '#' symbol)\nexport const currentLocation = (): string => {\n  // console.log(window.location);\n  const l = window.location.hash.replace('#', '') || '';\n  return l;\n};\n\nexport const currentViewerState = (): { [k: string]: ViewerLocation } => {\n  const l = currentLocation();\n  // key 'k' used to index which viewer is parsed\n  const viewerParams: { [k: string]: ViewerLocation } = {};\n  // actually parse the hash\n  try {\n    // separate each viewer's string, remove the empty string from the start\n    // (/abc/123) split => ['', 'abc', '123']\n    const qs = l.split('/').filter((v) => v.length > 0);\n    qs.forEach((s) => {\n      // viewer [name, params] is separated by @ sign\n      // assume this first split must succeed for any input to be parseable\n      const [v, params] = s.split('@');\n      const parsedVals = params.split(',').map(Number);\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\n      if (parsedVals.some(isNaN)) {\n        // at least one parsing fail, stop now\n        viewerParams[v] = defaultViewerStart[v];\n      } else {\n        const [x, y, z, t] = parsedVals;\n        viewerParams[v] = { xy: [x, y] as XYType, z: z, theta: t };\n      }\n    });\n  } catch (error) {\n    // uhhhh, something's wrong\n    console.log(error);\n  }\n  return viewerParams;\n};\n\n// non-reloading hash change\nexport const useHashNavigator = (): ((to: string) => void) =>\n  useCallback((to) => window.history.replaceState(null, document.title, to), []);\n\n// https://github.com/molefrog/wouter#customizing-the-location-hook\nexport const useHashLocation = (): ReactUseStateType<string> => {\n  const [loc, setLoc] = useState(currentLocation());\n\n  useEffect(() => {\n    // this function is called whenever the hash changes\n    const handler = () => setLoc(currentLocation());\n\n    // subscribe to hash changes\n    window.addEventListener('hashchange', handler);\n    return () => window.removeEventListener('hashchange', handler);\n  }, []);\n\n  // remember to wrap your function with `useCallback` hook\n  // a tiny but important optimization\n  const navigate = useCallback((to) => (window.location.hash = to), []);\n\n  return [loc, navigate];\n};\n","import _ from 'lodash';\nimport { RefObject, useCallback, useEffect, useState } from 'react';\nimport { RgbColor } from 'react-colorful';\nimport { addV, subV } from 'react-use-gesture';\nimport {\n  FullGestureState,\n  Handlers,\n  StateKey,\n  UseGestureConfig,\n  Vector2,\n} from 'react-use-gesture/dist/types';\nimport { Vector, vRotate, vScale } from 'vec-la-fp';\nimport { RgbFloatColour, ViewerControlSprings, ViewerLocation } from './types';\nimport { springsConfigs } from './values';\n\n// https://usehooks.com/useWindowSize/\nexport function useWindowSize(): { w: number; h: number } {\n  const isClient = typeof window === 'object';\n\n  const getSize = useCallback(\n    () => ({\n      // default to zero, at least it's not undefined\n      w: isClient ? window.innerWidth : 0,\n      h: isClient ? window.innerHeight : 0,\n    }),\n    [isClient],\n  );\n\n  const [windowSize, setWindowSize] = useState(getSize);\n\n  useEffect(() => {\n    if (!isClient) {\n      // return false;\n      return () => {\n        // do nothing\n      };\n    }\n\n    function handleResize() {\n      setWindowSize(getSize());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [getSize, isClient]);\n  // Empty array ensures that effect is only run on mount and unmount\n\n  return windowSize;\n}\n\nexport interface GenericTouchBindParams {\n  domTarget: RefObject<HTMLCanvasElement>;\n  controls: ViewerControlSprings;\n  // screenScaleMultiplier: number;\n  // gl: any,\n  setDragging: React.Dispatch<React.SetStateAction<boolean>>;\n  DPR: number;\n}\n\nexport interface GenericTouchBindReturn {\n  handlers: Handlers;\n  config: UseGestureConfig;\n}\n\n// --------------------------------------------------------------------------\n// https://gist.github.com/evdokimovm/0e7163faf7c8fe24e41e6b68461e4feb\n// Convert from degrees to radians.\nconst degToRad = (deg: number): number => (deg * Math.PI) / 180;\n// Math.radians(90); // 1.5707963267948966\n\n// Convert from radians to degrees.\n// eslint-disable-next-line\nconst radToDeg = (rad: number): number => (rad * 180) / Math.PI;\n// Math.degrees(3.141592653589793); // 180\n// --------------------------------------------------------------------------\n\n// a touchbind for re-using across renderers\nexport function genericTouchBind({\n  domTarget,\n  controls,\n  setDragging,\n  DPR,\n}: GenericTouchBindParams): GenericTouchBindReturn {\n  const [{ xy }, setControlXY] = controls.xyCtrl;\n  const [{ z, minZoom, maxZoom }, setControlZoom] = controls.zoomCtrl;\n  const [{ theta }, setControlRot] = controls.rotCtrl;\n\n  const zoomMult = { in: 3e-3, out: 1e-3 };\n\n  // used to have screenScaleMultiplier here\n  const getRealZoom = (z: number) => (domTarget.current?.height || 100) * z;\n  // * screenScaleMultiplier;\n\n  /** Re-usable logic for XY \"panning\" */\n  const updateXY = ({\n    xy,\n    theta,\n    relMove,\n    down,\n  }: {\n    xy: Vector2;\n    theta: number;\n    relMove: Vector2;\n    down: boolean;\n  }) =>\n    setControlXY({\n      // add to the current position the relative displacement (relMove), rotated by theta,\n      // to maintain the correct displacement direction (without this it would move as if theta=0)\n      xy: addV(xy, vScale(DPR, vRotate(theta, relMove))),\n      config: down ? springsConfigs.user.xy : springsConfigs.default.xy,\n      // reset immediate value from warp function\n      immediate: false,\n    });\n\n  /** Re-usable logic for zooming */\n  const updateZ = ({ z, down }: { z: number; down: boolean }) =>\n    setControlZoom({\n      z: z,\n      config: down ? springsConfigs.user.zoom : springsConfigs.default.zoom,\n      // reset immediate value from warp function\n      immediate: false,\n    });\n\n  /** Re-usable logic for rotating */\n  const updateT = ({ t, down }: { t: number; down: boolean }) =>\n    setControlRot({\n      theta: t,\n      // reset immediate value from warp function\n      immediate: false,\n      config: down ? springsConfigs.user.rot : springsConfigs.default.rot,\n    });\n\n  return {\n    handlers: {\n      // prevent some browser events such as swipe-based navigation or\n      // pinch-based zoom and instead redirect them to this handler\n      // onDragStart: ({ event }: FullGestureState<StateKey<'drag'>>) =>\n      //   event?.preventDefault(),\n      // onPinchStart: ({ event }: FullGestureState<StateKey<'pinch'>>) =>\n      //   event?.preventDefault(),\n      // onWheelStart: ({ event }: FullGestureState<StateKey<'wheel'>>) =>\n      //   event?.preventDefault(),\n\n      onPinch: ({\n        event,\n        da: [d, a],\n        vdva: [vd, va],\n        down,\n        movement: [md, ma],\n        delta: [dd, da],\n        first,\n        // initial, // initial [d, a]\n        origin,\n        memo = {\n          xy: xy.getValue(),\n          z: z.getValue(),\n          t: theta.getValue(),\n          a: 0,\n          o: [0, 0] as Vector2,\n        },\n      }: FullGestureState<StateKey<'pinch'>>) => {\n        // disable native browser events\n        event && event.preventDefault();\n\n        if (first) {\n          // remember the angle, location at which the pinch gesture starts\n          // memo.a = a;\n          memo.o = origin;\n        }\n\n        // new zoom is the product of initial zoom and a function of the delta since the pinch\n        //   (initial zoom) exponentially changed by md, with linear and exponential multipliers\n        //     linear multiplier:\n        //     exponential multiplier: scale faster as pinch becomes more distant\n        //     if decreasing, scale must decrease more slowly\n        // const em = 1.33;\n        // const newZ =\n        //   memo.z * (1 + Math.sign(md) * 1e-2 * Math.abs(md) ** (md <= 0 ? 1 / em : em)); //(1 - zdelta * Math.abs(zdelta));\n        const newZ = _.clamp(memo.z + md * 1e-2, 0.5, 100_000) ** (1 + md * 1e-3); //(1 - zdelta * Math.abs(zdelta));\n        // console.log(Math.abs(md * 1e-2));\n        // console.log(\n        //   md.toFixed(2) + ' => ' + 1e-2 * Math.abs(md) ** (md <= 0 ? 0.8 : 1.1),\n        // );\n        // console.log(newZ);\n        const newZclamp = _.clamp(newZ, minZoom.getValue(), maxZoom.getValue());\n\n        const realZoom = getRealZoom(newZclamp);\n\n        // get movement of pointer origin for panning\n        const [px, py]: Vector2 = vScale(-2 / realZoom, subV(origin, memo.o));\n        const relMove: Vector2 = [px, -py];\n\n        // setControlXY({\n        //   //\n        //   xy: addV(memo.xy, vRotate(theta.getValue(), relMove)),\n        //   immediate: false,\n        // });\n        // updateZ({});\n        updateXY({\n          xy: memo.xy,\n          theta: theta.getValue(),\n          relMove: relMove,\n          down: down,\n        });\n\n        // setControlZoom({\n        //   z: newZclamp,\n        //   immediate: false,\n        //   config: down ? springsConfigs.user.zoom : springsConfigs.default.zoom,\n        // });\n        updateZ({ z: newZclamp, down: down });\n\n        updateT({\n          t: memo.t + degToRad(ma),\n          down: down,\n        });\n\n        return memo;\n      },\n\n      onWheel: ({\n        event,\n        movement: [, my],\n        active,\n        shiftKey,\n        memo = { zoom: z.getValue(), t: theta.getValue() },\n      }: FullGestureState<StateKey<'wheel'>>) => {\n        // disable native browser events\n        event && event.preventDefault();\n\n        if (shiftKey) {\n          // if shift is pressed, rotate instead of zoom\n          const newT = memo.t + my * 1.5e-3;\n\n          updateT({\n            t: newT,\n            down: active,\n          });\n        } else {\n          // set different multipliers based on zoom direction\n          // mouse movement negative = move up the page = zoom in\n          //                                   zoom        in           out\n          const newZ = memo.zoom * (1 - my * (my < 0 ? zoomMult.in : zoomMult.out));\n\n          // setControlZoom({\n          //   z: _.clamp(newZ, minZoom.getValue(), maxZoom.getValue()),\n          //   config: active ? springsConfigs.user.zoom : springsConfigs.default.zoom,\n          //   // reset immediate value from warp function\n          //   immediate: false,\n          // });\n          updateZ({\n            z: _.clamp(newZ, minZoom.getValue(), maxZoom.getValue()),\n            down: active,\n          });\n        }\n        return memo;\n      },\n\n      onDrag: ({\n        event,\n        down,\n        movement,\n        direction: [dx, dy],\n        velocity,\n        pinching,\n        last,\n        cancel,\n        memo = { xy: xy.getValue(), theta: theta.getValue() },\n      }: FullGestureState<StateKey<'drag'>>) => {\n        // disable native browser events\n        event && event.preventDefault();\n\n        // let pinch handle movement\n        if (pinching) cancel && cancel();\n        // change according to this formula:\n        // move (x, y) in the opposite direction of drag (pan with cursor)\n        // divide by canvas size to scale appropriately\n        // multiply by 2 to correct scaling on viewport (?)\n        // use screen multiplier for more granularity\n        const realZoom = getRealZoom(z.getValue());\n\n        const [px, py]: Vector = vScale(-2 / realZoom, movement);\n        // const relMove: Vector = vScale(2 / realZoom, movement);\n\n        const relMove: Vector = [px, -py];\n        // const relDir: Vector = [dx, -dy];\n\n        // const t = theta.getValue();\n\n        // const vecXY = addV(memo.xy, vRotate(t, relMove)); // add the displacement to the starting position\n        // const velXY = vScale(velocity, vNorm(vecXY))\n\n        // setControlXY({\n        //   // add to the current position the relative displacement (relMove), rotated by theta,\n        //   // to maintain the correct displacement direction (without this it would move as if theta=0)\n        //   xy: vecXY,\n        //   // immediate: down, // immediately apply if the gesture is active\n        //   config: down ? springsConfigs.user.xy : springsConfigs.default.xy,\n        //   // reset immediate value from warp function\n        //   immediate: false,\n        //   //  {\n        //   //   // velocity also needs to be rotated according to theta\n        //   //   // -@ts-expect-error - velocity should be `[number, number]`, but only `number` allowed\n        //   //   // velocity: vScale(-velocity / realZoom, vRotate(t, relDir)), // set the velocity (gesture momentum)\n        //   //   // velocity: vMag(vScale(-velocity / realZoom, vRotate(t, relDir))), // set the velocity (gesture momentum)\n        //   //   // velocity: velocity / screenScaleMultiplier, // set the velocity (gesture momentum)\n        //   //   // mass: down ? 1 : 5,\n        //   //   ...xyCtrlSpringConfig,\n        //   //   tension: down ? xyCtrlSpringConfig.tension : xyCtrlSpringConfig.tension / 2,\n        //   //   // -@ts-expect-error - decay is undocumented?\n        //   //   // decay: true,\n        //   // },\n        // });\n\n        updateXY({\n          xy: memo.xy,\n          theta: theta.getValue(),\n          relMove: relMove,\n          down: down,\n        });\n\n        // tell the renderer that it's being dragged on\n        setDragging(down);\n\n        return memo;\n      },\n    },\n    config: {\n      eventOptions: { passive: false, capture: false },\n      domTarget: domTarget,\n      // The config object passed to useGesture has drag, wheel, scroll, pinch and move keys\n      // for specific gesture options. See here for more details.\n      // drag: {\n      //   bounds,\n      //   rubberband: true,\n      // }\n    },\n  };\n}\n\n/**\n * Warps the given controller to a desired viewer location.\n * @param controls The controller to be animated\n * @param location The (partial) viewer location to warp to: xy, zoom, theta\n * @param immediate Should the update happen immediately? (Useful for testing)\n */\nexport const warpToPoint = (\n  controls: ViewerControlSprings,\n  { xy, z, theta }: Partial<ViewerLocation>,\n  immediate = false,\n): void => {\n  // can't do a simple \"if (x)\" check since values could be zero (evaluates to \"false\")\n  if (xy !== undefined) {\n    controls.xyCtrl[1]({\n      // use screen scale multiplier for a simpler API\n      xy: xy,\n      config: springsConfigs.default.xy,\n      immediate: immediate,\n    });\n  }\n  if (z !== undefined) {\n    controls.zoomCtrl[1]({\n      z: z,\n      config: springsConfigs.default.zoom,\n      immediate: immediate,\n    });\n  }\n  if (theta !== undefined) {\n    controls.rotCtrl[1]({\n      theta: theta,\n      config: springsConfigs.default.rot,\n      immediate: immediate,\n    });\n  }\n};\n\n// no longer using screenScaleMultiplier\n// export const screenToReal = (x: number): number => x * screenScaleMultiplier;\n// export const RealToScreen = (x: number): number => x / screenScaleMultiplier;\n\nexport const Rgb255ColourToFloat = (c: RgbColor): RgbFloatColour =>\n  [c.r, c.g, c.b].map((e) => e / 255) as RgbFloatColour;\n","import { Button, Card, Grid, TextField } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { ChangeCoordinatesCardProps } from '../../common/info';\nimport { warpToPoint } from '../../common/utils';\nimport { defaultMandelbrotStart } from '../../common/values';\n\nconst ChangeCoordinatesCard = (props: ChangeCoordinatesCardProps): JSX.Element => {\n  const [xy, setXY] = useState(defaultMandelbrotStart.xy);\n  const [x, y] = xy;\n  const [zoom, setZoom] = useState(defaultMandelbrotStart.z);\n  const [theta, setTheta] = useState(defaultMandelbrotStart.theta);\n\n  return (\n    <Card\n      style={{\n        width: 'auto',\n        zIndex: 1300,\n        position: 'relative',\n        padding: 8,\n        display: 'flex',\n        flexDirection: 'column',\n        flexShrink: 1,\n        // borderRadius: 100,\n      }}\n    >\n      <Grid container direction=\"column\" alignItems=\"center\">\n        <TextField\n          size=\"small\"\n          style={{ width: '12ch' }}\n          onChange={(e) => setXY(([x, y]) => [Number(e.target.value), y])}\n          type=\"number\"\n          defaultValue={x}\n          inputProps={{ step: 0.01 }}\n          label=\"x\"\n        />\n        <TextField\n          size=\"small\"\n          style={{ width: '12ch' }}\n          onChange={(e) => setXY(([x, y]) => [x, Number(e.target.value)])}\n          type=\"number\"\n          defaultValue={y}\n          inputProps={{ step: 0.01 }}\n          label=\"y\"\n        />\n        <Grid container direction=\"row\" justify=\"space-around\">\n          <TextField\n            size=\"small\"\n            style={{ width: '5ch' }}\n            onChange={(e) => setZoom(Number(e.target.value))}\n            type=\"number\"\n            defaultValue={zoom}\n            inputProps={{ min: 0 }}\n            label=\"zoom\"\n          />\n          <TextField\n            size=\"small\"\n            style={{ width: '5ch' }}\n            onChange={(e) => setTheta(Number(e.target.value))}\n            type=\"number\"\n            defaultValue={theta}\n            inputProps={{ step: 0.1 }}\n            label=\"theta\"\n          />\n        </Grid>\n        <Button\n          style={{ marginTop: 12 }}\n          onClick={() => warpToPoint(props.mandelbrot, { xy: xy, z: zoom, theta: theta })}\n        >\n          Go\n        </Button>\n      </Grid>\n    </Card>\n  );\n};\n\nexport default ChangeCoordinatesCard;\n","import { Card, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { animated } from 'react-spring';\r\nimport { CoordinatesCardProps } from '../../common/info';\r\nimport {\r\n  defaultFloatFixedPrecision,\r\n  shortFloatFixedPrecision,\r\n} from '../../common/values';\r\n\r\nconst CoordinatesCard = (props: CoordinatesCardProps): JSX.Element => {\r\n  return (\r\n    <Card\r\n      style={{\r\n        width: 'auto',\r\n        zIndex: 1300,\r\n        position: 'relative',\r\n        padding: '6px 12px',\r\n        marginBottom: 8,\r\n        // borderRadius: 100,\r\n      }}\r\n    >\r\n      <Typography align=\"right\" style={{ fontFamily: 'monospace', fontSize: '1.2rem' }}>\r\n        {/* https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple */}\r\n        {/* https://www.typescriptlang.org/docs/handbook/2/objects.html#tuple-types */}\r\n        <animated.span>\r\n          {props.mandelbrot.xy.interpolate(\r\n            // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\r\n            (x, y) => `${x.toFixed(defaultFloatFixedPrecision)} : x`,\r\n          )}\r\n        </animated.span>\r\n        <br />\r\n        <animated.span>\r\n          {props.mandelbrot.xy.interpolate(\r\n            // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\r\n            (x, y) => `${y.toFixed(defaultFloatFixedPrecision)} : y`,\r\n          )}\r\n        </animated.span>\r\n        <br />\r\n        <animated.span>\r\n          {props.mandelbrot.zoom.interpolate(\r\n            (z) => `${z.toFixed(shortFloatFixedPrecision)} : z`,\r\n          )}\r\n        </animated.span>\r\n        <br />\r\n        <animated.span>\r\n          {props.mandelbrot.theta.interpolate(\r\n            (t) => `${t.toFixed(shortFloatFixedPrecision)} : t`,\r\n          )}\r\n        </animated.span>\r\n      </Typography>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default CoordinatesCard;\r\n\r\n// <Card\r\n//   style={{\r\n//     width: 'auto',\r\n//     position: 'absolute',\r\n//     zIndex: 2,\r\n//     right: 0,\r\n//     top: 0,\r\n//     margin: 20,\r\n//     padding: 8,\r\n//     display: settings.coords[0] ? 'block' : 'none',\r\n//     // borderRadius: 100,\r\n//   }}\r\n// >\r\n//   <Typography align=\"right\">\r\n//     {/* https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple */}\r\n//     {/* https://www.typescriptlang.org/docs/handbook/2/objects.html#tuple-types */}\r\n//     <animated.span>\r\n//       {mandelbrotControls.xyCtrl[0].xy.interpolate(\r\n//         // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\r\n//         (x, y) => `${(x * screenScaleMultiplier).toFixed(7)} : x`,\r\n//       )}\r\n//     </animated.span>\r\n//     <br />\r\n//     <animated.span>\r\n//       {mandelbrotControls.xyCtrl[0].xy.interpolate(\r\n//         // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\r\n//         (x, y) => `${(y * screenScaleMultiplier).toFixed(7)} : y`,\r\n//       )}\r\n//     </animated.span>\r\n//   </Typography>\r\n// </Card>;\r\n","import { Grow } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { ViewerControlSprings } from '../../common/types';\r\nimport ChangeCoordinatesCard from './ChangeCoordinatesCard';\r\nimport CoordinatesCard from './CoordinatesCard';\r\n\r\nexport const CoordinateInterface = (props: {\r\n  mandelbrot: ViewerControlSprings;\r\n  show: boolean;\r\n}): JSX.Element => {\r\n  return (\r\n    <Grow\r\n      in={props.show}\r\n      style={{\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n        margin: 20,\r\n        width: 'auto',\r\n        zIndex: 1,\r\n      }}\r\n    >\r\n      <div>\r\n        <CoordinatesCard\r\n          mandelbrot={{\r\n            xy: props.mandelbrot.xyCtrl[0].xy,\r\n            zoom: props.mandelbrot.zoomCtrl[0].z,\r\n            theta: props.mandelbrot.rotCtrl[0].theta,\r\n          }}\r\n        />\r\n        <ChangeCoordinatesCard mandelbrot={props.mandelbrot} />\r\n      </div>\r\n    </Grow>\r\n  );\r\n};\r\n\r\nexport default CoordinateInterface;\r\n","export default __webpack_public_path__ + \"static/media/logo-192.6d04f0d3.png\";","export default __webpack_public_path__ + \"static/media/info.5e092896.md\";","import { Link, Typography } from '@material-ui/core';\nimport Markdown, { MarkdownToJSX } from 'markdown-to-jsx';\nimport React, { useEffect, useState } from 'react';\nimport infoTextMarkdown from './info.md';\n\nconst MdOverrideTypography = ({\n  children,\n}: // ...props\nReact.DetailedHTMLProps<\n  React.HTMLAttributes<HTMLParagraphElement>,\n  HTMLParagraphElement\n>): JSX.Element => <Typography paragraph>{children}</Typography>;\n\nconst MdOverrideLink = ({\n  children,\n  title,\n  href,\n}: // ...props\nReact.DetailedHTMLProps<\n  React.AnchorHTMLAttributes<HTMLAnchorElement>,\n  HTMLAnchorElement\n  // JSX.IntrinsicElements.a\n>): JSX.Element => (\n  // <a></a>\n  <Link title={title} href={href} target=\"_blank\">\n    {children}\n  </Link>\n);\n\nconst mdOverrides: MarkdownToJSX.Overrides = {\n  p: MdOverrideTypography,\n  a: MdOverrideLink,\n};\n\nexport const DialogInfoMarkdown = (): JSX.Element => {\n  const [infoMdText, setInfoMdText] = useState('');\n\n  // https://github.com/facebook/create-react-app/issues/2961#issuecomment-322916352\n  useEffect(() => {\n    fetch(infoTextMarkdown)\n      .then((response) => response.text())\n      .then((text) => {\n        // Logs a string of Markdown content.\n        // Now you could use e.g. <rexxars/react-markdown> to render it.\n        // console.log(text);\n        setInfoMdText(text);\n      });\n  }, []);\n\n  return (\n    <Markdown options={{ wrapper: React.Fragment, overrides: mdOverrides }}>\n      {infoMdText}\n    </Markdown>\n  );\n};\n\nexport default mdOverrides;\n","import {\n  Box,\n  Divider,\n  Link,\n  Paper,\n  Snackbar,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport { createStyles, Theme, WithStyles, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\n// for evaluating build time\nimport preval from 'preval.macro';\nimport React, { PropsWithChildren, useMemo, useState } from 'react';\nimport { InfoDialogProps } from '../../common/info';\nimport clientDetect from '../../dist/clientDetect';\nimport MandelbrotMapsLogo from '../../img/logo-192.png';\nimport survey from '../surveyLink.json';\nimport { DialogInfoMarkdown } from './MarkdownOverrides';\n\nconst dateTimeStamp = preval`module.exports = new Date();`;\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      margin: 0,\n      padding: theme.spacing(2),\n      display: 'flex',\n      flexDirection: 'row',\n      // align: \"middle\",\n    },\n    image: {\n      marginTop: 'auto',\n      marginBottom: 'auto',\n      marginRight: 8,\n      height: 50,\n    },\n    closeButton: {\n      // position: 'absolute',\n      // right: theme.spacing(1),\n      // top: theme.spacing(1),\n      marginLeft: 'auto',\n      color: theme.palette.grey[500],\n    },\n  });\n\nexport interface DialogTitleProps extends PropsWithChildren<WithStyles<typeof styles>> {\n  onClose: () => void;\n  id: string;\n}\n\n// https://material-ui.com/guides/typescript/#usage-of-withstyles\nconst DialogTitle = withStyles(styles)(\n  ({ children, classes, onClose, ...other }: DialogTitleProps) => {\n    return (\n      <MuiDialogTitle disableTypography className={classes.root} {...other}>\n        <img\n          src={MandelbrotMapsLogo}\n          alt=\"Mandelbrot Maps logo\"\n          className={classes.image}\n        />\n        <Typography\n          variant=\"h1\"\n          style={{ fontSize: 24, marginTop: 'auto', marginBottom: 'auto' }}\n        >\n          {children}\n        </Typography>\n        {onClose ? (\n          <IconButton\n            aria-label=\"close\"\n            className={classes.closeButton}\n            onClick={onClose}\n          >\n            <CloseIcon />\n          </IconButton>\n        ) : null}\n      </MuiDialogTitle>\n    );\n  },\n);\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(3),\n  },\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions);\n\nconst Alert = (props: AlertProps) => (\n  <MuiAlert elevation={6} variant=\"filled\" {...props} />\n);\n\nconst DialogDivider = () => <Divider style={{ marginTop: 20, marginBottom: 20 }} />;\n\nexport default function InfoDialog({\n  ctrl: [open, setOpen],\n  ...props\n}: InfoDialogProps): JSX.Element {\n  const [snackBarOpen, setSnackBarOpen] = useState(false);\n\n  const handleClose = () => setOpen(false);\n\n  // guard against null / undefined window\n  const clientData = useMemo(() => clientDetect(window), []);\n\n  const writeClientDataToClipboard = () => {\n    const data = JSON.stringify(clientData);\n    console.log(snackBarOpen);\n    try {\n      navigator.clipboard.writeText(data);\n      setSnackBarOpen(true);\n    } catch (e) {\n      window.prompt('Auto copy to clipboard failed, please copy manually:', data);\n    }\n  };\n\n  return (\n    <Dialog\n      onClose={handleClose}\n      aria-labelledby=\"customized-dialog-title\"\n      open={open}\n      maxWidth=\"md\"\n      PaperProps={{\n        style: {\n          // fill more of the screen with this dialog\n          margin: 16,\n          maxHeight: 'calc(100% - 32px)',\n        },\n      }}\n    >\n      <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n        Mandelbrot Maps\n      </DialogTitle>\n      <DialogContent dividers style={{ maxWidth: 700 }}>\n        <DialogInfoMarkdown />\n\n        {/* <Typography gutterBottom>\n          In 2020/2021, two others are working on this project, also under the supervision\n          of Philip Wadler.\n        </Typography> */}\n        {/* <Typography gutterBottom>\n          In 2020/2021, two others are working on this project, also under the supervision\n          of Philip Wadler.\n        </Typography> */}\n        <DialogDivider />\n\n        <Box style={{ display: 'flex' }}>\n          <TableContainer\n            component={Paper}\n            style={{ width: 'auto', margin: 'auto', maxWidth: 460 }}\n            // attempt to stop manual copying of the table\n            onClick={writeClientDataToClipboard}\n            // https://stackoverflow.com/a/46337736/9184658\n            onContextMenu={(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n              e.preventDefault();\n              writeClientDataToClipboard();\n            }}\n          >\n            <Table size=\"small\" aria-label=\"a dense table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"center\" colSpan={2} variant=\"head\">\n                    Device properties\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {Object.entries(clientData).map(([k, v]) => (\n                  <TableRow key={k}>\n                    <TableCell style={{ userSelect: 'none' }}>{k}</TableCell>\n                    <TableCell align=\"right\" style={{ fontFamily: 'monospace' }}>\n                      {String(v)}\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n\n        <DialogDivider />\n\n        <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n          <Typography align=\"center\" style={{ margin: 'auto' }}>\n            Build\n          </Typography>\n          <Typography style={{ fontFamily: 'monospace' }}>{dateTimeStamp}</Typography>\n          <Typography style={{ fontFamily: 'monospace' }}>\n            {process.env.REACT_APP_GIT_SHA}\n          </Typography>\n        </Box>\n      </DialogContent>\n\n      <DialogActions>\n        <Button\n          onClick={() => {\n            writeClientDataToClipboard();\n          }}\n          color=\"primary\"\n          variant=\"outlined\"\n          startIcon={<FileCopyIcon />}\n        >\n          Copy info\n        </Button>\n        <Snackbar\n          open={snackBarOpen}\n          autoHideDuration={5000}\n          // clicking outside the snackbar would trigger close\n          onClose={(e, reason) => {\n            switch (reason) {\n              case 'clickaway':\n                // don't close the snackbar on clicking outside\n                break;\n              default:\n                setSnackBarOpen(false);\n            }\n          }}\n        >\n          <Alert onClose={() => setSnackBarOpen(false)} severity=\"info\">\n            Device properties copied!\n          </Alert>\n        </Snackbar>\n        <Link\n          href={survey.link}\n          target=\"_blank\"\n          rel=\"noopener\"\n          style={{ textDecoration: 'none' }}\n        >\n          <Button autoFocus color=\"primary\" variant=\"outlined\" startIcon={<LaunchIcon />}>\n            Feedback\n          </Button>\n        </Link>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","/* eslint-disable */\n/**\n * JavaScript Client Detection\n * (C) viazenetti GmbH (Christian Ludwig)\n *\n * modified by @JMaio\n */\nexport default function clientDetect(window) {\n  var unknown = '-';\n\n  // screen\n  var screenSize = '';\n  if (window.screen.width) {\n    var width = window.screen.width ? window.screen.width : '';\n    var height = window.screen.height ? window.screen.height : '';\n    screenSize += '' + width + ' x ' + height;\n  }\n\n  // inner window\n  var windowSize = '';\n  if (window.screen.width) {\n    var w = window.innerWidth ? window.innerWidth : '';\n    var h = window.innerHeight ? window.innerHeight : '';\n    windowSize += '' + w + ' x ' + h;\n  }\n\n  // browser\n  var nVer = navigator.appVersion;\n  var nAgt = navigator.userAgent;\n  var browser = navigator.appName;\n  var version = '' + parseFloat(navigator.appVersion);\n  var majorVersion = parseInt(navigator.appVersion, 10);\n  var nameOffset, verOffset, ix;\n\n  // Opera\n  if ((verOffset = nAgt.indexOf('Opera')) != -1) {\n    browser = 'Opera';\n    version = nAgt.substring(verOffset + 6);\n    if ((verOffset = nAgt.indexOf('Version')) != -1) {\n      version = nAgt.substring(verOffset + 8);\n    }\n  }\n  // Opera Next\n  if ((verOffset = nAgt.indexOf('OPR')) != -1) {\n    browser = 'Opera';\n    version = nAgt.substring(verOffset + 4);\n  }\n  // Edge\n  else if ((verOffset = nAgt.indexOf('Edge')) != -1) {\n    browser = 'Microsoft Edge';\n    version = nAgt.substring(verOffset + 5);\n  }\n  // MSIE\n  else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {\n    browser = 'Microsoft Internet Explorer';\n    version = nAgt.substring(verOffset + 5);\n  }\n  // Chrome\n  else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {\n    browser = 'Chrome';\n    version = nAgt.substring(verOffset + 7);\n  }\n  // Safari\n  else if ((verOffset = nAgt.indexOf('Safari')) != -1) {\n    browser = 'Safari';\n    version = nAgt.substring(verOffset + 7);\n    if ((verOffset = nAgt.indexOf('Version')) != -1) {\n      version = nAgt.substring(verOffset + 8);\n    }\n  }\n  // Firefox\n  else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {\n    browser = 'Firefox';\n    version = nAgt.substring(verOffset + 8);\n  }\n  // MSIE 11+\n  else if (nAgt.indexOf('Trident/') != -1) {\n    browser = 'Microsoft Internet Explorer';\n    version = nAgt.substring(nAgt.indexOf('rv:') + 3);\n  }\n  // Other browsers\n  else if (\n    (nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))\n  ) {\n    browser = nAgt.substring(nameOffset, verOffset);\n    version = nAgt.substring(verOffset + 1);\n    if (browser.toLowerCase() == browser.toUpperCase()) {\n      browser = navigator.appName;\n    }\n  }\n  // trim the version string\n  if ((ix = version.indexOf(';')) != -1) version = version.substring(0, ix);\n  if ((ix = version.indexOf(' ')) != -1) version = version.substring(0, ix);\n  if ((ix = version.indexOf(')')) != -1) version = version.substring(0, ix);\n\n  majorVersion = parseInt('' + version, 10);\n  if (isNaN(majorVersion)) {\n    version = '' + parseFloat(navigator.appVersion);\n    majorVersion = parseInt(navigator.appVersion, 10);\n  }\n\n  // mobile version\n  var mobile = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);\n\n  // cookie\n  var cookieEnabled = navigator.cookieEnabled ? true : false;\n\n  if (typeof navigator.cookieEnabled == 'undefined' && !cookieEnabled) {\n    document.cookie = 'testcookie';\n    cookieEnabled = document.cookie.indexOf('testcookie') != -1 ? true : false;\n  }\n\n  // system\n  var os = unknown;\n  var clientStrings = [\n    { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\n    { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\n    { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\n    { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\n    { s: 'Windows Vista', r: /Windows NT 6.0/ },\n    { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\n    { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\n    { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },\n    { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },\n    { s: 'Windows 98', r: /(Windows 98|Win98)/ },\n    { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },\n    { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\n    { s: 'Windows CE', r: /Windows CE/ },\n    { s: 'Windows 3.11', r: /Win16/ },\n    { s: 'Android', r: /Android/ },\n    { s: 'Open BSD', r: /OpenBSD/ },\n    { s: 'Sun OS', r: /SunOS/ },\n    { s: 'Chrome OS', r: /CrOS/ },\n    { s: 'Linux', r: /(Linux|X11(?!.*CrOS))/ },\n    { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\n    { s: 'Mac OS X', r: /Mac OS X/ },\n    { s: 'Mac OS', r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n    { s: 'QNX', r: /QNX/ },\n    { s: 'UNIX', r: /UNIX/ },\n    { s: 'BeOS', r: /BeOS/ },\n    { s: 'OS/2', r: /OS\\/2/ },\n    {\n      s: 'Search Bot',\n      r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/,\n    },\n  ];\n  for (var id in clientStrings) {\n    var cs = clientStrings[id];\n    if (cs.r.test(nAgt)) {\n      os = cs.s;\n      break;\n    }\n  }\n\n  var osVersion = unknown;\n\n  if (/Windows/.test(os)) {\n    osVersion = /Windows (.*)/.exec(os)[1];\n    os = 'Windows';\n  }\n\n  switch (os) {\n    case 'Mac OS X':\n      osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\n      break;\n\n    case 'Android':\n      osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\n      break;\n\n    case 'iOS':\n      osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\n      osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\n      break;\n\n    default:\n      break;\n  }\n\n  // user agent string manipulation to obtain device model\n  var system = nAgt.substring(nAgt.indexOf('(') + 1, nAgt.indexOf(')'));\n  var device = system.substring(system.lastIndexOf(';') + 1);\n\n  // use JavaScript to detect GPU used from within your browser - by cvan\n  // https://gist.github.com/cvan/042b2448fcecefafbb6a91469484cdf8\n  var canvas = document.createElement('canvas');\n  var gl;\n  var debugInfo;\n  var gpuVendor;\n  var renderer;\n\n  try {\n    gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    // move block here if webgl not available\n    // if (gl) {\n    debugInfo = gl.getExtension('WEBGL_debug_renderer_info');\n    gpuVendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);\n    renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);\n    // }\n  } catch (e) {\n    //   do nothing\n  }\n  // ----------------------------------------------------------------\n\n  //   window.jscd = {\n  return {\n    browser: browser,\n    browserVersion: majorVersion,\n    browserRelease: version,\n    // vendor: navigator.vendor,\n    device: device,\n    os: os,\n    osVersion: osVersion,\n    mobile: mobile,\n    platform: navigator.platform,\n    screen: screenSize,\n    windowSize: windowSize,\n    dpr: +window.devicePixelRatio.toFixed(3),\n    gpu: renderer,\n    gpuVendor: gpuVendor,\n    userAgent: navigator.userAgent,\n    // cookies: cookieEnabled,\n    // flashVersion: flashVersion\n  };\n}\n// (this)\n\n// alert(\n//     'OS: ' + jscd.os +' '+ jscd.osVersion + '\\n' +\n//     'Browser: ' + jscd.browser +' '+ jscd.browserMajorVersion +\n//       ' (' + jscd.browserVersion + ')\\n' +\n//     'Mobile: ' + jscd.mobile + '\\n' +\n//     'Flash: ' + jscd.flashVersion + '\\n' +\n//     'Cookies: ' + jscd.cookies + '\\n' +\n//     'Screen Size: ' + jscd.screen + '\\n\\n' +\n//     'Full User Agent: ' + navigator.userAgent\n// );\n","// TODO set max iterations as parameter\n\nimport { RendererRenderValues } from '../common/render';\n\nconst newSmoothJuliaShader = ({\n  maxI = 300,\n  AA = 1,\n  B = 64,\n}: RendererRenderValues): string => `\n\n#define AA ${AA}\n#define MAXI ${maxI}\n#define B ${B.toFixed(1)}\n\n// https://webglfundamentals.org/webgl/lessons/webgl-precision-issues.html\n// prefer high float precision (lower than this may break colours on mobile)\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n// need to know the resolution of the canvas\nuniform vec2 resolution;\n\n// properties should be passed as uniforms\nuniform int   u_maxI;\nuniform vec2  u_xy;\nuniform vec2  u_c;\nuniform float u_zoom;\nuniform float u_theta;\nuniform vec3  u_colour;\n\nfloat julia( vec2 z, vec2 c ) {\n\n  float l = 0.0;\n  for( int i=0; i<MAXI; i++ )\n  {\n      z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c;\n      if( dot(z,z)>(B*B) ) break;\n      l += 1.0;\n  }\n\n  // maxed out iterations\n  if( l>float(MAXI)-1.0 ) return 0.0;\n\n  // equivalent optimized smooth interation count\n  l = l - log2(log2(dot(z,z))) + 4.0;\n\n  return l;\n}\n\nvoid main() {    \n  // set the initial colour to black\n  vec3 col = vec3(0.0);\n\n  // anti-aliasing\n  #if AA>1\n  for( int m=0; m<AA; m++ )\n  for( int n=0; n<AA; n++ )\n  {\n      vec2 p = (2.0*(gl_FragCoord.xy + vec2(float(m), float(n)) / float(AA) ) - resolution.xy)/resolution.y;\n      float w = float(AA*m+n);\n  #else    \n      // adjust pixels to range from [-1, 1]\n      vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\n  #endif\n  \n  // constant \"c\" to add, based on mandelbrot position\n  vec2 c = u_c;\n\n  float sinT = sin(u_theta);\n  float cosT = cos(u_theta);\n\n  vec2 xy = vec2( p.x*cosT - p.y*sinT, p.x*sinT + p.y*cosT );\n  // c is based on offset and grid position, z_0 = 0\n  vec2 z = u_xy + xy/u_zoom;\n\n  float l = julia(z, c);\n  // col += 0.5 + 0.5*cos( 3.0 + l*0.15 + vec3(0.0,0.6,1.0));\n  col += 0.5 + 0.5*cos( 3.0 + l*0.15 + u_colour);\n\n\n  // antialiasing\n  #if AA>1\n  }\n  col /= float(AA*AA);\n  #endif\n\n  // Output to screen\n  gl_FragColor = vec4( col, 1.0 );\n}\n`;\n\nexport default newSmoothJuliaShader;\n","import { FormControlLabelProps, SvgIcon } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { RgbColor } from 'react-colorful';\r\nimport { defaultShadingColour } from './values';\r\n// https://stackoverflow.com/a/39281228/9184658\r\n\r\nexport type settingsDefinitionsType = {\r\n  showMinimap: boolean;\r\n  showCrosshair: boolean;\r\n  showCoordinates: boolean;\r\n  showFPS: boolean;\r\n  maxI: number;\r\n  useDPR: boolean;\r\n  useAA: boolean;\r\n  colour: RgbColor;\r\n};\r\n\r\nexport const defaultSettings = {\r\n  showMinimap: true,\r\n  showCrosshair: true,\r\n  showCoordinates: false,\r\n  maxI: 250,\r\n  showFPS: false,\r\n  useDPR: false,\r\n  useAA: false,\r\n  colour: defaultShadingColour,\r\n};\r\n\r\nexport type settingsWidgetType = {\r\n  // - settings widgets key k must be in the set\r\n  // - its type must be of FormControlLabelProps (for displaying in the Material UI form)\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  [k in keyof settingsDefinitionsType]: FormControlLabelProps;\r\n  // using \"k\" results in an error since it is not used again\r\n};\r\n\r\nexport type settingsGroupType = {\r\n  name: string;\r\n  icon: typeof SvgIcon;\r\n  widgets: {\r\n    // widget groups may contain any of the keys in the settingsDefinitionsType\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    [k in keyof Partial<settingsDefinitionsType>]: FormControlLabelProps;\r\n    // using \"k\" results in an error since it is not used again\r\n  };\r\n};\r\n\r\nexport type SettingsContextType = {\r\n  settings: settingsDefinitionsType;\r\n  setSettings: React.Dispatch<React.SetStateAction<settingsDefinitionsType>>;\r\n  settingsWidgets: settingsWidgetType;\r\n  // newSettings: {\r\n  //   [k in keyof settingsDefinitionsType]: [\r\n  //     settingsDefinitionsType[k],\r\n  //     React.Dispatch<React.SetStateAction<settingsDefinitionsType[k]>>,\r\n  //   ];\r\n  // };\r\n};\r\n\r\nexport interface SettingsMenuProps {\r\n  reset: () => void;\r\n  toggleInfo: () => void;\r\n}\r\n","import { Slider, Switch } from '@material-ui/core';\r\nimport ExtensionIcon from '@material-ui/icons/Extension';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport React from 'react';\r\nimport { RgbColorPicker } from 'react-colorful';\r\nimport {\r\n  settingsDefinitionsType,\r\n  settingsGroupType,\r\n  settingsWidgetType,\r\n} from '../../common/settings';\r\n\r\nexport const settingsWidgets = (\r\n  settings: settingsDefinitionsType,\r\n): settingsWidgetType => ({\r\n  showMinimap: {\r\n    label: 'Minimap',\r\n    checked: settings.showMinimap,\r\n    control: <Switch />,\r\n  },\r\n  showCrosshair: {\r\n    label: 'Crosshair',\r\n    checked: settings.showCrosshair,\r\n    control: <Switch />,\r\n  },\r\n  showCoordinates: {\r\n    label: 'Show coordinates',\r\n    checked: settings.showCoordinates,\r\n    control: <Switch />,\r\n  },\r\n  maxI: {\r\n    label: 'Iterations',\r\n    value: settings.maxI,\r\n    labelPlacement: 'top',\r\n    style: {\r\n      marginLeft: 0,\r\n      marginRight: 0,\r\n    },\r\n    control: (\r\n      <Slider\r\n        min={10}\r\n        max={1000}\r\n        step={10}\r\n        valueLabelDisplay=\"auto\"\r\n        marks={[\r\n          { value: 10, label: 10 },\r\n          { value: 250, label: 250 },\r\n          { value: 500, label: 500 },\r\n          { value: 750, label: 750 },\r\n          { value: 1000, label: 1000 },\r\n        ]}\r\n      />\r\n    ),\r\n  },\r\n  useDPR: {\r\n    // https://stackoverflow.com/a/12830454/9184658\r\n    // // There is a downside that values like 1.5 will give \"1.50\" as the output. A fix suggested by @minitech:\r\n    // var numb = 1.5;\r\n    // numb = +numb.toFixed(2);\r\n    // // Note the plus sign that drops any \"extra\" zeroes at the end.\r\n    // // It changes the result (which is a string) into a number again (think \"0 + foo\"),\r\n    // // which means that it uses only as many digits as necessary.\r\n    label: `Use pixel ratio (${+window.devicePixelRatio.toFixed(3)})`,\r\n    checked: settings.useDPR,\r\n    control: <Switch />,\r\n  },\r\n  useAA: {\r\n    label: `Anti-aliasing (slow)`,\r\n    checked: settings.useAA,\r\n    control: <Switch />,\r\n  },\r\n  showFPS: {\r\n    label: `Show FPS`,\r\n    checked: settings.showFPS,\r\n    control: <Switch />,\r\n  },\r\n  colour: {\r\n    label: null,\r\n    style: {\r\n      marginTop: 14,\r\n      marginBottom: 10,\r\n      marginLeft: 0,\r\n      marginRight: 0,\r\n    },\r\n    control: (\r\n      <RgbColorPicker\r\n        // set the initial colour\r\n        color={settings.colour}\r\n      />\r\n    ),\r\n  },\r\n});\r\n\r\nexport const getSettingsWidgetsGrouping = (\r\n  settingsWidgets: settingsWidgetType,\r\n): Array<settingsGroupType> => [\r\n  {\r\n    icon: ExtensionIcon,\r\n    name: 'Interface',\r\n    widgets: {\r\n      showMinimap: settingsWidgets.showMinimap,\r\n      showCrosshair: settingsWidgets.showCrosshair,\r\n      showCoordinates: settingsWidgets.showCoordinates,\r\n    },\r\n    // ],\r\n  },\r\n  {\r\n    icon: PhotoIcon,\r\n    name: 'Graphics',\r\n    widgets: {\r\n      maxI: settingsWidgets.maxI,\r\n      colour: settingsWidgets.colour,\r\n      useDPR: settingsWidgets.useDPR,\r\n      useAA: settingsWidgets.useAA,\r\n      showFPS: settingsWidgets.showFPS,\r\n    },\r\n  },\r\n];\r\n","import React, { createContext, ReactNode, useState } from 'react';\r\nimport {\r\n  defaultSettings,\r\n  SettingsContextType,\r\n  settingsDefinitionsType,\r\n} from '../../common/settings';\r\nimport { settingsWidgets } from './SettingsDefinitions';\r\n\r\nexport const SettingsContext = createContext<SettingsContextType>({\r\n  // provide the context with the default values\r\n  settings: defaultSettings,\r\n  // can't set state until it's initialized\r\n  setSettings: () => {\r\n    return;\r\n  },\r\n  settingsWidgets: settingsWidgets(defaultSettings),\r\n});\r\n\r\n// export const useSettings = (): SettingsContextType => useContext(SettingsContext);\r\n\r\nexport const SettingsProvider = ({ children }: { children: ReactNode }): JSX.Element => {\r\n  // https://reactjs.org/docs/context.html#updating-context-from-a-nested-component\r\n  // no grouping: all settings are accessible\r\n  const [settings, setSettings] = useState<settingsDefinitionsType>(defaultSettings);\r\n\r\n  return (\r\n    <SettingsContext.Provider\r\n      value={{\r\n        settings,\r\n        setSettings,\r\n        settingsWidgets: settingsWidgets(settings),\r\n      }}\r\n    >\r\n      {children}\r\n    </SettingsContext.Provider>\r\n  );\r\n};\r\n\r\nexport default SettingsProvider;\r\n","import { colors, createMuiTheme } from '@material-ui/core';\n\nconst theme = createMuiTheme({\n  props: {\n    // Name of the component \n    MuiSwitch: {\n      // The default props to change\n      color: 'primary', // x, on the whole application !\n    },\n    MuiButton: {\n      variant: 'outlined',\n      // style: {\n      //   borderRadius: 24,\n      // },\n    },\n  },\n  palette: {\n    primary: {\n      main: colors.blue[700],\n    },\n    secondary: {\n      main: colors.red[700],\n    },\n    info: {\n      main: colors.blue[700],\n    },\n  },\n  shape: {\n    borderRadius: 12,\n  },\n});\n\nexport const simpleBoxShadow = '0px 2px 10px 1px rgba(0, 0, 0, 0.4)';\nexport const lightBoxShadow = '0px 0px 10px 2px rgba(255, 255, 255, 0.8)';\nexport const darkBoxShadow = '0px 0px 10px 2px rgba(0, 0, 0, 0.8)';\n\n/**\n * A box shadow comprised of two overlaid box shadows:\n * - a light box shadow (for contrasting against **dark** backgrounds)\n * - a dark box shadow (for contrasting against **light** backgrounds)\n */\nexport const contrastBoxShadow = `${lightBoxShadow}, ${darkBoxShadow}`;\n\nexport default theme;\n","export const fullVertexShader = `\r\nattribute vec4 position;\r\n\r\nvoid main() {\r\n  gl_Position = position;\r\n}\r\n`;\r\n\r\n// This \"position\" array specifies the vertex positions of the element\r\n// to be displayed by the vertex shader. It represents two triangles,\r\n// each filling half of the screen diagonally, and together filling the\r\n// full canvas space to allow the fragment shader to act on the full canvas.\r\nexport const fullscreenVertexArray = {\r\n  position: {\r\n    numComponents: 3,\r\n    data: [-1, -1, 0, 1, -1, 0, -1, 1, 0, -1, 1, 0, 1, -1, 0, 1, 1, 0],\r\n  },\r\n};\r\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { animated } from 'react-spring';\nimport * as twgl from 'twgl.js';\nimport { WebGLCanvasProps } from '../../common/render';\nimport { fullscreenVertexArray, fullVertexShader } from '../../shaders/fullVertexShader';\n\n// https://mariusschulz.com/blog/typing-destructured-object-parameters-in-typescript\n// https://stackoverflow.com/a/50294843/9184658\nconst WebGLCanvas = React.forwardRef<HTMLCanvasElement, WebGLCanvasProps>(\n  (props: WebGLCanvasProps, refAny) => {\n    // const { mini = false, ...rest } = props;\n    // props:\n    // id\n    // fragShader\n    // -- uniforms:\n    //    u_zoom\n    //    u_pos\n    //    u_maxI\n    // ref\n    // glRef\n\n    const canvasRef = refAny as React.MutableRefObject<HTMLCanvasElement>;\n\n    const gl = useRef<WebGLRenderingContext | null>();\n    const renderRequestRef = useRef<number>();\n    const bufferInfo = useRef<twgl.BufferInfo>();\n    const programInfo = useRef<twgl.ProgramInfo>();\n\n    const u = props.u;\n    const setFps = props.fps;\n\n    // have a zoom callback\n    // keeps minimaps at a fixed zoom level\n    const zoom = useCallback(() => (props.mini ? 0.95 : props.u.zoom.getValue()), [\n      props.mini,\n      props.u.zoom,\n    ]);\n\n    // const DPR = props.useDPR ? props.DPR : 1;\n\n    // canvas setup step - get webgl context\n    const setupCanvas = useCallback(() => {\n      gl.current = canvasRef.current.getContext('webgl');\n      console.debug(`WebGL canvas context created`);\n    }, [gl, canvasRef]);\n\n    useEffect(() => {\n      setupCanvas();\n\n      // https://www.khronos.org/webgl/wiki/HandlingContextLost\n      canvasRef.current.addEventListener(\n        'webglcontextlost',\n        (event: Event) => {\n          console.error('WebGL context lost!');\n          event.preventDefault();\n          // trigger an error alert in future?\n        },\n        false,\n      );\n      canvasRef.current.addEventListener(\n        'webglcontextrestored',\n        (event: Event) => {\n          console.error('WebGL context restored! Setting up...');\n          setupCanvas();\n        },\n        false,\n      );\n\n      // remove this context?\n      // return () => gl.current ??\n    }, [canvasRef, setupCanvas]);\n\n    const compileShader = useCallback(() => {\n      const ctx = gl.current as WebGLRenderingContext;\n      bufferInfo.current = twgl.createBufferInfoFromArrays(ctx, fullscreenVertexArray);\n      programInfo.current = twgl.createProgramInfo(ctx, [\n        fullVertexShader,\n        props.fragShader,\n      ]);\n      console.debug(`Fragment shader compiled`);\n    }, [gl, props.fragShader]);\n\n    // re-compile program if shader changes\n    useEffect(compileShader, [compileShader]);\n\n    const then = useRef(0);\n    const frames = useRef(0);\n    const elapsedTime = useRef(0);\n    // fps update interval\n    const interval = 1000;\n\n    // the main render function for WebGL\n    const render = useCallback(\n      (time) => {\n        const ctx = gl.current as WebGLRenderingContext;\n        const prog = programInfo.current as twgl.ProgramInfo;\n        const buff = bufferInfo.current as twgl.BufferInfo;\n\n        twgl.resizeCanvasToDisplaySize(canvasRef.current, props.DPR);\n        // scale the viewport to the canvas size\n        ctx.viewport(0, 0, canvasRef.current.width, canvasRef.current.height);\n\n        const uniforms = {\n          resolution: [canvasRef.current.width, canvasRef.current.height],\n          u_zoom: zoom(),\n          u_c: u.c === undefined ? 0 : u.c.getValue(),\n          u_xy: u.xy.getValue(),\n          u_maxI: u.maxI,\n          u_theta: u.theta.getValue(),\n          u_colour: u.colour,\n        };\n\n        ctx.useProgram(prog.program);\n        twgl.setBuffersAndAttributes(ctx, prog, buff);\n        twgl.setUniforms(prog, uniforms);\n        twgl.drawBufferInfo(ctx, buff);\n\n        // calculate fps\n        if (setFps !== undefined) {\n          frames.current++;\n          elapsedTime.current += time - then.current;\n          then.current = time;\n\n          // console.log(elapsedTime.current);\n          if (elapsedTime.current >= interval) {\n            //multiply with (1000 / elapsed) for accuracy\n            setFps((frames.current * (interval / elapsedTime.current)).toFixed(1));\n            frames.current = 0;\n            elapsedTime.current -= interval;\n\n            // document.getElementById('test').innerHTML = fps;\n          }\n        }\n\n        // The 'state' will always be the initial value here\n        renderRequestRef.current = requestAnimationFrame(render);\n      },\n      [gl, u, zoom, props.DPR, setFps, interval, canvasRef],\n    );\n\n    useEffect(() => {\n      renderRequestRef.current = requestAnimationFrame(render);\n      return () => cancelAnimationFrame(renderRequestRef.current as number);\n    }, [render]);\n\n    return (\n      <animated.canvas\n        className=\"renderer\"\n        ref={refAny}\n        id={props.id}\n        style={{\n          // cursor should show whether the viewer is being grabbed\n          cursor: props.dragging ? 'grabbing' : 'grab',\n          // adding style allows direct style override\n          ...props.style,\n        }}\n      />\n    );\n  },\n);\n\nWebGLCanvas.displayName = 'WebGLCanvas';\n\nexport default WebGLCanvas;\n","import { ButtonBase, Grow, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport { MinimapViewerProps } from '../../common/render';\nimport { simpleBoxShadow } from '../../theme/theme';\nimport WebGLCanvas from './WebGLCanvas';\n\nconst miniSize = 100;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nconst MinimapViewer = (props: MinimapViewerProps): JSX.Element => {\n  const { canvasRef, onClick, show, ...rest } = props;\n  const classes = useStyles();\n\n  return (\n    <Grow in={show}>\n      <ButtonBase\n        style={{\n          position: 'absolute',\n          // make minimap stick out through backdrop\n          zIndex: 1300,\n          margin: '0.5rem',\n          left: 0,\n          bottom: 0,\n          // cursor: 'pointer',\n          height: miniSize,\n          width: miniSize,\n          // borderRadius: borderRadius,\n          // border: \"1px solid #000\",\n          boxShadow: simpleBoxShadow,\n          overflow: 'hidden',\n          // opacity: zoom.interpolate((z) => _.clamp(z - 1, 0, 1)),\n          // display: zoom.interpolate((z) => (_.clamp(z - 1, 0, 1) === 0 ? 'none' : 'block')),\n        }}\n        onClick={onClick}\n        className={classes.root}\n      >\n        <WebGLCanvas\n          id={props.id}\n          mini={true}\n          ref={canvasRef}\n          {...rest}\n          // setting border radius here stops the canvas clickable area from overflowing\n          // outside the div circle, which would make the clickable area a rectangle\n          style={{\n            // borderRadius: borderRadius,\n            // cursor should be \"pointer\" (looks clickable) if this is a minimap,\n            cursor: 'pointer',\n          }}\n        />\n      </ButtonBase>\n    </Grow>\n  );\n};\nexport default MinimapViewer;\n","import React, { useRef, useState } from 'react';\nimport { useGesture } from 'react-use-gesture';\nimport { JuliaRendererProps } from '../../common/render';\nimport { MandelbrotMapsWebGLUniforms } from '../../common/types';\nimport { genericTouchBind, Rgb255ColourToFloat } from '../../common/utils';\nimport newSmoothJuliaShader from '../../shaders/newSmoothJuliaShader';\nimport { SettingsContext } from '../settings/SettingsContext';\nimport MinimapViewer from './MinimapViewer';\nimport WebGLCanvas from './WebGLCanvas';\nexport default function JuliaRenderer(props: JuliaRendererProps): JSX.Element {\n  // variables to hold canvas and webgl information\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const miniCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  const [{ xy }] = props.controls.xyCtrl;\n  const [{ z }, setControlZoom] = props.controls.zoomCtrl;\n  const [{ theta }] = props.controls.rotCtrl;\n  const maxI = props.maxI; // -> global\n  const AA = props.useAA ? 2 : 1;\n\n  const fragShader = newSmoothJuliaShader({\n    maxI: maxI,\n    AA: AA,\n  });\n\n  const miniFragShader = newSmoothJuliaShader({\n    maxI: maxI,\n    AA: 2,\n  });\n\n  const u: MandelbrotMapsWebGLUniforms = {\n    zoom: z,\n    xy: xy,\n    c: props.c,\n    theta: theta,\n    maxI: maxI,\n    colour: Rgb255ColourToFloat(props.colour),\n  };\n\n  const [dragging, setDragging] = useState(false);\n\n  const gtb = genericTouchBind({\n    domTarget: canvasRef,\n    controls: props.controls,\n    setDragging: setDragging,\n    DPR: props.DPR,\n  });\n\n  useGesture(gtb.handlers, gtb.config);\n\n  return (\n    <SettingsContext.Consumer>\n      {({ settings }) => (\n        <div\n          className=\"renderer\"\n          style={{\n            position: 'relative',\n          }}\n        >\n          <WebGLCanvas\n            id=\"julia-canvas\"\n            fragShader={fragShader}\n            DPR={props.DPR}\n            u={u}\n            ref={canvasRef}\n            dragging={dragging}\n          />\n          <MinimapViewer\n            id=\"julia-minimap-canvas\"\n            fragShader={miniFragShader}\n            DPR={props.DPR}\n            u={u}\n            canvasRef={miniCanvasRef}\n            onClick={() => setControlZoom({ z: 1 })}\n            show={settings.showMinimap}\n          />\n        </div>\n      )}\n    </SettingsContext.Consumer>\n  );\n}\n","// TODO set max iterations as parameter, crosshair as parameter\n\nimport { RendererRenderValues } from '../common/render';\n\nconst makeCrosshair = (stroke: number, radius: number) => ({\n  stroke,\n  radius,\n});\n\nexport const standardCrosshair = makeCrosshair(2, 100);\nexport const miniCrosshair = makeCrosshair(1, 30);\n\nexport interface MandelbrotShaderParams {\n  maxI: number;\n  /** Radial boundary */\n  B: number;\n  /** Anti-aliasing samples */\n  AA: number;\n}\n\nconst newSmoothMandelbrotShader = (\n  { maxI = 300, AA = 1, B = 64 }: RendererRenderValues,\n  showCrosshair = true,\n  crosshairShape = {\n    stroke: 2,\n    radius: 100,\n  },\n): string => {\n  return `\n// Adapted by Joao Maio/2019, based on work by inigo quilez - iq/2013\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n// See here for more information on smooth iteration count:\n// http://iquilezles.org/www/articles/mset_smooth/mset_smooth.htm\n\n#define false 0\n#define true 1\n\n// render parameters\n#define AA ${AA}\n#define MAXI ${maxI}\n#define B ${B.toFixed(1)}\n\n// crosshair parameters\n#define show_crosshair ${showCrosshair}\n#define cross_stroke ${crosshairShape.stroke.toFixed(1)}\n#define cross_radius ${crosshairShape.radius.toFixed(1)}\n\n// https://webglfundamentals.org/webgl/lessons/webgl-precision-issues.html\n// prefer high float precision (lower than this may break colours on mobile)\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n// need to know the resolution of the canvas\nuniform vec2 resolution;\n\n// properties should be passed as uniforms\nuniform int   u_maxI;  \nuniform vec2  u_xy;\nuniform float u_zoom;\nuniform float u_theta;\nuniform vec3  u_colour;\n\nbool crosshair( float x, float y ) {\n  float abs_x = abs(2.0*x - resolution.x);\n  float abs_y = abs(2.0*y - resolution.y);\n\n  return \n  // crosshair in centre of screen\n  (abs_x <= cross_stroke || abs_y <= cross_stroke) &&\n  // crosshair size / \"radius\"\n  (abs_x <= cross_radius && abs_y <= cross_radius);\n}\n\nfloat mandelbrot( in vec2 c ) {\n    {\n        float c2 = dot(c, c);\n        // skip computation inside M1 - http://iquilezles.org/www/articles/mset_1bulb/mset1bulb.htm\n        if( 256.0*c2*c2 - 96.0*c2 + 32.0*c.x - 3.0 < 0.0 ) return 0.0;\n        // skip computation inside M2 - http://iquilezles.org/www/articles/mset_2bulb/mset2bulb.htm\n        if( 16.0*(c2+2.0*c.x+1.0) - 1.0 < 0.0 ) return 0.0;\n    }\n\n    float l = 0.0;\n    vec2 z  = vec2(0.0);\n    for( int i=0; i<MAXI; i++ )\n    {\n        z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c;\n        if( dot(z,z)>(B*B) ) break;\n        l += 1.0;\n    }\n\n    // maxed out iterations\n    if( l>float(MAXI)-1.0 ) return 0.0;\n    \n    // optimized smooth interation count\n    l = l - log2(log2(dot(z,z))) + 4.0;\n\n    return l;\n}\n\nvoid main() {    \n    // set the initial colour to black\n    vec3 col = vec3(0.0);\n\n    // anti-aliasing\n    #if AA>1\n    for( int m=0; m<AA; m++ )\n    for( int n=0; n<AA; n++ )\n    {\n        // vec2 p = (-iResolution.xy + 2.0*(fragCoord.xy+vec2(float(m),float(n))/float(AA)))/iResolution.y;\n        vec2 p = (2.0*(gl_FragCoord.xy + vec2(float(m), float(n)) / float(AA) ) - resolution.xy)/resolution.y;\n        float w = float(AA*m+n);\n    #else    \n        // adjust pixels to range from [-1, 1]\n        vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\n    #endif\n\n    float sinT = sin(u_theta);\n    float cosT = cos(u_theta);\n\n    vec2 xy = vec2( p.x*cosT - p.y*sinT, p.x*sinT + p.y*cosT );\n    // c is based on offset and grid position, z_0 = 0\n    vec2 c = u_xy + xy/u_zoom;\n    \n    float l = mandelbrot(c);\n    // col += 0.5 + 0.5*cos( 3.0 + l*0.15 + vec3(0.0,0.6,1.0));\n    col += 0.5 + 0.5*cos( 3.0 + l*0.15 + u_colour);\n\n    // antialiasing\n    #if AA>1\n    }\n    col /= float(AA*AA);\n    #endif\n\n    #if show_crosshair\n    if (crosshair(gl_FragCoord.x, gl_FragCoord.y)) {\n        col = 1. - col;\n    }\n    #endif\n\n    // Output to screen\n    gl_FragColor = vec4( col, 1.0 );\n}\n    `;\n};\n\nexport default newSmoothMandelbrotShader;\n","import { Card, Grow } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { animated } from 'react-spring';\r\nimport { FPSCardProps } from '../../common/info';\r\n\r\nconst FPSCard = (props: FPSCardProps): JSX.Element => (\r\n  <Grow in={props.show}>\r\n    <Card\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        padding: '4px 12px',\r\n        margin: 6,\r\n        fontFamily: 'monospace',\r\n        borderRadius: 100,\r\n        fontSize: '1.8rem',\r\n        zIndex: 1300,\r\n        userSelect: 'none',\r\n      }}\r\n    >\r\n      <animated.div>{props.fps}</animated.div>\r\n    </Card>\r\n  </Grow>\r\n);\r\n\r\nexport default FPSCard;\r\n","import React, { useRef, useState } from 'react';\nimport { useGesture } from 'react-use-gesture';\nimport { MandelbrotRendererProps } from '../../common/render';\nimport { MandelbrotMapsWebGLUniforms } from '../../common/types';\nimport { genericTouchBind, Rgb255ColourToFloat } from '../../common/utils';\nimport newSmoothMandelbrotShader, {\n  miniCrosshair,\n  standardCrosshair,\n} from '../../shaders/newSmoothMandelbrotShader';\nimport FPSCard from '../info/FPSCard';\nimport { SettingsContext } from '../settings/SettingsContext';\nimport MinimapViewer from './MinimapViewer';\nimport WebGLCanvas from './WebGLCanvas';\n\nexport default function MandelbrotRenderer(props: MandelbrotRendererProps): JSX.Element {\n  // variables to hold canvas and webgl information\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const miniCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  // const gl = useRef<WebGLRenderingContext>(null);\n  // const miniGl = useRef<WebGLRenderingContext>(null);\n\n  // this multiplier subdivides the screen space into smaller increments\n  // to allow for velocity calculations to not immediately decay, due to the\n  // otherwise small scale that is being mapped to the screen.\n  // const screenScaleMultiplier = props.screenScaleMultiplier; // -> global\n\n  // temporary bounds to prevent excessive panning\n  // eslint-disable-next-line\n  // const radialBound = 1;\n  // const relativeRadialBound = radialBound;// / -screenScaleMultiplier;\n\n  // read incoming props\n  const [{ xy }] = props.controls.xyCtrl;\n  // const [{ theta, last_pointer_angle }, setControlRot] = props.controls.rot;\n  const [{ z }, setControlZoom] = props.controls.zoomCtrl;\n  const [{ theta }] = props.controls.rotCtrl;\n  const maxI = props.maxI; // -> global\n  const AA = props.useAA ? 2 : 1; // -> global\n\n  const fragShader = newSmoothMandelbrotShader(\n    {\n      maxI: maxI,\n      AA: AA,\n    },\n    props.showCrosshair,\n    standardCrosshair,\n  );\n  const miniFragShader = newSmoothMandelbrotShader(\n    {\n      maxI: maxI,\n      AA: 2,\n    },\n    props.showCrosshair,\n    miniCrosshair,\n  );\n\n  const u: MandelbrotMapsWebGLUniforms = {\n    zoom: z,\n    xy: xy,\n    theta: theta,\n    maxI: maxI,\n    colour: Rgb255ColourToFloat(props.colour), // vec3(0.0,0.6,1.0)\n    // screenScaleMultiplier: screenScaleMultiplier,\n  };\n\n  const [dragging, setDragging] = useState(false);\n\n  const gtb = genericTouchBind({\n    domTarget: canvasRef,\n    controls: props.controls,\n    // gl: gl,\n    setDragging: setDragging,\n    DPR: props.DPR,\n  });\n\n  // https://use-gesture.netlify.app/docs/changelog/#breaking\n  // When adding events directly to the dom element using `domTarget`\n  // you no longer need to clean the effect yourself.\n  // const touchBind =\n  useGesture(gtb.handlers, gtb.config);\n\n  // useEffect(() => {\n  //   touchBind();\n  // }, [touchBind]);\n\n  const [fps, setFps] = useState('');\n\n  return (\n    <SettingsContext.Consumer>\n      {({ settings }) => (\n        <div\n          className=\"renderer\"\n          style={{\n            position: 'relative',\n          }}\n        >\n          <FPSCard fps={fps} show={settings.showFPS} />\n          <WebGLCanvas\n            id=\"mandelbrot-canvas\"\n            fragShader={fragShader}\n            DPR={props.DPR}\n            // touchBind={touchBind}\n            u={u}\n            ref={canvasRef}\n            // glRef={gl}\n            fps={setFps}\n            dragging={dragging}\n          />\n          <MinimapViewer\n            id=\"mandelbrot-minimap-canvas\"\n            fragShader={miniFragShader}\n            DPR={props.DPR}\n            u={u}\n            canvasRef={miniCanvasRef}\n            // glRef={miniGl}\n            show={settings.showMinimap}\n            onClick={() => setControlZoom({ z: 1 })}\n          />\n        </div>\n      )}\n    </SettingsContext.Consumer>\n  );\n}\n","import { Button, ButtonGroup, makeStyles } from '@material-ui/core';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport React from 'react';\nimport { ViewChangerProps } from '../../common/render';\n\nconst useStyles = makeStyles((theme) => ({\n  // root: {\n  //   transform: 'translateX(-50%) translateY(-50%)',\n  // },\n  changeViewButton: {\n    padding: 4,\n  },\n}));\n\nexport default function ViewChanger({\n  vertical,\n  changeFunc,\n}: ViewChangerProps): JSX.Element {\n  // const { vertical, changeFunc, debug, percentFlex } = props;\n  const classes = useStyles();\n\n  const mButton = (\n    <Button\n      className={classes.changeViewButton}\n      onClick={() => {\n        // console.log('julia (up / right)');\n        // always show mandelbrot\n        // show julia if (self) hidden, otherwise hide it\n        // [true, true] => [true, false]\n        // [false, true] => [true, true]\n        changeFunc(([m, j]: boolean[]) => [true, !m]);\n      }}\n    >\n      {vertical ? <KeyboardArrowUpIcon /> : <KeyboardArrowRightIcon />}\n    </Button>\n  );\n  const jButton = (\n    <Button\n      className={classes.changeViewButton}\n      onClick={() => {\n        // console.log('mandelbrot (down / left)');\n        // [true, true] => [false, true]\n        // [true, false] => [true, true]\n        changeFunc(([m, j]: boolean[]) => [!j, true]);\n      }}\n    >\n      {vertical ? <KeyboardArrowDownIcon /> : <KeyboardArrowLeftIcon />}\n    </Button>\n  );\n\n  return (\n    <ButtonGroup\n      orientation={vertical ? 'vertical' : 'horizontal'}\n      variant=\"contained\"\n      style={{\n        transform:\n          // `rotate(${props.vertical ? 0 : 90}deg)` +\n          vertical ? `translate(-100%, -50%)` : `translate(-50%, 0%)`, // original\n        // vertical ? `translate(-125%, -50%)` : `translate(-50%, 25%)`,\n        // vertical ? `translate(-150%, -50%)` : `translate(-50%, 50%)`,\n        marginTop: vertical ? 0 : 12,\n        // clear the settings button\n        marginLeft: vertical ? -72 : 0,\n        // zIndex: 1,\n        // margin: vertical ? `auto auto auto -${margin}px` : `${margin}px auto auto auto`,\n        // width: 50,\n        // height: 50,\n      }}\n    >\n      {vertical ? mButton : jButton}\n      {vertical ? jButton : mButton}\n      {/* <Button>\n        <animated.div>{percentFlex.m.interpolate((x: number) => x)}</animated.div>\n        <animated.div>{percentFlex.j.interpolate((x: number) => x)}</animated.div>\n      </Button> */}\n    </ButtonGroup>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config): void {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister(): void {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","// https://felixgerschau.com/create-a-pwa-update-notification-with-create-react-app/\n\nimport { Button, Snackbar } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport React, { FC, useEffect } from 'react';\nimport * as serviceWorker from '../serviceWorkerRegistration';\n// service worker config has been removed from CRA / react-scripts 4.0\n// https://github.com/facebook/create-react-app/issues/9776#issuecomment-728945921\n// files sourced from https://github.com/cra-template/pwa/tree/master/packages/cra-template-pwa-typescript\n\nconst ServiceWorkerWrapper: FC = () => {\n  const [showReload, setShowReload] = React.useState(false);\n  const [waitingWorker, setWaitingWorker] = React.useState<ServiceWorker | null>(null);\n\n  const onSWUpdate = (registration: ServiceWorkerRegistration) => {\n    console.log('Out of date version detected! Triggering snackbar.');\n    setShowReload(true);\n    setWaitingWorker(registration.waiting);\n  };\n\n  // could show an info about being cached for offline\n  const onSWRegisterSuccess = () => {\n    return;\n  };\n\n  useEffect(() => {\n    console.log('Registering Service Worker for update detection...');\n    serviceWorker.register({ onUpdate: onSWUpdate, onSuccess: onSWRegisterSuccess });\n  }, []);\n\n  const reloadPage = () => {\n    // optional chaining was not working here...\n    // https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html\n    waitingWorker && waitingWorker.postMessage({ type: 'SKIP_WAITING' });\n    setShowReload(false);\n    // reload(b: Boolean) is deprecated\n    window.location.reload();\n  };\n\n  return (\n    <Snackbar open={showReload} anchorOrigin={{ vertical: 'top', horizontal: 'center' }}>\n      <Alert\n        severity=\"info\"\n        action={\n          <Button color=\"inherit\" variant=\"outlined\" size=\"small\" onClick={reloadPage}>\n            Update\n          </Button>\n        }\n      >\n        A new version is available!\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default ServiceWorkerWrapper;\n","import {\r\n  Backdrop,\r\n  Divider,\r\n  Fab,\r\n  FormControlLabel,\r\n  FormControlLabelProps,\r\n  FormGroup,\r\n  Grid,\r\n  makeStyles,\r\n  Popover,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport { SvgIconComponent } from '@material-ui/icons';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport MyLocationIcon from '@material-ui/icons/MyLocation';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport React, { useState } from 'react';\r\nimport { SettingsMenuProps } from '../../common/settings';\r\n// react-colorful requires style imports\r\n// import 'react-colorful/dist/index.css';\r\nimport '../../css/react-colorful.css';\r\nimport { contrastBoxShadow } from '../../theme/theme';\r\nimport { SettingsContext } from './SettingsContext';\r\nimport { getSettingsWidgetsGrouping } from './SettingsDefinitions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: 'absolute',\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(2),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    zIndex: 2,\r\n  },\r\n  settingsButton: {\r\n    boxShadow: contrastBoxShadow,\r\n  },\r\n  popoverCardGrid: {\r\n    paddingTop: 24,\r\n    paddingBottom: 16,\r\n    paddingRight: 24,\r\n    paddingLeft: 24,\r\n  },\r\n  sliderControl: {\r\n    width: 30,\r\n  },\r\n}));\r\n\r\nconst GroupDivider = () => <Divider style={{ marginTop: 8, marginBottom: 12 }} />;\r\nconst GroupTitle = (props: { title: string; icon: SvgIconComponent }) => (\r\n  <Grid container alignItems=\"center\" justify=\"center\" spacing={1}>\r\n    {/* remove margin to center based only on text and not icon (not ideal) */}\r\n    <Grid item style={{ marginLeft: -24 }}>\r\n      <props.icon color=\"primary\" fontSize=\"small\" />\r\n    </Grid>\r\n    <Grid item>\r\n      <Typography color=\"primary\" variant=\"button\" style={{ fontSize: 14 }}>\r\n        {props.title}\r\n      </Typography>\r\n    </Grid>\r\n  </Grid>\r\n);\r\n\r\nexport default function SettingsMenu(props: SettingsMenuProps): JSX.Element {\r\n  const classes = useStyles();\r\n\r\n  const [anchorEl, setAnchorEl] = useState<EventTarget & HTMLButtonElement>();\r\n\r\n  const ResetButton = () => (\r\n    <Button\r\n      startIcon={<MyLocationIcon />}\r\n      color=\"secondary\"\r\n      aria-controls=\"reset\"\r\n      onClick={() => {\r\n        props.reset();\r\n      }}\r\n    >\r\n      Reset\r\n    </Button>\r\n  );\r\n  const AboutButton = () => (\r\n    <Button\r\n      startIcon={<InfoIcon />}\r\n      color=\"primary\"\r\n      aria-controls=\"about\"\r\n      onClick={() => {\r\n        props.toggleInfo();\r\n        setAnchorEl(undefined);\r\n      }}\r\n    >\r\n      About\r\n    </Button>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Fab\r\n        aria-controls=\"menu\"\r\n        aria-haspopup=\"true\"\r\n        aria-label=\"settings\"\r\n        size=\"small\"\r\n        onClick={(e) => setAnchorEl(e.currentTarget)}\r\n        // style={{\r\n        //   boxShadow: heavyBoxShadow,\r\n        // }}\r\n        className={classes.settingsButton}\r\n      >\r\n        <SettingsIcon />\r\n      </Fab>\r\n      <Backdrop open={Boolean(anchorEl)}>\r\n        <Popover\r\n          id=\"menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          open={Boolean(anchorEl)}\r\n          onClose={() => setAnchorEl(undefined)}\r\n          anchorOrigin={{\r\n            horizontal: 'right',\r\n            vertical: 'bottom',\r\n          }}\r\n          transformOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'right',\r\n          }}\r\n        >\r\n          <Grid container direction=\"column\" className={classes.popoverCardGrid}>\r\n            <Grid item container alignItems=\"center\" justify=\"space-around\">\r\n              <Grid item>\r\n                <Typography variant=\"h1\" style={{ fontSize: 20 }}>\r\n                  Configuration\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n            <SettingsContext.Consumer>\r\n              {({ setSettings, settingsWidgets }) =>\r\n                getSettingsWidgetsGrouping(settingsWidgets).map((g) => (\r\n                  <Grid item key={g.name}>\r\n                    <GroupDivider />\r\n                    <GroupTitle icon={g.icon} title={g.name} />\r\n                    <FormGroup>\r\n                      {Object.entries(g.widgets).map(([k, widget]) => (\r\n                        <FormControlLabel\r\n                          key={`${k}-control`}\r\n                          style={{ userSelect: 'none' }}\r\n                          {...(widget as FormControlLabelProps)}\r\n                          // ...e catches all event arguments\r\n                          onChange={(...e) => {\r\n                            // the value is the last element of the \"e\" array\r\n                            // https://stackoverflow.com/a/12099341/9184658\r\n                            // > using destructuring is nice too:\r\n                            // > const [lastItem] = arr.slice(-1)\r\n                            // >  diachedelic Mar 11 '19 at 6:30\r\n                            const [val] = e.slice(-1);\r\n                            console.debug(`${k} ->`, val);\r\n                            // TODO: updating state like this seems to be very slow\r\n                            // either have individual useState pairs, or use a Map?\r\n                            setSettings((prevState) => ({\r\n                              ...prevState,\r\n                              [k]: val,\r\n                            }));\r\n                          }}\r\n                        />\r\n                      ))}\r\n                    </FormGroup>\r\n                  </Grid>\r\n                ))\r\n              }\r\n            </SettingsContext.Consumer>\r\n\r\n            <GroupDivider />\r\n\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"space-between\"\r\n              alignItems=\"stretch\"\r\n              spacing={1}\r\n            >\r\n              <Grid item>\r\n                <ResetButton />\r\n              </Grid>\r\n              <Grid item>\r\n                <AboutButton />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Popover>\r\n      </Backdrop>\r\n    </div>\r\n  );\r\n}\r\n","import { Grid, ThemeProvider } from '@material-ui/core';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useSpring } from 'react-spring';\nimport './App.css';\nimport {\n  currentLocation,\n  useHashLocation,\n  useHashNavigator,\n  ViewerURLManager,\n} from './common/routing';\nimport {\n  ViewerControlSprings,\n  ViewerLocation,\n  ViewerRotationControl,\n  ViewerXYControl,\n  ViewerZoomControl,\n} from './common/types';\nimport { useWindowSize, warpToPoint } from './common/utils';\nimport { springsConfigs, viewerOrigin } from './common/values';\nimport CoordinateInterface from './components/info/CoordinateInterface';\nimport InfoDialog from './components/info/InfoDialog';\nimport JuliaRenderer from './components/render/JuliaRenderer';\n// import 'typeface-roboto';\nimport MandelbrotRenderer from './components/render/MandelbrotRenderer';\nimport ViewChanger from './components/render/ViewChanger';\nimport ServiceWorkerWrapper from './components/ServiceWorkerWrapper';\nimport SettingsProvider, { SettingsContext } from './components/settings/SettingsContext';\nimport SettingsMenu from './components/settings/SettingsMenu';\nimport theme from './theme/theme';\n\nfunction App(): JSX.Element {\n  const size = useWindowSize();\n  const DPR = window.devicePixelRatio;\n\n  // if app is started with a hash location, assume\n  // it should be the starting position\n  // detects hash updates\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [loc, navigate] = useHashLocation();\n\n  // non-reloading hash update\n  const updateBrowserHash = useHashNavigator();\n\n  const urlManager = useMemo(() => new ViewerURLManager(), []);\n\n  // generic callback\n  const updateHash = useCallback(\n    (name: string, v: Partial<ViewerLocation>) => {\n      urlManager.updateViewer(name, v);\n      const u = urlManager.asFullHashURL();\n      // console.debug(`Updated # for ${name} => ${u}`);\n      updateBrowserHash(u);\n    },\n    [updateBrowserHash, urlManager],\n  );\n\n  // callbacks for springs to update url when animation stops\n  const updateM = (v: Partial<ViewerLocation>) => updateHash('m', v);\n  const updateJ = (v: Partial<ViewerLocation>) => updateHash('j', v);\n\n  const mandelbrotControls: ViewerControlSprings = {\n    xyCtrl: useSpring<ViewerXYControl>(() => ({\n      xy: viewerOrigin.xy,\n      config: springsConfigs.default.xy,\n      onRest: updateM,\n    })),\n\n    zoomCtrl: useSpring<ViewerZoomControl>(() => ({\n      z: viewerOrigin.z,\n      minZoom: 0.5,\n      maxZoom: 100000,\n      config: springsConfigs.default.zoom,\n      onRest: updateM,\n    })),\n\n    rotCtrl: useSpring<ViewerRotationControl>(() => ({\n      theta: viewerOrigin.theta, // all angles in rad\n      config: springsConfigs.default.rot,\n      onRest: updateM,\n    })),\n  };\n\n  const juliaControls: ViewerControlSprings = {\n    xyCtrl: useSpring<ViewerXYControl>(() => ({\n      xy: viewerOrigin.xy,\n      config: springsConfigs.default.xy,\n      onRest: updateJ,\n    })),\n\n    zoomCtrl: useSpring<ViewerZoomControl>(() => ({\n      z: viewerOrigin.z,\n      minZoom: 0.5,\n      maxZoom: 2000,\n      config: springsConfigs.default.zoom,\n      onRest: updateJ,\n    })),\n\n    rotCtrl: useSpring<ViewerRotationControl>(() => ({\n      theta: viewerOrigin.theta, // all angles in rad\n      config: springsConfigs.default.rot,\n      onRest: updateJ,\n    })),\n  };\n\n  useEffect(() => {\n    // viewer should update if user goes back / forward on the page\n    // parse current location after user change\n    urlManager.updateFromURL();\n    console.log(`Warping to requested url => ${currentLocation()}`);\n\n    // warp to the newly parsed locations\n    warpToPoint(mandelbrotControls, urlManager.vs['m'].v);\n    warpToPoint(juliaControls, urlManager.vs['j'].v);\n    // this update process should only trigger when the hash location changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loc]);\n\n  const reset = () => {\n    warpToPoint(mandelbrotControls, viewerOrigin);\n    warpToPoint(juliaControls, viewerOrigin);\n  };\n\n  const [showInfo, setShowInfo] = useState(false);\n\n  const toggleInfo = () => setShowInfo((i) => !i);\n\n  // [showMandelbrot, showJulia]\n  const [[showMandelbrot, showJulia], setViewerState] = useState<[boolean, boolean]>([\n    true,\n    true,\n  ]);\n  // const [showMandelbrot, setShowMandelbrot] = useState(true);\n  // const [showJulia, setShowJulia] = useState(true);\n  // const [showMandelbrot, showJulia] = viewerState;\n\n  // Wrap the Typography component with animated first\n  // const AnimatedTypography = animated(Typography)\n  // <AnimatedTypography></AnimatedTypography>\n  // const AnimatedGrid = animated(Grid);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <ServiceWorkerWrapper />\n      <SettingsProvider>\n        <Grid container>\n          <SettingsContext.Consumer>\n            {({ settings }) => {\n              const currentDPR = settings.useDPR ? DPR : 1;\n              const vertical = size.w < size.h;\n              return (\n                // JSX expressions must have one parent element\n                <Grid\n                  item\n                  container\n                  direction={vertical ? 'column-reverse' : 'row'}\n                  alignItems={vertical ? 'flex-end' : 'flex-start'}\n                  justify=\"center\"\n                  className=\"fullSize\"\n                  style={{\n                    position: 'absolute',\n                  }}\n                >\n                  <CoordinateInterface\n                    show={settings.showCoordinates}\n                    mandelbrot={mandelbrotControls}\n                  />\n                  <Grid\n                    item\n                    xs\n                    className=\"renderer\"\n                    style={{\n                      // flex-grow takes up more space in a ratio format\n                      flexGrow: showMandelbrot ? 1 : 0, // percentFlex.m.interpolate((x) => x),\n                    }}\n                  >\n                    <MandelbrotRenderer\n                      controls={mandelbrotControls}\n                      DPR={currentDPR}\n                      {...settings}\n                    />\n                  </Grid>\n\n                  <Grid item style={{ width: 0, height: 0, zIndex: 1 }}>\n                    <ViewChanger vertical={vertical} changeFunc={setViewerState} />\n                  </Grid>\n\n                  <Grid\n                    item\n                    xs\n                    className=\"renderer\"\n                    style={{\n                      // flex-grow takes up more space in a ratio format\n                      flexGrow: showJulia ? 1 : 0, // percentFlex.j.interpolate((x) => x),\n                    }}\n                  >\n                    <JuliaRenderer\n                      c={mandelbrotControls.xyCtrl[0].xy}\n                      controls={juliaControls}\n                      DPR={currentDPR}\n                      {...settings}\n                    />\n                  </Grid>\n                </Grid>\n              );\n            }}\n          </SettingsContext.Consumer>\n\n          <SettingsMenu reset={() => reset()} toggleInfo={() => toggleInfo()} />\n\n          <InfoDialog ctrl={[showInfo, setShowInfo]} />\n\n          {/* <Button\n            style={{ height: 30 }}\n            onClick={() => {\n              if (navigator.share) {\n                navigator\n                  .share({\n                    title: 'Mandelbrot Maps',\n                    text: 'Check out this cool fractal!',\n                    url: 'https://jmaio.github.io/mandelbrot-maps/',\n                  })\n                  .then(() => console.log('Successful share'))\n                  .catch((error) => console.log('Error sharing', error));\n              } else {\n                alert('share unavailable');\n              }\n            }}\n          >\n            Share\n          </Button> */}\n        </Grid>\n      </SettingsProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n// import * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// The default service worker is not used: it's overridden instead\r\n// by the ServiceWorkerWrapper (ServiceWorkerWrapper.tsx)\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.register();\r\n"],"sourceRoot":""}