{"version":3,"sources":["components/info/CoordinatesCard.tsx","components/info/ChangeCoordinatesCard.tsx","components/info/InfoDialog.jsx","shaders/newSmoothJuliaShader.js","theme/theme.tsx","shaders/fullVertexShader.js","components/render/WebGLCanvas.tsx","components/render/MinimapViewer.tsx","components/utils.js","components/settings/SettingsDefinitions.tsx","components/settings/SettingsContext.tsx","components/render/JuliaRenderer.jsx","shaders/newSmoothMandelbrotShader.js","components/info/FPSCard.tsx","components/render/MandelbrotRenderer.jsx","components/settings/SettingsMenu.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["CoordinatesCard","props","Grow","in","show","Card","style","width","zIndex","position","padding","marginBottom","Typography","align","fontFamily","fontSize","span","mandelbrot","interpolate","x","y","screenScaleMultiplier","toFixed","ChangeCoordinatesCard","useState","setX","setY","display","flexDirection","Box","TextField","size","onChange","e","Number","target","value","Button","marginTop","onClick","xyCtrl","xy","vScale","config","resetPosSpringConfig","DialogTitle","withStyles","theme","root","margin","spacing","image","marginRight","height","closeButton","marginLeft","color","palette","grey","children","classes","onClose","other","disableTypography","className","src","alt","variant","IconButton","aria-label","DialogContent","MuiDialogContent","DialogActions","MuiDialogActions","Alert","elevation","InfoDialog","ctrl","open","setOpen","snackBarOpen","setSnackBarOpen","handleClose","clientData","window","jscd","Dialog","aria-labelledby","maxWidth","id","dividers","gutterBottom","Link","href","Divider","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","colSpan","TableBody","Object","entries","map","k","v","key","String","data","navigator","clipboard","writeText","prompt","writeToClipboard","JSON","stringify","startIcon","Snackbar","autoHideDuration","severity","autoFocus","surveyLink","newSmoothJuliaShader","maxI","AA","B","createMuiTheme","MuiSwitch","MuiButton","primary","main","colors","blue","secondary","red","fullscreenVertexArray","numComponents","WebGLCanvas","React","forwardRef","refAny","ref","gl","glRef","renderRequestRef","useRef","bufferInfo","programInfo","u","setFps","fps","zoom","mini","getValue","currZoom","dpr","useDPR","devicePixelRatio","useEffect","current","getContext","twgl","fragShader","then","frames","elapsedTime","render","useCallback","time","viewport","canvas","uniforms","resolution","u_zoom","u_c","undefined","c","u_xy","u_maxI","useProgram","program","requestAnimationFrame","cancelAnimationFrame","cursor","dragging","displayName","MinimapViewer","canvasRef","rest","ButtonBase","left","bottom","borderRadius","boxShadow","overflow","genericTouchBind","domTarget","posControl","zoomControl","setDragging","setControlXY","minZoom","maxZoom","setControlZoom","binds","onDragStart","event","preventDefault","onPinchStart","onPinch","vd","vdva","down","dx","delta","origin","first","memo","z","newZ","newZclamp","_","clamp","immediate","velocity","onWheel","my","movement","active","onDrag","direction","pinching","realZoom","plotMovement","relMove","relDir","addV","decay","eventOptions","passive","capture","settingsWidgets","settings","showMinimap","label","checked","control","Switch","showCrosshair","showCoordinates","labelPlacement","Slider","min","max","step","valueLabelDisplay","marks","useAA","showFPS","defaultSettings","SettingsContext","createContext","setSettings","SettingsProvider","Provider","JuliaRenderer","miniCanvasRef","miniGl","screenmult","controls","zoomCtrl","miniFragShader","gtb","touchBind","useGesture","Consumer","makeCrosshair","stroke","radius","standardCrosshair","miniCrosshair","newSmoothMandelbrotShader","crosshairShape","FPSCard","top","userSelect","div","MandelbrotRenderer","useStyles","makeStyles","right","button","sliderControl","GroupDivider","GroupTitle","title","SettingsMenu","anchorEl","setAnchorEl","ResetButton","aria-controls","reset","AboutButton","toggleInfo","Fab","aria-haspopup","currentTarget","Backdrop","Boolean","Popover","keepMounted","anchorOrigin","horizontal","vertical","transformOrigin","Grid","container","paddingLeft","paddingRight","paddingTop","paddingBottom","item","alignItems","justify","name","widgets","getSettingsWidgetsGrouping","g","FormGroup","widget","FormControlLabel","val","console","log","prevState","defaultSpringConfig","mass","tension","friction","resetZoomSpringConfig","App","isClient","getSize","innerWidth","innerHeight","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","useWindowSize","startPos","mandelbrotControls","useSpring","rotCtrl","theta","juliaControls","showInfo","setShowInfo","ThemeProvider","xs","isLocalhost","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","ReactDOM","document","getElementById","URL","process","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"oaAyCeA,EApCS,SAACC,GACvB,OACE,kBAACC,EAAA,EAAD,CAAMC,GAAIF,EAAMG,MACd,kBAACC,EAAA,EAAD,CACEC,MAAO,CACLC,MAAO,OACPC,OAAQ,KACRC,SAAU,WACVC,QAAS,WACTC,aAAc,IAKhB,kBAACC,EAAA,EAAD,CAAYC,MAAM,QAAQP,MAAO,CAAEQ,WAAY,YAAaC,SAAU,WAGpE,kBAAC,IAASC,KAAV,KACGf,EAAMgB,WAAWC,aAEhB,SAACC,EAAGC,GAAJ,iBAAcD,EAAIlB,EAAMoB,uBAAuBC,QAAQ,GAAvD,YAGJ,6BACA,kBAAC,IAASN,KAAV,KACGf,EAAMgB,WAAWC,aAEhB,SAACC,EAAGC,GAAJ,iBAAcA,EAAInB,EAAMoB,uBAAuBC,QAAQ,GAAvD,gB,2BCuBCC,EAjDe,SAACtB,GAAoD,IAAD,EAC9DuB,mBAAS,GADqD,mBACzEL,EADyE,KACtEM,EADsE,OAE9DD,mBAAS,GAFqD,mBAEzEJ,EAFyE,KAEtEM,EAFsE,KAWhF,OACE,kBAACxB,EAAA,EAAD,CAAMC,GAAIF,EAAMG,MACd,kBAACC,EAAA,EAAD,CACEC,MAAO,CACLC,MAAO,OACPC,OAAQ,KACRC,SAAU,WACVC,QAAS,EACTiB,QAAS,OACTC,cAAe,WAKjB,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,KAAK,QACLzB,MAAO,CAAEC,MAAO,KAChByB,SAAU,SAACC,GAAD,OAAOR,EAAKS,OAAOD,EAAEE,OAAOC,WACrC,IALL,OAQA,kBAACP,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,KAAK,QACLzB,MAAO,CAAEC,MAAO,KAChByB,SAAU,SAACC,GAAD,OAAOP,EAAKQ,OAAOD,EAAEE,OAAOC,WACrC,IALL,OAQA,kBAACC,EAAA,EAAD,CAAQ/B,MAAO,CAAEgC,UAAW,IAAMC,QAAS,WApC/CtC,EAAMgB,WAAWuB,OAAO,GAAG,CACzBC,GAAIC,iBAAO,EAAIzC,EAAMoB,sBAAuB,CAACF,EAAGC,IAChDuB,OAAQC,OAkCN,S,6NCSFC,EAAcC,aAvBL,SAACC,GAAD,MAAY,CACzBC,KAAM,CACJC,OAAQ,EACRvC,QAASqC,EAAMG,QAAQ,GACvBvB,QAAS,OACTC,cAAe,OAGjBuB,MAAO,CACLb,UAAW,OACX3B,aAAc,OACdyC,YAAa,EACbC,OAAQ,IAEVC,YAAa,CAIXC,WAAY,OACZC,MAAOT,EAAMU,QAAQC,KAAK,SAIVZ,EAAmB,SAAC7C,GAAW,IACzC0D,EAAyC1D,EAAzC0D,SAAUC,EAA+B3D,EAA/B2D,QAASC,EAAsB5D,EAAtB4D,QAAYC,EADS,YACC7D,EADD,kCAEhD,OACE,kBAAC,IAAD,eAAgB8D,mBAAiB,EAACC,UAAWJ,EAAQZ,MAAUc,GAC7D,yBAAKG,IAAI,eAAeC,IAAI,uBAAuBF,UAAWJ,EAAQT,QACtE,kBAACvC,EAAA,EAAD,CACEuD,QAAQ,KACR7D,MAAO,CAAES,SAAU,GAAIuB,UAAW,OAAQ3B,aAAc,SAEvDgD,GAEFE,EACC,kBAACO,EAAA,EAAD,CAAYC,aAAW,QAAQL,UAAWJ,EAAQN,YAAaf,QAASsB,GACtE,kBAAC,IAAD,OAEA,SAKJS,EAAgBxB,aAAW,SAACC,GAAD,MAAY,CAC3CC,KAAM,CACJtC,QAASqC,EAAMG,QAAQ,OAFLJ,CAIlByB,KAEEC,EAAgB1B,aAAW,SAACC,GAAD,MAAY,CAC3CC,KAAM,CACJC,OAAQ,EACRvC,QAASqC,EAAMG,QAAQ,OAHLJ,CAKlB2B,KAEJ,SAASC,EAAMzE,GACb,OAAO,kBAAC,IAAD,eAAU0E,UAAW,EAAGR,QAAQ,UAAalE,IAGvC,SAAS2E,EAAW3E,GAAQ,IAAD,cAChBA,EAAM4E,KADU,GACjCC,EADiC,KAC3BC,EAD2B,OAEAvD,oBAAS,GAFT,mBAEjCwD,EAFiC,KAEnBC,EAFmB,KAIlCC,EAAc,kBAAMH,GAAQ,IAG5BI,EAAaC,OAAOC,MAAQ,GAWlC,OACE,kBAACC,EAAA,EAAD,CACEzB,QAASqB,EACTK,kBAAgB,0BAChBT,KAAMA,EACNU,SAAS,MAGT,kBAAC,EAAD,CAAaC,GAAG,0BAA0B5B,QAASqB,GAAnD,mBAGA,kBAAC,EAAD,CAAeQ,UAAQ,EAACpF,MAAO,CAAEkF,SAAU,MACzC,kBAAC5E,EAAA,EAAD,CAAY+E,cAAY,GAAxB,mFAGA,kBAAC/E,EAAA,EAAD,CAAY+E,cAAY,GAAxB,eACe,IACb,kBAACC,EAAA,EAAD,CAAMC,KAAK,2BAA2B1D,OAAO,UAA7C,aAEQ,IAJV,sHAQA,kBAACvB,EAAA,EAAD,CAAY+E,cAAY,GAAxB,8JAEkF,IAChF,kBAACC,EAAA,EAAD,CAAMC,KAAK,mCAAmC1D,OAAO,UAArD,6BAIF,kBAACvB,EAAA,EAAD,CAAY+E,cAAY,GAAxB,MACM,IACJ,kBAACC,EAAA,EAAD,CACEC,KAAK,mEACL1D,OAAO,UAFT,oCAKQ,IAPV,0DAUA,kBAACvB,EAAA,EAAD,CAAY+E,cAAY,GAAxB,0CAC0C,IACxC,kBAACC,EAAA,EAAD,CAAMC,KAAK,yCAAX,uBAFF,MAEmF,IACjF,kBAACD,EAAA,EAAD,CAAMC,KAAK,yBAAyB1D,OAAO,UAA3C,gBAHF,KAYA,kBAAC2D,EAAA,EAAD,CAASxF,MAAO,CAAEgC,UAAW,GAAI3B,aAAc,MAE/C,kBAACkB,EAAA,EAAD,CAAKvB,MAAO,CAAEqB,QAAS,SACrB,kBAACoE,EAAA,EAAD,CACEC,UAAWC,IACX3F,MAAO,CAAEC,MAAO,OAAQ0C,OAAQ,OAAQuC,SAAU,MAElD,kBAACU,EAAA,EAAD,CAAOnE,KAAK,QAAQsC,aAAW,iBAC7B,kBAAC8B,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAWxF,MAAM,SAASyF,QAAS,EAAGnC,QAAQ,QAA9C,uBAKJ,kBAACoC,EAAA,EAAD,KACGC,OAAOC,QAAQtB,GAAYuB,KAAI,mCAAEC,EAAF,KAAKC,EAAL,YAC9B,kBAACR,EAAA,EAAD,CAAUS,IAAKF,GACb,kBAACN,EAAA,EAAD,KAAYM,GACZ,kBAACN,EAAA,EAAD,CAAWxF,MAAM,QAAQP,MAAO,CAAEQ,WAAY,cAC3CgG,OAAOF,YAStB,kBAACd,EAAA,EAAD,CAASxF,MAAO,CAAEgC,UAAW,GAAI3B,aAAc,MAE/C,kBAACkB,EAAA,EAAD,CAAKvB,MAAO,CAAEqB,QAAS,SACrB,kBAACf,EAAA,EAAD,CAAYuD,QAAQ,WAAWtD,MAAM,SAASP,MAAO,CAAE2C,OAAQ,SAA/D,SAEE,kBAACrC,EAAA,EAAD,CAAYN,MAAO,CAAEQ,WAAY,cAtK1B,+BA4Kb,kBAAC,EAAD,KACE,kBAACuB,EAAA,EAAD,CACEE,QAAS,YAvGM,SAACwE,GACtB,IACEC,UAAUC,UAAUC,UAAUH,GAC9B9B,GAAgB,GAChB,MAAOhD,GACPmD,OAAO+B,OAAO,2DAA4DJ,IAmGpEK,CAAiBC,KAAKC,UAAUnC,KAElC3B,MAAM,UACNW,QAAQ,WACRoD,UAAW,kBAAC,IAAD,OANb,QAUA,kBAACC,EAAA,EAAD,CACE1C,KAAME,EACNyC,iBAAkB,IAClB5D,QAAS,kBAAMoB,GAAgB,KAE/B,kBAAC,EAAD,CAAOpB,QAAS,kBAAMoB,GAAgB,IAAQyC,SAAS,QAAvD,8BAIF,kBAACrF,EAAA,EAAD,CACEsF,WAAS,EACT9B,KAAM+B,IACNzF,OAAO,SACPqB,MAAM,UACNW,QAAQ,WACRoD,UAAW,kBAAC,IAAD,OANb,c,YC7IOM,EAhFc,SAAC,GAAD,QAC3BC,YAD2B,MACpB,IADoB,MAE3BC,UAF2B,MAEtB,EAFsB,MAG3BC,SAH2B,MAGvB,GAHuB,iCAUhBD,EAVgB,0BAWdD,EAXc,uBAYjBE,EAAE1G,QAAQ,GAZO,s+C,2BCAvByB,GAAQkF,YAAe,CAC3BhI,MAAO,CAELiI,UAAW,CAET1E,MAAO,WAET2E,UAAW,CACThE,QAAS,aAGbV,QAAS,CACP2E,QAAS,CACPC,KAAMC,KAAOC,KAAK,MAEpBC,UAAW,CACTH,KAAMC,KAAOG,IAAI,SAOR1F,M,kBCbF2F,GAAwB,CACnCjI,SAAU,CACRkI,cAAe,EACf5B,KAAM,EAAE,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,KCN9D6B,GAAcC,IAAMC,YAGxB,SAAC7I,EAAO8I,GAYR,IAAMC,EAAMD,EAGNE,EAAKhJ,EAAMiJ,MACXC,EAAmBC,mBACnBC,EAAaD,mBACbE,EAAcF,mBAEdG,EAAItJ,EAAMsJ,EACVC,EAASvJ,EAAMwJ,IAGfC,EAAOzJ,EAAM0J,KAAO,kBAAM,GAAM,kBAAM1J,EAAMsJ,EAAEG,KAAKE,YACnDC,EAAWT,iBAAOM,KAElBI,EAAM7J,EAAM8J,OAAS3E,OAAO4E,iBAAmB,EAOrDC,qBAAU,WAGRhB,EAAGiB,QAAWlB,EAAkDkB,QAAQC,WACtE,SAGFd,EAAWa,QAAUE,KACnBnB,EAAGiB,QACHxB,MAED,CAACO,EAAID,IAERiB,qBAAU,WACRJ,EAASK,QAAUjK,EAAMsJ,EAAEG,KAAKE,aAC/B,CAAC3J,EAAMsJ,IAGVU,qBAAU,WACRX,EAAYY,QAAUE,KAAuBnB,EAAGiB,QAAS,CDjEhC,8ECmEvBjK,EAAMoK,eAEP,CAACpB,EAAIhJ,EAAMoK,aAEd,IAAMC,EAAOlB,iBAAO,GACdmB,EAASnB,iBAAO,GAChBoB,EAAcpB,iBAAO,GAKrBqB,EAASC,uBACb,SAACC,GACCP,KACGpB,EAAkDkB,QACnDJ,GAEFb,EAAGiB,QAAQU,SAAS,EAAG,EAAG3B,EAAGiB,QAAQW,OAAOtK,MAAO0I,EAAGiB,QAAQW,OAAOxH,QAErE,IAAMyH,EAAW,CACfC,WAAY,CAAC9B,EAAGiB,QAAQW,OAAOtK,MAAO0I,EAAGiB,QAAQW,OAAOxH,QACxD2H,OAAQtB,IACRuB,SACUC,IAAR3B,EAAE4B,EAAkB,EAAI5B,EAAE4B,EAAEvB,WAAWlD,KAAI,SAACvF,GAAD,OAAOA,EAAIoI,EAAElI,yBAC1D+J,KAAM1I,iBAAO6G,EAAElI,sBAAuBkI,EAAE9G,GAAGmH,YAC3CyB,OAAQ9B,EAAEzB,MAGZmB,EAAGiB,QAAQoB,WAAYhC,EAAYY,QAA6BqB,SAChEnB,KACEnB,EAAGiB,QACHZ,EAAYY,QACZb,EAAWa,SAEbE,KAAiBd,EAAYY,QAA6BY,GAC1DV,KAAoBnB,EAAGiB,QAASb,EAAWa,cAG5BgB,IAAX1B,IACFe,EAAOL,UACPM,EAAYN,SAAWS,EAAOL,EAAKJ,QACnCI,EAAKJ,QAAUS,EAGXH,EAAYN,SApCL,MAsCTV,GAAQe,EAAOL,SAtCN,IAsC4BM,EAAYN,UAAU5I,QAAQ,IACnEiJ,EAAOL,QAAU,EACjBM,EAAYN,SAxCH,MAqDbf,EAAiBe,QAAUsB,sBAAsBf,KAEnD,CAACxB,EAAIM,EAAGG,EAAMI,EAAKN,EAvDJ,IAuDsBR,IASvC,OALAiB,qBAAU,WAER,OADAd,EAAiBe,QAAUsB,sBAAsBf,GAC1C,kBAAMgB,qBAAqBtC,EAAiBe,YAClD,CAACO,IAGF,kBAAC,IAASI,OAAV,CACE7G,UAAU,WACVgF,IAAKD,EACLzI,MAAK,cAEHoL,OAAQzL,EAAM0L,SAAW,WAAa,QAEnC1L,EAAMK,YAMjBsI,GAAYgD,YAAc,cAEXhD,UCrGAiD,GA5CO,SAAC5L,GAA4C,IACzD6L,EAAsC7L,EAAtC6L,UAAWvJ,EAA2BtC,EAA3BsC,QAASnC,EAAkBH,EAAlBG,KAAS2L,EAD2B,YAClB9L,EADkB,gCAEhE,OACE,kBAACC,EAAA,EAAD,CAAMC,GAAIC,GACR,kBAAC4L,EAAA,EAAD,CACE1L,MAAO,CACLG,SAAU,WAEVD,OAAQ,KACRyC,OAAQ,SACRgJ,KAAM,EACNC,OAAQ,EAER7I,OAjBO,IAkBP9C,MAlBO,IAmBP4L,aAjBW,EAmBXC,UHJqB,sCGKrBC,SAAU,UAIZ9J,QAASA,GAKT,kBAAC,GAAD,eACEoH,MAAM,EACNX,IAAK8C,GACDC,EAHN,CAMEzL,MAAO,CACL6L,aApCS,EAsCTT,OAAQ,iB,qBCTb,SAASY,GAAT,GAOH,IANFC,EAMC,EANDA,UACAC,EAKC,EALDA,WACAC,EAIC,EAJDA,YACApL,EAGC,EAHDA,sBACA4H,EAEC,EAFDA,GACAyD,EACC,EADDA,YACC,cAC8BF,EAD9B,GACQ/J,EADR,KACQA,GAAMkK,EADd,mBAEoDF,EAFpD,UAEQ/C,EAFR,EAEQA,KAAMkD,EAFd,EAEcA,QAASC,EAFvB,EAEuBA,QAAWC,EAFlC,KAGD,MAAO,CACLC,MAAO,CAGLC,YAAa,qBAAGC,MAAkBC,kBAClCC,aAAc,qBAAGF,MAAkBC,kBAEnCE,QAAS,YAQF,IAPEC,EAOH,cAPJC,KAOI,MANJC,EAMI,EANJA,KACQC,EAKJ,cALJC,MAKI,MAJJC,EAII,EAJJA,OACAC,EAGI,EAHJA,MAGI,IAFJC,YAEI,MAFG,CAACnL,EAAGmH,YAEP,MADJiE,SACI,MADAnE,EAAKE,WACL,EACJ,GAAI+D,EAEF,MAAO,CAFE,YACCC,EADD,MAEEF,GAIb,IAAII,EAAOD,GAAK,EAAS,KAALL,GAChBO,EAAYC,KAAEC,MAAMH,EAAMlB,EAAQhD,WAAYiD,EAAQjD,YAoB1D,OAdAkD,EAAe,CACbpD,KAAMqE,EACNG,UAAWX,EACX5K,OAAQ,CAENwL,SAAU,GAAKd,KASZO,GAGTQ,QAAS,YAAwD,IAAxCC,EAAuC,cAApDC,SAAoD,MAAlCC,EAAkC,EAAlCA,OAAkC,IAA1BV,SAA0B,MAAtBnE,EAAKE,WAAiB,EAE1DkE,EAAOD,GAAK,EAAIQ,GAAMA,EAAK,EAAI,KAAO,OAU1C,OARAvB,EAAe,CACbpD,KAAMsE,KAAEC,MAAMH,EAAMlB,EAAQhD,WAAYiD,EAAQjD,YAChDsE,UAAWK,EACX5L,OAAQ,KAKHkL,GAGTW,OAAQ,YAOD,IANLjB,EAMI,EANJA,KACAe,EAKI,EALJA,SACAH,EAII,EAJJA,SACAM,EAGI,EAHJA,UACAC,EAEI,EAFJA,SAEI,IADJd,YACI,MADGnL,EAAGmH,WACN,EAEJ,IAAI8E,EAAJ,CAMA,IAAIC,EAAW1F,EAAGiB,QAAQW,OAAOxH,OAASqG,EAAKE,WAAavI,EAExDuN,EAAelM,kBAAQ,EAAIiM,EAAUL,GAErCO,EAAU,CAACD,EAAa,IAAKA,EAAa,IAC1CE,EAAS,CAACL,EAAU,IAAKA,EAAU,IAgBvC,OAdA9B,EAAa,CACXlK,GAAIsM,YAAKnB,EAAMiB,GACfX,UAAWX,EACX5K,OAAQ,CACNwL,SAAUzL,kBAAQyL,EAAWQ,EAAUG,GACvCE,OAAO,KAKXtC,EAAYa,GAILK,KAGXjL,OAAQ,CACNsM,aAAc,CAAEC,SAAS,EAAOC,SAAS,GACzC5C,UAAWA,I,wBCnIJ6C,GAAkB,SAC7BC,GAD6B,MAEL,CACxBC,YAAa,CACX3I,EAAG,cACH4I,MAAO,UACPC,QAASH,EAASC,YAClBG,QAAS,kBAACC,GAAA,EAAD,OAEXC,cAAe,CACbhJ,EAAG,gBACH4I,MAAO,YACPC,QAASH,EAASM,cAClBF,QAAS,kBAACC,GAAA,EAAD,OAEXE,gBAAiB,CACfjJ,EAAG,kBACH4I,MAAO,mBACPC,QAASH,EAASO,gBAClBH,QAAS,kBAACC,GAAA,EAAD,OAEX5H,KAAM,CACJnB,EAAG,OACH4I,MAAO,aACPnN,MAAOiN,EAASvH,KAChB+H,eAAgB,MAChBvP,MAAO,CACLiD,WAAY,EACZH,YAAa,GAEfqM,QACE,kBAACK,GAAA,EAAD,CACEC,IAAK,GACLC,IAAK,IACLC,KAAM,GACNC,kBAAkB,OAClBC,MAAO,CACL,CAAE/N,MAAO,GAAImN,MAAO,IACpB,CAAEnN,MAAO,IAAKmN,MAAO,KACrB,CAAEnN,MAAO,IAAKmN,MAAO,KACrB,CAAEnN,MAAO,IAAKmN,MAAO,KACrB,CAAEnN,MAAO,IAAMmN,MAAO,SAK9BxF,OAAQ,CACNpD,EAAG,SAQH4I,MAAM,oBAAD,QAAuBnK,OAAO4E,iBAAiB1I,QAAQ,GAAvD,KACLkO,QAASH,EAAStF,OAClB0F,QAAS,kBAACC,GAAA,EAAD,OAEXU,MAAO,CACLzJ,EAAG,QACH4I,MAAM,uBACNC,QAASH,EAASe,MAClBX,QAAS,kBAACC,GAAA,EAAD,OAEXW,QAAS,CACP1J,EAAG,UACH4I,MAAM,WACNC,QAASH,EAASgB,QAClBZ,QAAS,kBAACC,GAAA,EAAD,SA0BEY,GAzGgB,CAC7BhB,aAAa,EACbK,eAAe,EACfC,iBAAiB,EACjB9H,KAAM,IACNuI,SAAS,EACTtG,QAAQ,EACRqG,OAAO,GCXIG,GAAkBC,wBAAmC,CAEhEnB,SAAUiB,GAEVG,YAAa,aAGbrB,gBAAiBA,GAAgBkB,MAuBpBI,GAlBiB,SAAC,GAAwD,IAAtD/M,EAAqD,EAArDA,SAAqD,EAGtDnC,mBAAkC8O,IAHoB,mBAG/EjB,EAH+E,KAGrEoB,EAHqE,KAKtF,OACE,kBAACF,GAAgBI,SAAjB,CACEvO,MAAO,CACLiN,WACAoB,cACArB,gBAAiBA,GAAgBC,KAGlC1L,ICrBQ,SAASiN,GAAc3Q,GAEpC,IAAM6L,EAAY1C,mBACZyH,EAAgBzH,mBAEhBH,EAAKG,mBACL0H,EAAS1H,mBAKT/H,EAAwBpB,EAAM8Q,WAG3BtO,EAdkC,YAc1BxC,EAAM+Q,SAASxO,OAdW,MAclCC,GAdkC,cAgBRxC,EAAM+Q,SAASC,SAhBP,GAgBlCvH,EAhBkC,KAgBlCA,KAAQoD,EAhB0B,KAiBrChF,EAAO7H,EAAM6H,KACbC,EAAK9H,EAAMmQ,MAAQ,EAAI,EAEvB/F,EAAaxC,EAAqB,CACtCC,KAAMA,EACNC,GAAIA,IAIAmJ,EAAiBrJ,EAAqB,CAC1CC,KAAMA,EACNC,GAAI,IA5BqC,EAgCXvG,oBAAS,GAhCE,mBAgCpCmK,EAhCoC,KAgC1Be,EAhC0B,KAkCvCyE,EAAM7E,GAAiB,CACzBC,UAAWT,EACXU,WAAYvM,EAAM+Q,SAASxO,OAC3BiK,YAAaxM,EAAM+Q,SAASC,SAC5B5P,sBACEA,GAAyBpB,EAAM8J,OAAS3E,OAAO4E,iBAAmB,GACpEf,GAAIA,EACJyD,YAAaA,IAGX0E,EAAYC,YAAWF,EAAIpE,MAAOoE,EAAIxO,QAI1C,OAFAsH,oBAAUmH,EAAW,CAACA,IAGpB,kBAACb,GAAgBe,SAAjB,MACG,gBAAGjC,EAAH,EAAGA,SAAH,OACC,yBACErL,UAAU,WACV1D,MAAO,CACLG,SAAU,aAGZ,kBAAC,GAAD,CACEgF,GAAG,QACH4E,WAAYA,EACZN,OAAQ9J,EAAM8J,OACdR,EAAG,CACDG,KAAMA,EACNjH,GAAIA,EACJ0I,EAAGlL,EAAMkL,EACTrD,KAAMA,EACNzG,sBAAuBA,GAEzB2H,IAAK8C,EACL5C,MAAOD,EACP0C,SAAUA,IAEZ,kBAAC,GAAD,CACEtB,WAAY6G,EACZnH,OAAQsF,EAAStF,OACjBR,EAAG,CACDG,KAAMA,EACNjH,GAAIA,EACJqF,KAAMA,EACNqD,EAAGlL,EAAMkL,EACT9J,sBAAuBA,GAEzByK,UAAW+E,EACX3H,MAAO4H,EACPvO,QAAS,kBAAMuK,EAAe,CAAEpD,KAAM,KACtCtJ,KAAMiP,EAASC,kBC3F3B,IAAMiC,GAAgB,SAACC,EAAQC,GAAT,MAAqB,CACzCD,SACAC,WAGWC,GAAoBH,GAAc,EAAG,KACrCI,GAAgBJ,GAAc,EAAG,IAyH/BK,GAvHmB,SAAC,GAO7B,IAAD,IAND9J,YAMC,MANM,IAMN,MANWC,UAMX,MANgB,EAMhB,MANmBC,SAMnB,MANuB,GAMvB,EALH2H,IAKG,yDAJHkC,EAIG,uDAJc,CACfL,OAAQ,EACRC,OAAQ,KAGV,MAAM,oZAAN,OAWe1J,EAXf,8BAYiBD,EAZjB,2BAacE,EAAE1G,QAAQ,GAbxB,2EAgB2BqO,EAhB3B,sCAiByBkC,EAAeL,OAAOlQ,QAAQ,GAjBvD,sCAkByBuQ,EAAeJ,OAAOnQ,QAAQ,GAlBvD,uyFCQawQ,GArBC,SAAC7R,GAAD,OACd,kBAACC,EAAA,EAAD,CAAMC,GAAIF,EAAMG,MACd,kBAACC,EAAA,EAAD,CACEC,MAAO,CACLG,SAAU,QACVsR,IAAK,EACL9F,KAAM,EACNvL,QAAS,WACTuC,OAAQ,EACRnC,WAAY,YACZqL,aAAc,IACdpL,SAAU,SACVP,OAAQ,KACRwR,WAAY,SAGd,kBAAC,IAASC,IAAV,KAAehS,EAAMwJ,QCTZ,SAASyI,GAAmBjS,GAEzC,IAAM6L,EAAY1C,mBACZyH,EAAgBzH,mBAEhBH,EAAKG,mBACL0H,EAAS1H,mBAKT/H,EAAwBpB,EAAM8Q,WAQ3BtO,EAnBuC,YAmB/BxC,EAAM+Q,SAASxO,OAnBgB,MAmBvCC,GAnBuC,cAqBbxC,EAAM+Q,SAASC,SArBF,GAqBvCvH,EArBuC,KAqBvCA,KAAQoD,EArB+B,KAsB1ChF,EAAO7H,EAAM6H,KACbC,EAAK9H,EAAMmQ,MAAQ,EAAI,EAEvB/F,EAAauH,GACjB,CACE9J,KAAMA,EACNC,GAAIA,GAEN9H,EAAM0P,cACN+B,IAEIR,EAAiBU,GACrB,CACE9J,KAAMA,EACNC,GAAI,GAEN9H,EAAM0P,cACNgC,IAvC8C,EA0ChBnQ,oBAAS,GA1CO,mBA0CzCmK,EA1CyC,KA0C/Be,EA1C+B,KA4C1CyE,EAAM7E,GAAiB,CAC3BC,UAAWT,EACXU,WAAYvM,EAAM+Q,SAASxO,OAC3BiK,YAAaxM,EAAM+Q,SAASC,SAC5B5P,sBACEA,GAAyBpB,EAAM8J,OAAS3E,OAAO4E,iBAAmB,GACpEf,GAAIA,EACJyD,YAAaA,IAGT0E,EAAYC,YAAWF,EAAIpE,MAAOoE,EAAIxO,QAE5CsH,oBAAUmH,EAAW,CAACA,IAxD0B,MA0D1B5P,mBAAS,GA1DiB,mBA0DzCiI,EA1DyC,KA0DpCD,EA1DoC,KA4DhD,OACE,kBAAC+G,GAAgBe,SAAjB,MACG,gBAAGjC,EAAH,EAAGA,SAAH,OACC,yBACErL,UAAU,WACV1D,MAAO,CACLG,SAAU,aAGZ,kBAAC,GAAD,CAASgJ,IAAKA,EAAKrJ,KAAMiP,EAASgB,UAElC,kBAAC,GAAD,CACE5K,GAAG,aACH4E,WAAYA,EACZN,OAAQsF,EAAStF,OAEjBR,EAAG,CACDG,KAAMA,EACNjH,GAAIA,EACJqF,KAAMA,EACNzG,sBAAuBA,GAEzB2H,IAAK8C,EACL5C,MAAOD,EACPQ,IAAKD,EACLmC,SAAUA,IAGZ,kBAAC,GAAD,CACEtB,WAAY6G,EACZnH,OAAQsF,EAAStF,OACjBR,EAAG,CACDG,KAAMA,EACNjH,GAAIA,EACJqF,KAAMA,EACNzG,sBAAuBA,GAEzByK,UAAW+E,EACX3H,MAAO4H,EACP1Q,KAAMiP,EAASC,YACf/M,QAAS,kBAAMuK,EAAe,CAAEpD,KAAM,W,wIC5F5CyI,GAAYC,cAAW,SAACrP,GAAD,MAAY,CACvCC,KAAM,CACJvC,SAAU,WACVyL,OAAQnJ,EAAMG,QAAQ,GACtBmP,MAAOtP,EAAMG,QAAQ,GACrBvB,QAAS,OACTC,cAAe,SACfpB,OAAQ,GAEV8R,OAAQ,CACN5R,QAAS,WACT4B,UAAW,IAEbiQ,cAAe,CACbhS,MAAO,QAILiS,GAAe,kBAAM,kBAAC1M,EAAA,EAAD,CAASxF,MAAO,CAAEgC,UAAW,GAAI3B,aAAc,MACpE8R,GAAa,SAACxS,GAAD,OACjB,kBAACW,EAAA,EAAD,CAAYuD,QAAQ,WAAW7D,MAAO,CAAES,SAAU,GAAIJ,aAAc,IACjEV,EAAMyS,QAII,SAASC,GAAa1S,GACnC,IAAM2D,EAAUuO,KAD0D,EAG1C3Q,qBAH0C,mBAGnEoR,EAHmE,KAGzDC,EAHyD,KAwBpEC,EAAc,kBAClB,kBAACzQ,EAAA,EAAD,CACEkF,UAAW,kBAAC,KAAD,MACX/D,MAAM,YACNuP,gBAAc,QACdxQ,QAAS,WACPtC,EAAM+S,SAERhP,UAAWJ,EAAQ0O,QAPrB,UAYIW,EAAc,kBAClB,kBAAC5Q,EAAA,EAAD,CACEkF,UAAW,kBAAC,KAAD,MACX/D,MAAM,UACNuP,gBAAc,QACdxQ,QAAS,WACPtC,EAAMiT,aACNL,OAAY3H,IAEdlH,UAAWJ,EAAQ0O,QARrB,UAcF,OACE,yBAAKtO,UAAWJ,EAAQZ,MACtB,kBAACmQ,GAAA,EAAD,CACEJ,gBAAc,OACdK,gBAAc,OACd/O,aAAW,WACXtC,KAAK,QACLQ,QAAS,SAACN,GAAD,OAAO4Q,EAAY5Q,EAAEoR,iBAG9B,kBAAC,KAAD,OAEF,kBAACC,GAAA,EAAD,CAAUxO,KAAMyO,QAAQX,IACtB,kBAACY,GAAA,EAAD,CACE/N,GAAG,OACHmN,SAAUA,EACVa,aAAW,EACX3O,KAAMyO,QAAQX,GACd/O,QAAS,kBAAMgP,OAAY3H,IAC3BwI,aAAc,CACZC,WAAY,QACZC,SAAU,UAEZC,gBAAiB,CACfD,SAAU,SACVD,WAAY,UAGd,kBAACG,EAAA,EAAD,CACEC,WAAS,EACTtF,UAAU,SACVnO,MAAO,CACL0T,YAAa,QACbC,aAAc,QACdC,WAAY,MACZC,cAAe,QAGjB,kBAACL,EAAA,EAAD,CAAMM,MAAI,EAACL,WAAS,EAACM,WAAW,SAASC,QAAQ,gBAC/C,kBAACR,EAAA,EAAD,CAAMM,MAAI,GACR,kBAACxT,EAAA,EAAD,CAAYuD,QAAQ,KAAK7D,MAAO,CAAES,SAAU,GAAIL,QAAS,KAAzD,mBAoBJ,kBAAC6P,GAAgBe,SAAjB,MACG,gBAAGb,EAAH,EAAGA,YAAH,ONnE2B,SACxCrB,GADwC,MAEX,CAC7B,CACEmF,KAAM,YACNC,QAAS,CACPpF,EAAgBE,YAChBF,EAAgBO,cAChBP,EAAgBQ,kBAGpB,CACE2E,KAAM,WACNC,QAAS,CACPpF,EAAgBtH,KAChBsH,EAAgBrF,OAChBqF,EAAgBgB,MAChBhB,EAAgBiB,WMmDNoE,CADD,EAAgBrF,iBAC6B1I,KAAI,SAACgO,GAAD,OAC9C,kBAACZ,EAAA,EAAD,CAAMM,MAAI,EAACvN,IAAK6N,EAAEH,MAChB,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAY7B,MAAOgC,EAAEH,OACrB,kBAACI,GAAA,EAAD,KACGD,EAAEF,QAAQ9N,KAAI,SAACkO,GAAD,OACb,kBAACC,GAAA,EAAD,eACEhO,IAAG,UAAK+N,EAAOrF,MAAZ,YACHjP,MAAO,CAAE0R,WAAY,SACjB4C,EAHN,CAIE5S,SAAU,SAACC,EAAG6S,GACZC,QAAQC,IAAR,UAAeJ,EAAOjO,EAAtB,eAA8BmO,IAC9BrE,GAAY,SAACwE,GAAD,oBAAC,gBACRA,GADO,mBAETL,EAAOjO,EAAImO,sBAW9B,kBAAC,GAAD,MAEA,kBAAChB,EAAA,EAAD,CAAMC,WAAS,EAACtF,UAAU,MAAM6F,QAAQ,gBAAgBD,WAAW,WACjE,kBAACP,EAAA,EAAD,CAAMM,MAAI,GACR,kBAACtB,EAAD,OAEF,kBAACgB,EAAA,EAAD,CAAMM,MAAI,GACR,kBAACnB,EAAD,YC1KT,IAAMiC,GAAsB,CAAEC,KAAM,EAAGC,QAAS,IAAKC,SAAU,KAEzDzS,GAAuB,CAAEuS,KAAM,EAAGC,QAAS,IAAKC,SAAU,IAC1DC,GAAwB,CAAEH,KAAM,EAAGC,QAAS,IAAKC,SAAU,IAmKzDE,OAjKf,WACE,IAAMxT,ERrBD,WACL,IAAMyT,EAA6B,kBAAXpQ,OAElBqQ,EAAU/K,uBACd,iBAAO,CACLnK,MAAOiV,EAAWpQ,OAAOsQ,gBAAaxK,EACtC7H,OAAQmS,EAAWpQ,OAAOuQ,iBAAczK,KAE1C,CAACsK,IAR2B,EAWMhU,mBAASiU,GAXf,mBAWvBG,EAXuB,KAWXC,EAXW,KA2B9B,OAdA5L,qBAAU,WACR,IAAKuL,EAEH,OAAO,aAGT,SAASM,IACPD,EAAcJ,KAIhB,OADArQ,OAAO2Q,iBAAiB,SAAUD,GAC3B,kBAAM1Q,OAAO4Q,oBAAoB,SAAUF,MACjD,CAACL,EAASD,IAENI,EQNMK,GAOPC,EAA6B,EAAE,SAAW,UAU1CC,EAAqB,CACzB3T,OAAQ4T,aAA2B,iBAAO,CACxC3T,GAAIC,iBAAO,EAde,KAcYwT,GACtCvT,OAAQuS,OAGVmB,QAASD,aAAiC,iBAAO,CAC/CE,MAAO,EAGP3T,OAAQuS,OAGVjE,SAAUmF,aAA6B,iBAAO,CAC5C1M,KArBc,GAwBdkD,QAAS,GACTC,QAAS,IAETlK,OAAQ,CAAEwS,KAAM,EAAGC,QAAS,IAAKC,SAAU,SAOzCkB,EAAgB,CACpB/T,OAAQ4T,aAA2B,iBAAO,CACxC3T,GAAI,CAAC,EAAG,GACRE,OAAQuS,OAGVmB,QAASD,aAAiC,iBAAO,CAC/CE,MAAO,EAGP3T,OAAQuS,OAGVjE,SAAUmF,aAA6B,iBAAO,CAC5C1M,KAAM,GAGNkD,QAAS,GACTC,QAAS,IAETlK,OAAQ,CAAEwS,KAAM,EAAGC,QAAS,IAAKC,SAAU,SAjErB,EAyFM7T,oBAAS,GAzFf,mBAyFnBgV,EAzFmB,KAyFTC,EAzFS,KA+F1B,OACE,kBAACC,EAAA,EAAD,CAAe3T,MAAOA,IACpB,kBAAC,GAAD,KACE,kBAAC+Q,EAAA,EAAD,CAAMC,WAAS,GACb,kBAACxD,GAAgBe,SAAjB,MACG,gBAAGjC,EAAH,EAAGA,SAAH,OACC,kBAACyE,EAAA,EAAD,CACEM,MAAI,EACJL,WAAS,EACTtF,WACG1M,EAAKxB,OAAS,IAAMwB,EAAKsB,QAAU,GAAK,iBAAmB,MAE9DiR,QAAQ,SACRtQ,UAAU,WACV1D,MAAO,CACLG,SAAU,aAGZ,yBACEH,MAAO,CACLG,SAAU,WACV4R,MAAO,EACPN,IAAK,EACL9O,OAAQ,GACR1C,MAAO,SAGT,kBAAC,EAAD,CACEH,KAAMiP,EAASO,gBACf3O,WAAYkV,EAAmB3T,OAAO,GAAGC,GACzCpB,sBAvHY,OAyHd,kBAAC,EAAD,CACEjB,KAAMiP,EAASO,gBACf3O,WAAYkV,EACZ9U,sBA5HY,QA+HhB,kBAACyS,EAAA,EAAD,CAAMM,MAAI,EAACuC,IAAE,EAAC3S,UAAU,YACtB,kBAACkO,GAAD,eACElB,SAAUmF,EACVpF,WAlIY,MAmIR1B,KAGR,kBAACyE,EAAA,EAAD,CAAMM,MAAI,EAACuC,IAAE,EAAC3S,UAAU,YACtB,kBAAC4M,GAAD,eACEzF,EAAGgL,EAAmB3T,OAAO,GAAGC,GAChCuO,SAAUuF,EACVxF,WA1IY,MA2IR1B,SAOd,kBAACsD,GAAD,CAAcK,MAAO,kBAlF3BmD,EAAmB3T,OAAO,GAAG,CAC3BC,GAAI,CAAC,EAAG,GACRE,OAAQC,KAEVuT,EAAmBlF,SAAS,GAAG,CAC7BvH,KAAM,EACN/G,OAAQ2S,KAGViB,EAAc/T,OAAO,GAAG,CACtBC,GAAI,CAAC,EAAG,GACRE,OAAQC,UAEV2T,EAActF,SAAS,GAAG,CACxBvH,KAAM,EACN/G,OAAQ2S,MAmEgCpC,WAAY,kBA7D/BuD,GAAaD,MA+D9B,kBAAC5R,EAAD,CAAYC,KAAM,CAAC2R,EAAUC,SCxKjCG,GAAcrD,QACW,cAA7BnO,OAAOyR,SAASC,UAEe,UAA7B1R,OAAOyR,SAASC,UAEhB1R,OAAOyR,SAASC,SAASC,MACvB,2DAsCN,SAASC,GAAgBC,EAAOtU,GAC9BqE,UAAUkQ,cACPC,SAASF,GACT3M,MAAK,SAAA8M,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBG,QACfzQ,UAAUkQ,cAAcQ,YAI1B3C,QAAQC,IACN,iHAKErS,GAAUA,EAAOgV,UACnBhV,EAAOgV,SAASP,KAMlBrC,QAAQC,IAAI,sCAGRrS,GAAUA,EAAOiV,WACnBjV,EAAOiV,UAAUR,WAO5BS,OAAM,SAAAC,GACL/C,QAAQ+C,MAAM,4CAA6CA,MC1FjEC,IAAStN,OAAO,kBAAC,GAAD,MAASuN,SAASC,eAAe,SDgB1C,SAAkBtV,GACvB,GAA6C,kBAAmBqE,UAAW,CAGzE,GADkB,IAAIkR,IAAIC,mBAAwB/S,OAAOyR,SAAShR,MACpD6H,SAAWtI,OAAOyR,SAASnJ,OAIvC,OAGFtI,OAAO2Q,iBAAiB,QAAQ,WAC9B,IAAMkB,EAAK,UAAMkB,mBAAN,sBAEPvB,KAgEV,SAAiCK,EAAOtU,GAEtCyV,MAAMnB,GACH3M,MAAK,SAAA+N,GAEJ,IAAMC,EAAcD,EAASE,QAAQC,IAAI,gBAEnB,MAApBH,EAASI,QACO,MAAfH,IAA8D,IAAvCA,EAAYI,QAAQ,cAG5C1R,UAAUkQ,cAAcyB,MAAMrO,MAAK,SAAA8M,GACjCA,EAAawB,aAAatO,MAAK,WAC7BlF,OAAOyR,SAASgC,eAKpB7B,GAAgBC,EAAOtU,MAG1BkV,OAAM,WACL9C,QAAQC,IACN,oEArFA8D,CAAwB7B,EAAOtU,GAI/BqE,UAAUkQ,cAAcyB,MAAMrO,MAAK,WACjCyK,QAAQC,IACN,iHAMJgC,GAAgBC,EAAOtU,OCvC/BuU,K","file":"static/js/main.7bd6f42c.chunk.js","sourcesContent":["import { Card, Grow, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { animated } from 'react-spring';\nimport { CoordinatesCardProps } from '../../common/info';\n\nconst CoordinatesCard = (props: CoordinatesCardProps): JSX.Element => {\n  return (\n    <Grow in={props.show}>\n      <Card\n        style={{\n          width: 'auto',\n          zIndex: 1300,\n          position: 'relative',\n          padding: '6px 12px',\n          marginBottom: 8,\n          // display: props.show ? 'block' : 'none',\n          // borderRadius: 100,\n        }}\n      >\n        <Typography align=\"right\" style={{ fontFamily: 'monospace', fontSize: '1.2rem' }}>\n          {/* https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple */}\n          {/* https://www.typescriptlang.org/docs/handbook/2/objects.html#tuple-types */}\n          <animated.span>\n            {props.mandelbrot.interpolate(\n              // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\n              (x, y) => `${(x * props.screenScaleMultiplier).toFixed(7)} : x`,\n            )}\n          </animated.span>\n          <br />\n          <animated.span>\n            {props.mandelbrot.interpolate(\n              // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\n              (x, y) => `${(y * props.screenScaleMultiplier).toFixed(7)} : y`,\n            )}\n          </animated.span>\n        </Typography>\n      </Card>\n    </Grow>\n  );\n};\n\nexport default CoordinatesCard;\n\n// <Card\n//   style={{\n//     width: 'auto',\n//     position: 'absolute',\n//     zIndex: 2,\n//     right: 0,\n//     top: 0,\n//     margin: 20,\n//     padding: 8,\n//     display: settings.coords[0] ? 'block' : 'none',\n//     // borderRadius: 100,\n//   }}\n// >\n//   <Typography align=\"right\">\n//     {/* https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple */}\n//     {/* https://www.typescriptlang.org/docs/handbook/2/objects.html#tuple-types */}\n//     <animated.span>\n//       {mandelbrotControls.xyCtrl[0].xy.interpolate(\n//         // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\n//         (x, y) => `${(x * screenScaleMultiplier).toFixed(7)} : x`,\n//       )}\n//     </animated.span>\n//     <br />\n//     <animated.span>\n//       {mandelbrotControls.xyCtrl[0].xy.interpolate(\n//         // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\n//         (x, y) => `${(y * screenScaleMultiplier).toFixed(7)} : y`,\n//       )}\n//     </animated.span>\n//   </Typography>\n// </Card>;\n","import { Box, Button, Card, Grow, TextField } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { ChangeCoordinatesCardProps } from '../../common/info';\nimport { resetPosSpringConfig } from '../../App';\nimport { vScale } from 'vec-la-fp';\n\nconst ChangeCoordinatesCard = (props: ChangeCoordinatesCardProps): JSX.Element => {\n  const [x, setX] = useState(0);\n  const [y, setY] = useState(0);\n\n  const go = () => {\n    props.mandelbrot.xyCtrl[1]({\n      xy: vScale(1 / props.screenScaleMultiplier, [x, y]),\n      config: resetPosSpringConfig,\n    });\n  };\n\n  return (\n    <Grow in={props.show}>\n      <Card\n        style={{\n          width: 'auto',\n          zIndex: 1300,\n          position: 'relative',\n          padding: 8,\n          display: 'flex',\n          flexDirection: 'column',\n          // display: props.show ? 'block' : 'none',\n          // borderRadius: 100,\n        }}\n      >\n        <Box>\n          <TextField\n            size=\"small\"\n            style={{ width: 100 }}\n            onChange={(e) => setX(Number(e.target.value))}\n          />{' '}\n          : x\n        </Box>\n        <Box>\n          <TextField\n            size=\"small\"\n            style={{ width: 100 }}\n            onChange={(e) => setY(Number(e.target.value))}\n          />{' '}\n          : y\n        </Box>\n        <Button style={{ marginTop: 12 }} onClick={() => go()}>\n          Go\n        </Button>\n      </Card>\n    </Grow>\n  );\n};\n\nexport default ChangeCoordinatesCard;\n","import React, { useState } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport {\n  Link,\n  TableContainer,\n  Table,\n  Paper,\n  TableRow,\n  TableCell,\n  TableHead,\n  TableBody,\n  Box,\n  Divider,\n  Snackbar,\n} from '@material-ui/core';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { surveyLink } from '../surveyLink.json';\n\n// for evaluating build time\nimport preval from 'preval.macro';\n\nconst dateTimeStamp = preval`module.exports = new Date();`;\n\nconst styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'row',\n    // align: \"middle\",\n  },\n  image: {\n    marginTop: 'auto',\n    marginBottom: 'auto',\n    marginRight: 8,\n    height: 50,\n  },\n  closeButton: {\n    // position: 'absolute',\n    // right: theme.spacing(1),\n    // top: theme.spacing(1),\n    marginLeft: 'auto',\n    color: theme.palette.grey[500],\n  },\n});\n\nconst DialogTitle = withStyles(styles)((props) => {\n  const { children, classes, onClose, ...other } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\n      <img src=\"logo-512.png\" alt=\"Mandelbrot Maps logo\" className={classes.image} />\n      <Typography\n        variant=\"h1\"\n        style={{ fontSize: 24, marginTop: 'auto', marginBottom: 'auto' }}\n      >\n        {children}\n      </Typography>\n      {onClose ? (\n        <IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  );\n});\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(3),\n  },\n}))(MuiDialogContent);\n\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions);\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default function InfoDialog(props) {\n  const [open, setOpen] = props.ctrl;\n  const [snackBarOpen, setSnackBarOpen] = useState(false);\n\n  const handleClose = () => setOpen(false);\n\n  // guard against null / undefined window\n  const clientData = window.jscd || {};\n\n  let writeToClipboard = (data) => {\n    try {\n      navigator.clipboard.writeText(data);\n      setSnackBarOpen(true);\n    } catch (e) {\n      window.prompt('Auto copy to clipboard failed, copy manually from below:', data);\n    }\n  };\n\n  return (\n    <Dialog\n      onClose={handleClose}\n      aria-labelledby=\"customized-dialog-title\"\n      open={open}\n      maxWidth=\"md\"\n    >\n      {/* <div style={{ maxWidth: 700 }}> */}\n      <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n        Mandelbrot Maps\n      </DialogTitle>\n      <DialogContent dividers style={{ maxWidth: 700 }}>\n        <Typography gutterBottom>\n          Mandelbrot Maps is an interactive fractal explorer built using React and WebGL.\n        </Typography>\n        <Typography gutterBottom>\n          Developed by{' '}\n          <Link href=\"https://jmaio.github.io/\" target=\"_blank\">\n            Joao Maio\n          </Link>{' '}\n          in 2019/2020 as part of an Honours Project at The University of Edinburgh, under\n          the supervision of Philip Wadler.\n        </Typography>\n        <Typography gutterBottom>\n          The project was simultaneously undertaken by Freddie Bawden, also under the\n          supervision of Philip Wadler. Freddie's version of the project is available at:{' '}\n          <Link href=\"http://mmaps.freddiejbawden.com/\" target=\"_blank\">\n            mmaps.freddiejbawden.com\n          </Link>\n        </Typography>\n        <Typography gutterBottom>\n          The{' '}\n          <Link\n            href=\"https://homepages.inf.ed.ac.uk/wadler/mandelbrot-maps/index.html\"\n            target=\"_blank\"\n          >\n            original Mandelbrot Maps project\n          </Link>{' '}\n          was developed by Iain Parris in 2008 as a Java Applet.\n        </Typography>\n        <Typography gutterBottom>\n          Mandelbrot set shader code adapted from{' '}\n          <Link href=\"https://www.shadertoy.com/view/4df3Rn\">Mandelbrot - smooth</Link> by{' '}\n          <Link href=\"http://iquilezles.org/\" target=\"_blank\">\n            Inigo Quilez\n          </Link>\n          .\n        </Typography>\n        {/* <Typography>\n            &copy; Joao Maio 2020\n          </Typography> */}\n\n        <Divider style={{ marginTop: 30, marginBottom: 30 }} />\n\n        <Box style={{ display: 'flex' }}>\n          <TableContainer\n            component={Paper}\n            style={{ width: 'auto', margin: 'auto', maxWidth: 460 }}\n          >\n            <Table size=\"small\" aria-label=\"a dense table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"center\" colSpan={2} variant=\"head\">\n                    Device properties\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {Object.entries(clientData).map(([k, v]) => (\n                  <TableRow key={k}>\n                    <TableCell>{k}</TableCell>\n                    <TableCell align=\"right\" style={{ fontFamily: 'monospace' }}>\n                      {String(v)}\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n\n        <Divider style={{ marginTop: 30, marginBottom: 30 }} />\n\n        <Box style={{ display: 'flex' }}>\n          <Typography variant=\"overline\" align=\"center\" style={{ margin: 'auto' }}>\n            Build:\n            <Typography style={{ fontFamily: 'monospace' }}>{dateTimeStamp}</Typography>\n            {/* {console.log(new Date(dateTimeStamp).toLocaleString('en-GB', { timeZone: 'UTC' }))} */}\n          </Typography>\n        </Box>\n      </DialogContent>\n\n      <DialogActions>\n        <Button\n          onClick={() => {\n            writeToClipboard(JSON.stringify(clientData));\n          }}\n          color=\"primary\"\n          variant=\"outlined\"\n          startIcon={<FileCopyIcon />}\n        >\n          Copy\n        </Button>\n        <Snackbar\n          open={snackBarOpen}\n          autoHideDuration={5000}\n          onClose={() => setSnackBarOpen(false)}\n        >\n          <Alert onClose={() => setSnackBarOpen(false)} severity=\"info\">\n            Device properties copied!\n          </Alert>\n        </Snackbar>\n        <Button\n          autoFocus\n          href={surveyLink}\n          target=\"_blank\"\n          color=\"primary\"\n          variant=\"outlined\"\n          startIcon={<LaunchIcon />}\n        >\n          Feedback\n        </Button>\n      </DialogActions>\n      {/* </div> */}\n    </Dialog>\n  );\n}\n","// TODO set max iterations as parameter\n\nconst newSmoothJuliaShader = ({\n  maxI = 300,\n  AA = 1,\n  B = 64,\n  // crosshair = {\n  //     stroke: 0,\n  //     radius: 0\n  // },\n}) => `\n\n#define AA ${AA}\n#define MAXI ${maxI}\n#define B ${B.toFixed(1)}\n\n// set high float precision (lower than this may break colours on mobile)\nprecision highp float;\n\n// need to know the resolution of the canvas\nuniform vec2 resolution;\n\n// properties should be passed as uniforms\nuniform int   u_maxI;\nuniform vec2  u_xy;\nuniform vec2  u_c;\nuniform float u_zoom;\nuniform float u_theta;\n\nfloat julia( vec2 z, vec2 c ) {\n\n  float l = 0.0;\n  for( int i=0; i<MAXI; i++ )\n  {\n      z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c;\n      if( dot(z,z)>(B*B) ) break;\n      l += 1.0;\n  }\n\n  // maxed out iterations\n  if( l>float(MAXI)-1.0 ) return 0.0;\n\n  // equivalent optimized smooth interation count\n  l = l - log2(log2(dot(z,z))) + 4.0;\n\n  return l;\n}\n\nvoid main() {    \n  // set the initial colour to black\n  vec3 col = vec3(0.0);\n\n  // anti-aliasing\n  #if AA>1\n  for( int m=0; m<AA; m++ )\n  for( int n=0; n<AA; n++ )\n  {\n      vec2 p = (2.0*(gl_FragCoord.xy + vec2(float(m), float(n)) / float(AA) ) - resolution.xy)/resolution.y;\n      float w = float(AA*m+n);\n  #else    \n      // adjust pixels to range from [-1, 1]\n      vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\n  #endif\n  \n  // constant \"c\" to add, based on mandelbrot position\n  vec2 c = u_c;\n  vec2 z = u_xy + p/u_zoom;\n\n  float l = julia(z, c);\n  col += 0.5 + 0.5*cos( 3.0 + l*0.15 + vec3(0.0,0.6,1.0));\n\n  // antialiasing\n  #if AA>1\n  }\n  col /= float(AA*AA);\n  #endif\n\n  // Output to screen\n  gl_FragColor = vec4( col, 1.0 );\n}\n`;\n\nexport default newSmoothJuliaShader;\n","import { colors, createMuiTheme } from '@material-ui/core';\n\nconst theme = createMuiTheme({\n  props: {\n    // Name of the component ‚öõÔ∏è\n    MuiSwitch: {\n      // The default props to change\n      color: 'primary', // x, on the whole application üí£!\n    },\n    MuiButton: {\n      variant: 'outlined',\n    },\n  },\n  palette: {\n    primary: {\n      main: colors.blue[700],\n    },\n    secondary: {\n      main: colors.red[700],\n    },\n  },\n});\n\nexport const simpleBoxShadow = '0px 2px 10px 1px rgba(0, 0, 0, 0.4)';\n\nexport default theme;\n","export const fullVertexShader = `\r\nattribute vec4 position;\r\n\r\nvoid main() {\r\n  gl_Position = position;\r\n}\r\n`;\r\n\r\n// This \"position\" array specifies the vertex positions of the element\r\n// to be displayed by the vertex shader. It represents two triangles,\r\n// each filling half of the screen diagonally, and together filling the\r\n// full canvas space to allow the fragment shader to act on the full canvas.\r\nexport const fullscreenVertexArray = {\r\n  position: {\r\n    numComponents: 3,\r\n    data: [-1, -1, 0, 1, -1, 0, -1, 1, 0, -1, 1, 0, 1, -1, 0, 1, 1, 0],\r\n  },\r\n};\r\n","import React, { useCallback, useEffect, useRef } from 'react';\r\nimport { animated } from 'react-spring';\r\nimport * as twgl from 'twgl.js';\r\nimport { vScale } from 'vec-la-fp';\r\nimport { WebGLCanvasProps } from '../../common/render';\r\nimport { fullscreenVertexArray, fullVertexShader } from '../../shaders/fullVertexShader';\r\n\r\n// https://mariusschulz.com/blog/typing-destructured-object-parameters-in-typescript\r\n// https://stackoverflow.com/a/50294843/9184658\r\nconst WebGLCanvas = React.forwardRef<\r\n  HTMLCanvasElement,\r\n  WebGLCanvasProps & { mini: boolean }\r\n>((props, refAny) => {\r\n  // const { mini = false, ...rest } = props;\r\n  // props:\r\n  // id\r\n  // fragShader\r\n  // -- uniforms:\r\n  //    u_zoom\r\n  //    u_pos\r\n  //    u_maxI\r\n  // ref\r\n  // glRef\r\n\r\n  const ref = refAny as React.MutableRefObject<HTMLCanvasElement>;\r\n\r\n  // variables to hold canvas and webgl information\r\n  const gl = props.glRef;\r\n  const renderRequestRef = useRef<number>();\r\n  const bufferInfo = useRef<twgl.BufferInfo>();\r\n  const programInfo = useRef<twgl.ProgramInfo>();\r\n\r\n  const u = props.u;\r\n  const setFps = props.fps;\r\n\r\n  // have a zoom callback\r\n  const zoom = props.mini ? () => 1.0 : () => props.u.zoom.getValue();\r\n  const currZoom = useRef(zoom());\r\n\r\n  const dpr = props.useDPR ? window.devicePixelRatio : 1;\r\n\r\n  // useEffect(() => {\r\n  //   console.log(props.cursor?.getValue());\r\n  // });\r\n\r\n  // initial context-getter\r\n  useEffect(() => {\r\n    // console.log(gl);\r\n    // console.log(gl.current);\r\n    gl.current = (ref as React.MutableRefObject<HTMLCanvasElement>).current.getContext(\r\n      'webgl',\r\n    ) as WebGLRenderingContext;\r\n    // console.log(`got canvas context: ${gl.current}`);\r\n    bufferInfo.current = twgl.createBufferInfoFromArrays(\r\n      gl.current as WebGLRenderingContext,\r\n      fullscreenVertexArray,\r\n    );\r\n  }, [gl, ref]);\r\n\r\n  useEffect(() => {\r\n    currZoom.current = props.u.zoom.getValue();\r\n  }, [props.u]);\r\n\r\n  // re-compile program if shader changes\r\n  useEffect(() => {\r\n    programInfo.current = twgl.createProgramInfo(gl.current, [\r\n      fullVertexShader,\r\n      props.fragShader,\r\n    ]);\r\n  }, [gl, props.fragShader]);\r\n\r\n  const then = useRef(0);\r\n  const frames = useRef(0);\r\n  const elapsedTime = useRef(0);\r\n  // fps update interval\r\n  const interval = 1000;\r\n  // const mult = 1000 / interval;\r\n  // the main render function for WebGL\r\n  const render = useCallback(\r\n    (time) => {\r\n      twgl.resizeCanvasToDisplaySize(\r\n        (ref as React.MutableRefObject<HTMLCanvasElement>).current,\r\n        dpr,\r\n      );\r\n      gl.current.viewport(0, 0, gl.current.canvas.width, gl.current.canvas.height);\r\n\r\n      const uniforms = {\r\n        resolution: [gl.current.canvas.width, gl.current.canvas.height],\r\n        u_zoom: zoom(),\r\n        u_c:\r\n          u.c === undefined ? 0 : u.c.getValue().map((x) => x * u.screenScaleMultiplier),\r\n        u_xy: vScale(u.screenScaleMultiplier, u.xy.getValue()),\r\n        u_maxI: u.maxI,\r\n      };\r\n\r\n      gl.current.useProgram((programInfo.current as twgl.ProgramInfo).program);\r\n      twgl.setBuffersAndAttributes(\r\n        gl.current,\r\n        programInfo.current as twgl.ProgramInfo,\r\n        bufferInfo.current as twgl.BufferInfo,\r\n      );\r\n      twgl.setUniforms(programInfo.current as twgl.ProgramInfo, uniforms);\r\n      twgl.drawBufferInfo(gl.current, bufferInfo.current as twgl.BufferInfo);\r\n\r\n      // calculate fps\r\n      if (setFps !== undefined) {\r\n        frames.current++;\r\n        elapsedTime.current += time - then.current;\r\n        then.current = time;\r\n\r\n        // console.log(elapsedTime.current);\r\n        if (elapsedTime.current >= interval) {\r\n          //multiply with (1000 / elapsed) for accuracy\r\n          setFps((frames.current * (interval / elapsedTime.current)).toFixed(1));\r\n          frames.current = 0;\r\n          elapsedTime.current -= interval;\r\n\r\n          // document.getElementById('test').innerHTML = fps;\r\n        }\r\n        // time *= 0.001;                      // convert to seconds\r\n        // const deltaTime = time - then.current; // compute time since last frame\r\n        // then.current = time;                // remember time for next frame\r\n        // const fs = 1 / deltaTime;           // compute frames per second\r\n        // console.log(fs);\r\n        // (fs.toFixed(1));  // update fps display\r\n      }\r\n\r\n      // The 'state' will always be the initial value here\r\n      renderRequestRef.current = requestAnimationFrame(render);\r\n    },\r\n    [gl, u, zoom, dpr, setFps, interval, ref],\r\n  );\r\n\r\n  //\r\n  useEffect(() => {\r\n    renderRequestRef.current = requestAnimationFrame(render);\r\n    return () => cancelAnimationFrame(renderRequestRef.current as number);\r\n  }, [render]);\r\n\r\n  return (\r\n    <animated.canvas\r\n      className=\"renderer\"\r\n      ref={refAny}\r\n      style={{\r\n        // cursor should show whether the viewer is being grabbed\r\n        cursor: props.dragging ? 'grabbing' : 'grab',\r\n        // adding style allows direct style override\r\n        ...props.style,\r\n      }}\r\n    />\r\n  );\r\n});\r\n\r\nWebGLCanvas.displayName = 'WebGLCanvas';\r\n\r\nexport default WebGLCanvas;\r\n","import { ButtonBase, Grow } from '@material-ui/core';\nimport React from 'react';\nimport { MinimapViewerProps } from '../../common/render';\nimport { simpleBoxShadow } from '../../theme/theme';\nimport WebGLCanvas from './WebGLCanvas';\n\nconst miniSize = 100;\n// TODO: make square with rounded corners?\nconst borderRadius = 8;\n\nconst MinimapViewer = (props: MinimapViewerProps): JSX.Element => {\n  const { canvasRef, onClick, show, ...rest } = props;\n  return (\n    <Grow in={show}>\n      <ButtonBase\n        style={{\n          position: 'absolute',\n          // make minimap stick out through backdrop\n          zIndex: 1300,\n          margin: '0.5rem',\n          left: 0,\n          bottom: 0,\n          // cursor: 'pointer',\n          height: miniSize,\n          width: miniSize,\n          borderRadius: borderRadius,\n          // border: \"1px solid #000\",\n          boxShadow: simpleBoxShadow,\n          overflow: 'hidden',\n          // opacity: zoom.interpolate((z) => _.clamp(z - 1, 0, 1)),\n          // display: zoom.interpolate((z) => (_.clamp(z - 1, 0, 1) === 0 ? 'none' : 'block')),\n        }}\n        onClick={onClick}\n      >\n        {/* <animated.div */}\n        {/* // \n      // > */}\n        <WebGLCanvas\n          mini={true}\n          ref={canvasRef}\n          {...rest}\n          // setting border radius here stops the canvas clickable area from overflowing\n          // outside the div circle, which would make the clickable area a rectangle\n          style={{\n            borderRadius: borderRadius,\n            // cursor should be \"pointer\" (looks clickable) if this is a minimap,\n            cursor: 'pointer',\n          }}\n        />\n        {/* </animated.div> */}\n      </ButtonBase>\n    </Grow>\n  );\n};\nexport default MinimapViewer;\n","import _ from 'lodash';\nimport { useCallback, useEffect, useState } from 'react';\nimport { addV } from 'react-use-gesture';\nimport { vScale } from 'vec-la-fp';\n\n// https://usehooks.com/useWindowSize/\nexport function useWindowSize() {\n  const isClient = typeof window === 'object';\n\n  const getSize = useCallback(\n    () => ({\n      width: isClient ? window.innerWidth : undefined,\n      height: isClient ? window.innerHeight : undefined,\n    }),\n    [isClient],\n  );\n\n  const [windowSize, setWindowSize] = useState(getSize);\n\n  useEffect(() => {\n    if (!isClient) {\n      // return false;\n      return () => {};\n    }\n\n    function handleResize() {\n      setWindowSize(getSize());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [getSize, isClient]); // Empty array ensures that effect is only run on mount and unmount\n\n  return windowSize;\n}\n\n// a touchbind for re-using across renderers\nexport function genericTouchBind({\n  domTarget,\n  posControl,\n  zoomControl,\n  screenScaleMultiplier,\n  gl,\n  setDragging,\n}) {\n  const [{ xy }, setControlXY] = posControl;\n  const [{ zoom, minZoom, maxZoom }, setControlZoom] = zoomControl;\n  return {\n    binds: {\n      // prevent some browser events such as swipe-based navigation or\n      // pinch-based zoom and instead redirect them to this handler\n      onDragStart: ({ event }) => event.preventDefault(),\n      onPinchStart: ({ event }) => event.preventDefault(),\n\n      onPinch: ({\n        vdva: [vd],\n        down,\n        delta: [dx],\n        origin,\n        first,\n        memo = [xy.getValue()],\n        z = zoom.getValue(),\n      }) => {\n        if (first) {\n          let [p] = memo;\n          return [p, origin];\n        }\n        // initial origin access\n        // let [p, initialOrigin] = memo;\n        let newZ = z * (1 + dx * 5e-3);\n        let newZclamp = _.clamp(newZ, minZoom.getValue(), maxZoom.getValue());\n\n        // let realZoom = gl.current.canvas.height * newZclamp * screenScaleMultiplier;\n        // let plotMovement = scale(subV(origin, initialOrigin), -2/realZoom);\n        // let relMove = [plotMovement[0], -plotMovement[1]];\n\n        setControlZoom({\n          zoom: newZclamp,\n          immediate: down,\n          config: {\n            // value needs revising, currently too slow\n            velocity: 10 * vd,\n          },\n        });\n\n        // setControlPos({\n        //   pos: addV(p, relMove),                    // add the displacement to the starting position\n        //   immediate: down,                                  // immediately apply if the gesture is active\n        // });\n\n        return memo;\n      },\n\n      onWheel: ({ movement: [, my], active, z = zoom.getValue() }) => {\n        // x, y obtained from event\n        let newZ = z * (1 - my * (my < 0 ? 3e-4 : 2e-4));\n\n        setControlZoom({\n          zoom: _.clamp(newZ, minZoom.getValue(), maxZoom.getValue()),\n          immediate: active,\n          config: {\n            // velocity: active ? 0 : 10,\n          },\n        });\n\n        return z;\n      },\n\n      onDrag: ({\n        down,\n        movement,\n        velocity,\n        direction,\n        pinching,\n        memo = xy.getValue(),\n      }) => {\n        // let pinch handle movement\n        if (pinching) return;\n        // change according to this formula:\n        // move (x, y) in the opposite direction of drag (pan with cursor)\n        // divide by canvas size to scale appropriately\n        // multiply by 2 to correct scaling on viewport\n        // use screen multiplier for more granularity\n        let realZoom = gl.current.canvas.height * zoom.getValue() * screenScaleMultiplier;\n\n        let plotMovement = vScale(-2 / realZoom, movement);\n\n        let relMove = [plotMovement[0], -plotMovement[1]];\n        let relDir = [direction[0], -direction[1]];\n\n        setControlXY({\n          xy: addV(memo, relMove), // add the displacement to the starting position\n          immediate: down, // immediately apply if the gesture is active\n          config: {\n            velocity: vScale(-velocity / realZoom, relDir), // set the velocity (gesture momentum)\n            decay: true,\n          },\n        });\n\n        // tell the renderer that it's being dragged on\n        setDragging(down);\n        // try {\n        // } catch (e) {}\n\n        return memo;\n      },\n    },\n    config: {\n      eventOptions: { passive: false, capture: false },\n      domTarget: domTarget,\n      // The config object passed to useGesture has drag, wheel, scroll, pinch and move keys\n      // for specific gesture options. See here for more details.\n      // drag: {\n      //   bounds,\n      //   rubberband: true,\n      // }\n    },\n  };\n}\n","import { Slider, Switch } from '@material-ui/core';\nimport React from 'react';\nimport {\n  settingsDefinitionsType,\n  settingsGroupType,\n  settingsWidgetType,\n} from '../../common/settings';\n\nexport const defaultSettings = {\n  showMinimap: true,\n  showCrosshair: true,\n  showCoordinates: true,\n  maxI: 250,\n  showFPS: false,\n  useDPR: false,\n  useAA: false,\n};\n\nexport const settingsWidgets = (\n  settings: settingsDefinitionsType,\n): settingsWidgetType => ({\n  showMinimap: {\n    k: 'showMinimap',\n    label: 'Minimap',\n    checked: settings.showMinimap,\n    control: <Switch />,\n  },\n  showCrosshair: {\n    k: 'showCrosshair',\n    label: 'Crosshair',\n    checked: settings.showCrosshair,\n    control: <Switch />,\n  },\n  showCoordinates: {\n    k: 'showCoordinates',\n    label: 'Show coordinates',\n    checked: settings.showCoordinates,\n    control: <Switch />,\n  },\n  maxI: {\n    k: 'maxI',\n    label: 'Iterations',\n    value: settings.maxI,\n    labelPlacement: 'top',\n    style: {\n      marginLeft: 0,\n      marginRight: 0,\n    },\n    control: (\n      <Slider\n        min={10}\n        max={1000}\n        step={10}\n        valueLabelDisplay=\"auto\"\n        marks={[\n          { value: 10, label: 10 },\n          { value: 250, label: 250 },\n          { value: 500, label: 500 },\n          { value: 750, label: 750 },\n          { value: 1000, label: 1000 },\n        ]}\n      />\n    ),\n  },\n  useDPR: {\n    k: 'useDPR',\n    // https://stackoverflow.com/a/12830454/9184658\n    // // There is a downside that values like 1.5 will give \"1.50\" as the output. A fix suggested by @minitech:\n    // var numb = 1.5;\n    // numb = +numb.toFixed(2);\n    // // Note the plus sign that drops any \"extra\" zeroes at the end.\n    // // It changes the result (which is a string) into a number again (think \"0 + foo\"),\n    // // which means that it uses only as many digits as necessary.\n    label: `Use pixel ratio (${+window.devicePixelRatio.toFixed(3)})`,\n    checked: settings.useDPR,\n    control: <Switch />,\n  },\n  useAA: {\n    k: 'useAA',\n    label: `Anti-aliasing (slow)`,\n    checked: settings.useAA,\n    control: <Switch />,\n  },\n  showFPS: {\n    k: 'showFPS',\n    label: `Show FPS`,\n    checked: settings.showFPS,\n    control: <Switch />,\n  },\n});\n\nexport const getSettingsWidgetsGrouping = (\n  settingsWidgets: settingsWidgetType,\n): Array<settingsGroupType> => [\n  {\n    name: 'Interface',\n    widgets: [\n      settingsWidgets.showMinimap,\n      settingsWidgets.showCrosshair,\n      settingsWidgets.showCoordinates,\n    ],\n  },\n  {\n    name: 'Graphics',\n    widgets: [\n      settingsWidgets.maxI,\n      settingsWidgets.useDPR,\n      settingsWidgets.useAA,\n      settingsWidgets.showFPS,\n    ],\n  },\n];\n\nexport default defaultSettings;\n","import React, { createContext, ReactNode, useState } from 'react';\nimport { SettingsContextType, settingsDefinitionsType } from '../../common/settings';\nimport defaultSettings, { settingsWidgets } from './SettingsDefinitions';\n\nexport const SettingsContext = createContext<SettingsContextType>({\n  // provide the context with the default values\n  settings: defaultSettings,\n  // can't set state until it's initialized\n  setSettings: () => {\n    return;\n  },\n  settingsWidgets: settingsWidgets(defaultSettings),\n});\n\n// export const useSettings = (): SettingsContextType => useContext(SettingsContext);\n\nexport const SettingsProvider = ({ children }: { children: ReactNode }): JSX.Element => {\n  // https://reactjs.org/docs/context.html#updating-context-from-a-nested-component\n  // no grouping: all settings are accessible\n  const [settings, setSettings] = useState<settingsDefinitionsType>(defaultSettings);\n\n  return (\n    <SettingsContext.Provider\n      value={{\n        settings,\n        setSettings,\n        settingsWidgets: settingsWidgets(settings),\n      }}\n    >\n      {children}\n    </SettingsContext.Provider>\n  );\n};\n\nexport default SettingsProvider;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useGesture } from 'react-use-gesture';\nimport newSmoothJuliaShader from '../../shaders/newSmoothJuliaShader';\nimport MinimapViewer from './MinimapViewer';\nimport { genericTouchBind } from '../utils';\nimport WebGLCanvas from './WebGLCanvas';\nimport { SettingsContext } from '../settings/SettingsContext';\n\nexport default function JuliaRenderer(props) {\n  // variables to hold canvas and webgl information\n  const canvasRef = useRef();\n  const miniCanvasRef = useRef();\n\n  const gl = useRef();\n  const miniGl = useRef();\n\n  // this multiplier subdivides the screen space into smaller increments\n  // to allow for velocity calculations to not immediately decay, due to the\n  // otherwise small scale that is being mapped to the screen.\n  const screenScaleMultiplier = props.screenmult;\n\n  // read incoming props\n  const [{ xy }] = props.controls.xyCtrl;\n  // const [{ theta, last_pointer_angle }, setControlRot] = props.controls.rot;\n  const [{ zoom }, setControlZoom] = props.controls.zoomCtrl;\n  const maxI = props.maxI; // -> global\n  const AA = props.useAA ? 2 : 1;\n\n  const fragShader = newSmoothJuliaShader({\n    maxI: maxI,\n    AA: AA,\n    // showCrosshair: false,\n  });\n\n  const miniFragShader = newSmoothJuliaShader({\n    maxI: maxI,\n    AA: 2,\n    // showCrosshair: false,\n  });\n\n  const [dragging, setDragging] = useState(false);\n\n  let gtb = genericTouchBind({\n    domTarget: canvasRef,\n    posControl: props.controls.xyCtrl,\n    zoomControl: props.controls.zoomCtrl,\n    screenScaleMultiplier:\n      screenScaleMultiplier / (props.useDPR ? window.devicePixelRatio : 1),\n    gl: gl,\n    setDragging: setDragging,\n  });\n\n  let touchBind = useGesture(gtb.binds, gtb.config);\n\n  useEffect(touchBind, [touchBind]);\n\n  return (\n    <SettingsContext.Consumer>\n      {({ settings }) => (\n        <div\n          className=\"renderer\"\n          style={{\n            position: 'relative',\n          }}\n        >\n          <WebGLCanvas\n            id=\"julia\"\n            fragShader={fragShader}\n            useDPR={props.useDPR}\n            u={{\n              zoom: zoom,\n              xy: xy,\n              c: props.c,\n              maxI: maxI,\n              screenScaleMultiplier: screenScaleMultiplier,\n            }}\n            ref={canvasRef}\n            glRef={gl}\n            dragging={dragging}\n          />\n          <MinimapViewer\n            fragShader={miniFragShader}\n            useDPR={settings.useDPR}\n            u={{\n              zoom: zoom,\n              xy: xy,\n              maxI: maxI,\n              c: props.c,\n              screenScaleMultiplier: screenScaleMultiplier,\n            }}\n            canvasRef={miniCanvasRef}\n            glRef={miniGl}\n            onClick={() => setControlZoom({ zoom: 1 })}\n            show={settings.showMinimap}\n          />\n        </div>\n      )}\n    </SettingsContext.Consumer>\n  );\n}\n","// TODO set max iterations as parameter, crosshair as parameter\n\nconst makeCrosshair = (stroke, radius) => ({\n  stroke,\n  radius,\n});\n\nexport const standardCrosshair = makeCrosshair(2, 100);\nexport const miniCrosshair = makeCrosshair(1, 30);\n\nconst newSmoothMandelbrotShader = (\n  { maxI = 300, AA = 1, B = 64 },\n  showCrosshair = true,\n  crosshairShape = {\n    stroke: 2,\n    radius: 100,\n  },\n) => {\n  return `\n    // Adapted by Joao Maio/2019, based on work by inigo quilez - iq/2013\n    // License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n    \n    // See here for more information on smooth iteration count:\n    // http://iquilezles.org/www/articles/mset_smooth/mset_smooth.htm\n    \n    #define false 0\n    #define true 1\n\n    // render parameters\n    #define AA ${AA}\n    #define MAXI ${maxI}\n    #define B ${B.toFixed(1)}\n    \n    // crosshair parameters\n    #define show_crosshair ${showCrosshair}\n    #define cross_stroke ${crosshairShape.stroke.toFixed(1)}\n    #define cross_radius ${crosshairShape.radius.toFixed(1)}\n    \n    // set high float precision (lower than this may break colours on mobile)\n    precision highp float;\n    \n    // need to know the resolution of the canvas\n    uniform vec2 resolution;\n    \n    // properties should be passed as uniforms\n    uniform int   u_maxI;  \n    uniform vec2  u_xy;\n    uniform float u_zoom;\n    uniform float u_theta;\n\n    bool crosshair( float x, float y ) {\n      float abs_x = abs(2.0*x - resolution.x);\n      float abs_y = abs(2.0*y - resolution.y);\n  \n      return \n      // crosshair in centre of screen\n      (abs_x <= cross_stroke || abs_y <= cross_stroke) &&\n      // crosshair size / \"radius\"\n      (abs_x <= cross_radius && abs_y <= cross_radius);\n    }\n    \n    float mandelbrot( in vec2 c ) {\n        {\n            float c2 = dot(c, c);\n            // skip computation inside M1 - http://iquilezles.org/www/articles/mset_1bulb/mset1bulb.htm\n            if( 256.0*c2*c2 - 96.0*c2 + 32.0*c.x - 3.0 < 0.0 ) return 0.0;\n            // skip computation inside M2 - http://iquilezles.org/www/articles/mset_2bulb/mset2bulb.htm\n            if( 16.0*(c2+2.0*c.x+1.0) - 1.0 < 0.0 ) return 0.0;\n        }\n    \n        float l = 0.0;\n        vec2 z  = vec2(0.0);\n        for( int i=0; i<MAXI; i++ )\n        {\n            z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c;\n            if( dot(z,z)>(B*B) ) break;\n            l += 1.0;\n        }\n    \n        // maxed out iterations\n        if( l>float(MAXI)-1.0 ) return 0.0;\n        \n        // optimized smooth interation count\n        l = l - log2(log2(dot(z,z))) + 4.0;\n    \n        return l;\n    }\n    \n    void main() {    \n        // set the initial colour to black\n        vec3 col = vec3(0.0);\n    \n        // anti-aliasing\n        #if AA>1\n        for( int m=0; m<AA; m++ )\n        for( int n=0; n<AA; n++ )\n        {\n            // vec2 p = (-iResolution.xy + 2.0*(fragCoord.xy+vec2(float(m),float(n))/float(AA)))/iResolution.y;\n            vec2 p = (2.0*(gl_FragCoord.xy + vec2(float(m), float(n)) / float(AA) ) - resolution.xy)/resolution.y;\n            float w = float(AA*m+n);\n        #else    \n            // adjust pixels to range from [-1, 1]\n            vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\n        #endif\n    \n        // c is based on offset and grid position, z_0 = 0\n        vec2 c = u_xy + p/u_zoom;\n        \n        float l = mandelbrot(c);\n        col += 0.5 + 0.5*cos( 3.0 + l*0.15 + vec3(0.0,0.6,1.0));\n    \n        // antialiasing\n        #if AA>1\n        }\n        col /= float(AA*AA);\n        #endif\n    \n        #if show_crosshair\n        if (crosshair(gl_FragCoord.x, gl_FragCoord.y)) {\n            col = 1. - col;\n        }\n        #endif\n    \n        // Output to screen\n        gl_FragColor = vec4( col, 1.0 );\n    }\n    `;\n};\n\nexport default newSmoothMandelbrotShader;\n","import { Card, Grow } from '@material-ui/core';\nimport React from 'react';\nimport { animated } from 'react-spring';\nimport { FPSCardProps } from '../../common/info';\n\nconst FPSCard = (props: FPSCardProps): JSX.Element => (\n  <Grow in={props.show}>\n    <Card\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        padding: '4px 12px',\n        margin: 6,\n        fontFamily: 'monospace',\n        borderRadius: 100,\n        fontSize: '1.8rem',\n        zIndex: 1300,\n        userSelect: 'none',\n      }}\n    >\n      <animated.div>{props.fps}</animated.div>\n    </Card>\n  </Grow>\n);\n\nexport default FPSCard;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useGesture } from 'react-use-gesture';\nimport newSmoothMandelbrotShader, {\n  miniCrosshair,\n  standardCrosshair,\n} from '../../shaders/newSmoothMandelbrotShader';\nimport FPSCard from '../info/FPSCard';\nimport { SettingsContext } from '../settings/SettingsContext';\nimport { genericTouchBind } from '../utils';\nimport MinimapViewer from './MinimapViewer';\nimport WebGLCanvas from './WebGLCanvas';\n\nexport default function MandelbrotRenderer(props) {\n  // variables to hold canvas and webgl information\n  const canvasRef = useRef();\n  const miniCanvasRef = useRef();\n\n  const gl = useRef();\n  const miniGl = useRef();\n\n  // this multiplier subdivides the screen space into smaller increments\n  // to allow for velocity calculations to not immediately decay, due to the\n  // otherwise small scale that is being mapped to the screen.\n  const screenScaleMultiplier = props.screenmult; // -> global\n\n  // temporary bounds to prevent excessive panning\n  // eslint-disable-next-line\n  const radialBound = 1;\n  // const relativeRadialBound = radialBound;// / -screenScaleMultiplier;\n\n  // read incoming props\n  const [{ xy }] = props.controls.xyCtrl;\n  // const [{ theta, last_pointer_angle }, setControlRot] = props.controls.rot;\n  const [{ zoom }, setControlZoom] = props.controls.zoomCtrl;\n  const maxI = props.maxI; // -> global\n  const AA = props.useAA ? 2 : 1; // -> global\n\n  const fragShader = newSmoothMandelbrotShader(\n    {\n      maxI: maxI,\n      AA: AA,\n    },\n    props.showCrosshair,\n    standardCrosshair,\n  );\n  const miniFragShader = newSmoothMandelbrotShader(\n    {\n      maxI: maxI,\n      AA: 2,\n    },\n    props.showCrosshair,\n    miniCrosshair,\n  );\n\n  const [dragging, setDragging] = useState(false);\n\n  const gtb = genericTouchBind({\n    domTarget: canvasRef,\n    posControl: props.controls.xyCtrl,\n    zoomControl: props.controls.zoomCtrl,\n    screenScaleMultiplier:\n      screenScaleMultiplier / (props.useDPR ? window.devicePixelRatio : 1), // -> global\n    gl: gl,\n    setDragging: setDragging,\n  });\n\n  const touchBind = useGesture(gtb.binds, gtb.config);\n\n  useEffect(touchBind, [touchBind]);\n\n  const [fps, setFps] = useState(0);\n\n  return (\n    <SettingsContext.Consumer>\n      {({ settings }) => (\n        <div\n          className=\"renderer\"\n          style={{\n            position: 'relative',\n          }}\n        >\n          <FPSCard fps={fps} show={settings.showFPS} />\n\n          <WebGLCanvas\n            id=\"mandelbrot\"\n            fragShader={fragShader}\n            useDPR={settings.useDPR}\n            // touchBind={touchBind}\n            u={{\n              zoom: zoom,\n              xy: xy,\n              maxI: maxI,\n              screenScaleMultiplier: screenScaleMultiplier,\n            }}\n            ref={canvasRef}\n            glRef={gl}\n            fps={setFps}\n            dragging={dragging}\n          />\n\n          <MinimapViewer\n            fragShader={miniFragShader}\n            useDPR={settings.useDPR}\n            u={{\n              zoom: zoom,\n              xy: xy,\n              maxI: maxI,\n              screenScaleMultiplier: screenScaleMultiplier,\n            }}\n            canvasRef={miniCanvasRef}\n            glRef={miniGl}\n            show={settings.showMinimap}\n            onClick={() => setControlZoom({ zoom: 1 })}\n          />\n        </div>\n      )}\n    </SettingsContext.Consumer>\n  );\n}\n","import {\n  Backdrop,\n  Divider,\n  Fab,\n  FormControlLabel,\n  FormGroup,\n  Grid,\n  makeStyles,\n  Popover,\n  Typography,\n} from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport InfoIcon from '@material-ui/icons/Info';\nimport MyLocationIcon from '@material-ui/icons/MyLocation';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport React, { useState } from 'react';\nimport { SettingsMenuProps } from '../../common/settings';\nimport { SettingsContext } from './SettingsContext';\nimport { getSettingsWidgetsGrouping } from './SettingsDefinitions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'column',\n    zIndex: 2,\n  },\n  button: {\n    padding: '6px 12px',\n    marginTop: 10,\n  },\n  sliderControl: {\n    width: 30,\n  },\n}));\n\nconst GroupDivider = () => <Divider style={{ marginTop: 10, marginBottom: 4 }} />;\nconst GroupTitle = (props: { title: string }) => (\n  <Typography variant=\"overline\" style={{ fontSize: 14, marginBottom: 4 }}>\n    {props.title}\n  </Typography>\n);\n\nexport default function SettingsMenu(props: SettingsMenuProps): JSX.Element {\n  const classes = useStyles();\n\n  const [anchorEl, setAnchorEl] = useState<EventTarget & HTMLButtonElement>();\n\n  // interface BottomButtonProps extends {\n  //   icon: JSX.Element;\n  //   text: string;\n  //   color: 'inherit' | 'default' | 'primary' | 'secondary' | undefined;\n  //   onClick: () => void;\n  // }\n  // const BottomButton = (props: BottomButtonProps) => (\n  //   <Button\n  //     variant=\"outlined\"\n  //     color={props.color}\n  //     aria-controls={props.text.toLowerCase()}\n  //     onClick={() => props.onClick()}\n  //     className={classes.button}\n  //     startIcon={<MyLocationIcon />}\n  //   >\n  //     Reset\n  //   </Button>\n  // );\n\n  const ResetButton = () => (\n    <Button\n      startIcon={<MyLocationIcon />}\n      color=\"secondary\"\n      aria-controls=\"reset\"\n      onClick={() => {\n        props.reset();\n      }}\n      className={classes.button}\n    >\n      Reset\n    </Button>\n  );\n  const AboutButton = () => (\n    <Button\n      startIcon={<InfoIcon />}\n      color=\"primary\"\n      aria-controls=\"about\"\n      onClick={() => {\n        props.toggleInfo();\n        setAnchorEl(undefined);\n      }}\n      className={classes.button}\n    >\n      About\n    </Button>\n  );\n\n  return (\n    <div className={classes.root}>\n      <Fab\n        aria-controls=\"menu\"\n        aria-haspopup=\"true\"\n        aria-label=\"settings\"\n        size=\"small\"\n        onClick={(e) => setAnchorEl(e.currentTarget)}\n        // className={classes.button}\n      >\n        <SettingsIcon />\n      </Fab>\n      <Backdrop open={Boolean(anchorEl)}>\n        <Popover\n          id=\"menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={Boolean(anchorEl)}\n          onClose={() => setAnchorEl(undefined)}\n          anchorOrigin={{\n            horizontal: 'right',\n            vertical: 'bottom',\n          }}\n          transformOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n        >\n          <Grid\n            container\n            direction=\"column\"\n            style={{\n              paddingLeft: '1.5em',\n              paddingRight: '1.5em',\n              paddingTop: '1em',\n              paddingBottom: '1em',\n            }}\n          >\n            <Grid item container alignItems=\"center\" justify=\"space-around\">\n              <Grid item>\n                <Typography variant=\"h1\" style={{ fontSize: 20, padding: 10 }}>\n                  Configuration\n                </Typography>\n              </Grid>\n              {/* <Divider orientation=\"vertical\" flexItem /> */}\n              {/* <Grid item>\n                <IconButton\n                  aria-label=\"info\"\n                  size=\"medium\"\n                  onClick={() => {\n                    // open info panel\n                    props.toggleInfo();\n                    // close popover\n                    setAnchorEl(undefined);\n                  }}\n                >\n                  <InfoIcon fontSize=\"inherit\" />\n                </IconButton>\n              </Grid> */}\n            </Grid>\n            <SettingsContext.Consumer>\n              {({ setSettings, settingsWidgets }) =>\n                getSettingsWidgetsGrouping(settingsWidgets).map((g) => (\n                  <Grid item key={g.name}>\n                    <GroupDivider />\n                    <GroupTitle title={g.name} />\n                    <FormGroup>\n                      {g.widgets.map((widget) => (\n                        <FormControlLabel\n                          key={`${widget.label}-control`}\n                          style={{ userSelect: 'none' }}\n                          {...widget}\n                          onChange={(e, val) => {\n                            console.log(`${widget.k} -> ${val}`);\n                            setSettings((prevState) => ({\n                              ...prevState,\n                              [widget.k]: val,\n                            }));\n                          }}\n                        />\n                      ))}\n                    </FormGroup>\n                  </Grid>\n                ))\n              }\n            </SettingsContext.Consumer>\n\n            <GroupDivider />\n\n            <Grid container direction=\"row\" justify=\"space-between\" alignItems=\"stretch\">\n              <Grid item>\n                <ResetButton />\n              </Grid>\n              <Grid item>\n                <AboutButton />\n              </Grid>\n            </Grid>\n\n            {/* <Button\n              aria-controls=\"reset\"\n              onClick={() => props.reset()}\n              className={classes.button}\n              startIcon={<MyLocationIcon />}\n            >\n              Reset\n            </Button> */}\n            {/* <Grid item xs>\n                <Button\n                  aria-controls=\"reset\"\n                  onClick={() => props.reset()}\n                  className={classes.button}\n                  startIcon={<MyLocationIcon />}\n                >\n                  Reset\n                </Button>\n              </Grid>\n              <Grid item xs>\n                <Button\n                  aria-label=\"info\"\n                  size=\"medium\"\n                  onClick={() => {\n                    // open info panel\n                    props.toggleInfo();\n                    // close popover\n                    setAnchorEl(undefined);\n                  }}\n                  className={classes.button}\n                  startIcon={<InfoIcon />}\n                >\n                  About\n                </Button>\n              </Grid> */}\n          </Grid>\n        </Popover>\n      </Backdrop>\n    </div>\n  );\n}\n","import { Grid, ThemeProvider } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { useSpring } from 'react-spring';\nimport { vScale } from 'vec-la-fp';\nimport './App.css';\nimport {\n  ViewerRotationControl,\n  ViewerXYControl,\n  ViewerZoomControl,\n} from './common/types';\nimport CoordinatesCard from './components/info/CoordinatesCard';\nimport ChangeCoordinatesCard from './components/info/ChangeCoordinatesCard';\nimport InfoDialog from './components/info/InfoDialog';\nimport JuliaRenderer from './components/render/JuliaRenderer';\n// import 'typeface-roboto';\nimport MandelbrotRenderer from './components/render/MandelbrotRenderer';\nimport SettingsProvider, { SettingsContext } from './components/settings/SettingsContext';\nimport SettingsMenu from './components/settings/SettingsMenu';\nimport { useWindowSize } from './components/utils';\nimport theme from './theme/theme';\n\nexport const defaultSpringConfig = { mass: 1, tension: 100, friction: 200 };\n\nexport const resetPosSpringConfig = { mass: 1, tension: 200, friction: 75 };\nexport const resetZoomSpringConfig = { mass: 1, tension: 300, friction: 60 };\n\nfunction App(): JSX.Element {\n  const size = useWindowSize();\n\n  // this multiplier subdivides the screen space into smaller increments\n  // to allow for velocity calculations to not immediately decay, due to the\n  // otherwise small scale that is being mapped to the screen.\n  const screenScaleMultiplier = 1e-7;\n\n  const startPos: [number, number] = [-0.7746931, 0.1242266];\n  // const startPos = [-.7426482, .1271875 ];\n  // const startPos = [-0.1251491, -0.8599647];\n  const startZoom = 85.0;\n\n  // interface posInterface extends UseSpringBaseProps {\n  //   pos: [number, number],\n  //   config: SpringConfig,\n  // }\n\n  const mandelbrotControls = {\n    xyCtrl: useSpring<ViewerXYControl>(() => ({\n      xy: vScale(1 / screenScaleMultiplier, startPos),\n      config: defaultSpringConfig,\n    })),\n\n    rotCtrl: useSpring<ViewerRotationControl>(() => ({\n      theta: 0,\n      // last_pointer_angle: 0,\n      // itheta: 0,\n      config: defaultSpringConfig,\n    })),\n\n    zoomCtrl: useSpring<ViewerZoomControl>(() => ({\n      zoom: startZoom,\n      // last_pointer_dist: 0,\n\n      minZoom: 0.5,\n      maxZoom: 100000,\n\n      config: { mass: 1, tension: 600, friction: 50 },\n    })),\n  };\n\n  // const [a] = mandelbrotControls.xyCtrl;\n  // typeof a.xy;\n\n  const juliaControls = {\n    xyCtrl: useSpring<ViewerXYControl>(() => ({\n      xy: [0, 0] as [number, number],\n      config: defaultSpringConfig,\n    })),\n\n    rotCtrl: useSpring<ViewerRotationControl>(() => ({\n      theta: 0,\n      // last_pointer_angle: 0,\n      // itheta: 0,\n      config: defaultSpringConfig,\n    })),\n\n    zoomCtrl: useSpring<ViewerZoomControl>(() => ({\n      zoom: 0.5,\n      // last_pointer_dist: 0,\n\n      minZoom: 0.5,\n      maxZoom: 100000,\n\n      config: { mass: 1, tension: 600, friction: 50 },\n    })),\n  };\n\n  const reset = () => {\n    mandelbrotControls.xyCtrl[1]({\n      xy: [0, 0],\n      config: resetPosSpringConfig,\n    });\n    mandelbrotControls.zoomCtrl[1]({\n      zoom: 1,\n      config: resetZoomSpringConfig,\n    });\n\n    juliaControls.xyCtrl[1]({\n      xy: [0, 0],\n      config: resetPosSpringConfig,\n    });\n    juliaControls.zoomCtrl[1]({\n      zoom: 1,\n      config: resetZoomSpringConfig,\n    });\n  };\n\n  const [showInfo, setShowInfo] = useState(false);\n\n  const toggleInfo = () => setShowInfo(!showInfo);\n\n  // const { settings } = useSettings();\n\n  return (\n    <ThemeProvider theme={theme}>\n      <SettingsProvider>\n        <Grid container>\n          <SettingsContext.Consumer>\n            {({ settings }) => (\n              <Grid\n                item\n                container\n                direction={\n                  (size.width || 1) < (size.height || 0) ? 'column-reverse' : 'row'\n                }\n                justify=\"center\"\n                className=\"fullSize\"\n                style={{\n                  position: 'absolute',\n                }}\n              >\n                <div\n                  style={{\n                    position: 'absolute',\n                    right: 0,\n                    top: 0,\n                    margin: 20,\n                    width: 'auto',\n                  }}\n                >\n                  <CoordinatesCard\n                    show={settings.showCoordinates}\n                    mandelbrot={mandelbrotControls.xyCtrl[0].xy}\n                    screenScaleMultiplier={screenScaleMultiplier}\n                  />\n                  <ChangeCoordinatesCard\n                    show={settings.showCoordinates}\n                    mandelbrot={mandelbrotControls}\n                    screenScaleMultiplier={screenScaleMultiplier}\n                  />\n                </div>\n                <Grid item xs className=\"renderer\">\n                  <MandelbrotRenderer\n                    controls={mandelbrotControls}\n                    screenmult={screenScaleMultiplier}\n                    {...settings}\n                  />\n                </Grid>\n                <Grid item xs className=\"renderer\">\n                  <JuliaRenderer\n                    c={mandelbrotControls.xyCtrl[0].xy}\n                    controls={juliaControls}\n                    screenmult={screenScaleMultiplier}\n                    {...settings}\n                  />\n                </Grid>\n              </Grid>\n            )}\n          </SettingsContext.Consumer>\n\n          <SettingsMenu reset={() => reset()} toggleInfo={() => toggleInfo()} />\n\n          <InfoDialog ctrl={[showInfo, setShowInfo]} />\n        </Grid>\n      </SettingsProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}