{"version":3,"sources":["common/values.ts","common/routing.ts","common/utils.ts","components/info/ChangeCoordinatesCard.tsx","components/info/CoordinatesCard.tsx","components/info/CoordinateInterface.tsx","img/logo-192.png","components/custom/DialogComponents.tsx","components/info/helptext/helptext.ts","components/info/helptext/basics.md","components/info/helptext/settings.md","img/layout-diagram.svg","theme/theme.tsx","components/render/ViewChanger.tsx","common/settings.ts","components/settings/SettingsDefinitions.tsx","components/settings/SettingsContext.tsx","components/settings/SettingsMenu.tsx","components/info/MarkdownOverrides.tsx","components/info/FirstTimeInfo.tsx","components/info/info.md","components/info/InfoDialog.tsx","dist/clientDetect.js","shaders/newSmoothJuliaShader.ts","shaders/fullVertexShader.js","components/render/WebGLCanvas.tsx","components/render/MinimapViewer.tsx","components/render/JuliaRenderer.tsx","shaders/newSmoothMandelbrotShader.ts","components/info/FPSCard.tsx","components/render/MandelbrotRenderer.tsx","shaders/mandelbrotShaderDeep.ts","components/render/WebGLCanvasDeep.tsx","components/render/MandelbrotRendererDeep.tsx","App.tsx","serviceWorkerRegistration.ts","components/ServiceWorkerWrapper.tsx","index.tsx"],"names":["defaultPrecision","default","floatFixed","shortFloatFixed","deepZoomPrecision","viewerOrigin","xy","z","theta","defaultMandelbrotStart","defaultJuliaStart","defaultViewerStart","m","j","springsConfigs","precision","xyCtrl","mass","tension","friction","zoomCtrl","rotCtrl","user","NamedHashURLViewer","name","v","this","ViewerURLManager","vs","updateFromURL","asHashURL","params","currentViewerState","fmt","newV","undefined","map","n","toFloatDisplayFixed","toFloatDisplayShort","updateViewer","currentLocation","window","location","hash","replace","l","viewerParams","split","filter","length","forEach","s","parsedVals","Number","some","isNaN","x","y","t","error","console","log","genericTouchBind","domTarget","controls","setDragging","DPR","setControlXY","minZoom","maxZoom","setControlZoom","setControlRot","conf","zoomMult","getRealZoom","current","height","updateXY","relMove","down","addV","vScale","vRotate","config","immediate","updateZ","updateT","handlers","onPinch","event","da","vdva","movement","md","ma","delta","first","origin","memo","getValue","a","o","preventDefault","deg","newZ","_","clamp","newZclamp","realZoom","subV","Math","PI","onWheel","my","active","shiftKey","zoom","newT","onDrag","direction","pinching","velocity","cancel","last","eventOptions","passive","capture","warpToPoint","setXY","setZ","setR","Rgb255ColourToFloat","c","r","g","b","e","ChangeCoordinatesCard","props","useState","setZoom","setTheta","Card","style","width","zIndex","position","padding","display","flexDirection","flexShrink","Grid","container","alignItems","TextField","size","onChange","target","value","type","defaultValue","inputProps","step","label","justify","min","Button","marginTop","onClick","mandelbrot","CoordinatesCard","precisionFormatter","marginBottom","Typography","align","fontFamily","fontSize","span","interpolate","CoordinateInterface","show","Grow","in","right","top","margin","DialogTitle","withStyles","theme","createStyles","root","spacing","image","titleText","justifyContent","flexGrow","children","classes","onClose","other","disableTypography","className","src","MandelbrotMapsLogo","alt","variant","IconButton","aria-label","color","DialogContent","breakpoints","up","MuiDialogContent","DialogActions","MuiDialogActions","DialogDivider","Divider","Alert","elevation","helptext","_extends","Object","assign","i","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","id","x1","y1","x2","y2","d","rx","cx","cy","transform","xlinkHref","SvgLayoutDiagram","_ref","svgRef","title","titleId","xmlns","xmlnsXlink","viewBox","ref","ForwardRef","createMuiTheme","MuiSwitch","MuiButton","MuiDialog","PaperProps","maxHeight","maxWidth","palette","primary","main","colors","blue","secondary","red","info","shape","borderRadius","typography","h1","h2","responsiveFontSizes","contrastBoxShadow","useStyles","makeStyles","changeViewButton","ViewChanger","vertical","changeFunc","displayOnly","mButton","jButton","ButtonGroup","orientation","marginLeft","defaultSettings","showMinimap","showCrosshair","showCoordinates","maxI","showFPS","useDPR","useAA","colour","deepZoom","defaultIterationLevels","perturbationIterationLevels","settingsWidgets","settings","checked","control","Switch","labelPlacement","Slider","max","marks","valueLabelDisplay","devicePixelRatio","toFixed","paddingTop","paddingBottom","paddingLeft","paddingRight","getSettingsWidgetsGrouping","icon","ExtensionIcon","widgets","PhotoIcon","SettingsContext","createContext","setSettings","SettingsProvider","Provider","bottom","settingsButton","boxShadow","popoverCardGrid","sliderControl","GroupDivider","GroupTitle","item","SettingsMenuButton","Fab","aria-controls","aria-haspopup","SettingsHelpButton","startIcon","HelpOutline","SettingsMenu","helpState","helpOpen","setHelpOpen","anchorEl","setAnchorEl","ResetButton","MyLocationOutlined","reset","AboutButton","InfoOutlined","toggleInfo","currentTarget","Backdrop","open","Boolean","Popover","keepMounted","anchorOrigin","horizontal","transformOrigin","userSelect","xs","SettingsOutlined","marginRight","Consumer","FormGroup","entries","k","widget","FormControlLabel","slice","val","debug","prevState","wrapMdOverrideTypographyHOC","paragraph","SettingsInstructionBlock","baseMdOverrides","href","Link","p","mdOverrides","ViewerLayoutDiagram","sm","ViewChangerDisplay","noop","HelpBreadcrumbs","lineHeight","textAlign","ChevronRightSharp","SettingsInstructions","useTheme","backgroundColor","grey","borderTopLeftRadius","borderBottomLeftRadius","lighten","darken","options","wrapper","React","Fragment","forceBlock","overrides","trim","MarkdownFromFile","f","infoMdText","setInfoMdText","useEffect","fetch","then","response","text","FirstTimeInfo","ctrl","setOpen","returningUser","localStorage","getItem","handleClose","helptextEntries","steps","activeStep","setActiveStep","contentRef","useRef","scrollTo","Dialog","dividers","Fade","MobileStepper","nextButton","prev","mod","KeyboardArrowRight","backButton","KeyboardArrowLeft","GITSHA","process","InfoDialog","snackBarOpen","setSnackBarOpen","clientData","useMemo","screenSize","screen","windowSize","innerWidth","innerHeight","nameOffset","verOffset","ix","nVer","navigator","appVersion","nAgt","userAgent","browser","appName","version","parseFloat","majorVersion","parseInt","substring","lastIndexOf","toLowerCase","toUpperCase","mobile","test","cookieEnabled","document","cookie","os","clientStrings","cs","osVersion","exec","gl","debugInfo","gpuVendor","renderer","system","device","canvas","createElement","getContext","getExtension","getParameter","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","browserVersion","browserRelease","platform","dpr","gpu","clientDetect","writeClientDataToClipboard","data","JSON","stringify","clipboard","writeText","prompt","endIcon","rel","infoTextMarkdown","Box","TableContainer","component","Paper","onContextMenu","Table","TableHead","TableRow","TableCell","colSpan","TableBody","String","Snackbar","autoHideDuration","reason","severity","survey","link","newSmoothJuliaShader","AA","B","fullscreenVertexArray","numComponents","WebGLCanvas","forwardRef","refAny","canvasRef","renderRequestRef","bufferInfo","programInfo","u","setFps","setFPS","useCallback","mini","setupCanvas","addEventListener","compileShader","ctx","twgl","fragShader","frames","elapsedTime","interval","render","time","prog","buff","viewport","uniforms","resolution","u_zoom","u_c","u_xy","u_maxI","u_theta","u_colour","useProgram","program","requestAnimationFrame","cancelAnimationFrame","cursor","dragging","displayName","MinimapViewer","rest","ButtonBase","left","overflow","JuliaRenderer","miniCanvasRef","miniFragShader","gtb","useGesture","makeCrosshair","stroke","radius","standardCrosshair","miniCrosshair","newSmoothMandelbrotShader","crosshairShape","FPSCard","div","FPS","MandelbrotRenderer","mandelbrotShaderDeep","WebGLCanvasDeep","squareRadius","antialias","depth","calcOrbit","c0","temp","returnTexture","xx","sqr","yy","mul","dx","Double","One","dy","Zero","orbit","toNumber","add","lt","sub","push","searchOrigin","aim","zbest","newAim","fbest","Infinity","hx","hy","phi","texsize","ceil","sqrt","orbittex","format","RGBA","FLOAT","minMag","NEAREST","wrap","CLAMP_TO_EDGE","center","pixelsize","MandelbrotRendererDeep","App","isClient","getSize","w","h","setWindowSize","handleResize","removeEventListener","useWindowSize","currentDPR","setPrecision","toFloatDisplay","loc","setLoc","handler","to","useHashLocation","updateBrowserHash","history","replaceState","urlManager","updateHash","asFullHashURL","updateM","updateJ","mandelbrotControls","useSpring","onRest","set","juliaControls","showInfo","setShowInfo","openHelp","setOpenHelp","toggleHelp","showMandelbrot","showJulia","setViewerState","isLocalhost","hostname","match","register","URL","swUrl","headers","contentType","get","status","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ServiceWorkerWrapper","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","waiting","action","postMessage","ReactDOM","StrictMode","ThemeProvider","getElementById"],"mappings":"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","file":"static/js/main.2d20923f.chunk.js","sourcesContent":["import { RgbColor } from 'react-colorful';\nimport { SpringConfig } from 'react-spring';\nimport {\n  precisionFormatterInterface,\n  precisionSpecifier,\n  springConfigKeys,\n  springControlKeys,\n  ViewerLocation,\n} from './types';\n\n// this multiplier subdivides the screen space into smaller increments\n// to allow for velocity calculations to not immediately decay, due to the\n// otherwise small scale that is being mapped to the screen.\n// export const screenScaleMultiplier = 1e-7;\n// TL;DR this was a workaround - react-spring allows for \"precision\"\n//       to be defined in each spring configuration, which is:\n//       > The smallest velocity before the animation is considered \"not moving\"\n// export const defaultPrecision = 1e-16;\n// // default number of numbers after the decimal point\n// export const defaultFloatFixedPrecision = 16;\n// export const shortFloatFixedPrecision = 2;\n\nexport const toFloatDisplay = (n: number, p: number): number => +n.toFixed(p);\n\nexport const PrecisionFormatter = (\n  p: precisionSpecifier,\n): precisionFormatterInterface => ({\n  toFloatDisplay: (n: number) => toFloatDisplay(n, p.default),\n  toFloatDisplayFixed: (n: number) => n.toFixed(p.floatFixed),\n  toFloatDisplayShort: (n: number) => n.toFixed(p.shortFloatFixed),\n});\n\nexport const defaultPrecision: precisionSpecifier = {\n  // react-spring precision\n  default: 1e-7,\n  // x, y coordinates\n  floatFixed: 7,\n  // zoom, theta\n  shortFloatFixed: 2,\n};\n\nexport const deepZoomPrecision: precisionSpecifier = {\n  default: 1e-15,\n  floatFixed: 18,\n  shortFloatFixed: 2,\n};\n\nexport const viewerOrigin: ViewerLocation = {\n  xy: [0, 0],\n  z: 1,\n  theta: 0,\n};\n\nexport const defaultMandelbrotStart: ViewerLocation = {\n  xy: [0.2361652, 0.5633767],\n  z: 4,\n  theta: 0.2,\n};\nexport const defaultJuliaStart: ViewerLocation = {\n  xy: [0.4364131, -0.6468786],\n  z: 4,\n  theta: 2.12,\n};\n// indexable viewer start object\nexport const defaultViewerStart: { [k: string]: ViewerLocation } = {\n  m: defaultMandelbrotStart,\n  j: defaultJuliaStart,\n};\n\nexport const springsConfigs = (\n  precision: precisionSpecifier,\n): { [k in springConfigKeys]: { [k in springControlKeys]: SpringConfig } } => ({\n  /** used when the values are animated to a point, includes decay */\n  default: {\n    xyCtrl: { mass: 1, tension: 500, friction: 75, precision: precision.default },\n    zoomCtrl: { mass: 1, tension: 300, friction: 40 },\n    rotCtrl: { mass: 1, tension: 400, friction: 75 },\n  },\n  /** used when a user is interacting with the view */\n  user: {\n    xyCtrl: { mass: 1, tension: 2000, friction: 75, precision: precision.default },\n    zoomCtrl: { mass: 1, tension: 1200, friction: 75 },\n    rotCtrl: { mass: 1, tension: 1200, friction: 75 },\n  },\n  // default and decay are merged to give them single \"non-user\" values\n  // decay: {\n  //   /** used after the user has let go of the view, decaying */\n  //   xy: { mass: 1, tension: 500, friction: 75 },\n  //   zoom: { mass: 1, tension: 300, friction: 50 },\n  //   rot: { mass: 1, tension: 400, friction: 75 },\n  // },\n});\n\nexport const defaultShadingColour: RgbColor = { r: 0, g: 180, b: 255 };\n\n// export const defaultSpringConfig = { mass: 1, tension: 100, friction: 200 };\n\n// export const xyCtrlSpringConfig = { mass: 1, tension: 2000, friction: 100 };\n// export const xyCtrlSpringDecayConfig = { mass: 1, tension: 500, friction: 75 };\n\n// export const toFloatDisplayShort = (n: number): number =>\n//   toFloatDisplay(n, precision);\n","import { useCallback, useEffect, useState } from 'react';\nimport {\n  precisionFormatterInterface,\n  ReactUseStateType,\n  ViewerLocation,\n  XYType,\n} from './types';\nimport { defaultJuliaStart, defaultMandelbrotStart, defaultViewerStart } from './values';\n\nexport class NamedHashURLViewer {\n  name: string;\n  v: ViewerLocation;\n\n  constructor(name: string, v: ViewerLocation) {\n    this.name = name;\n    this.v = v;\n  }\n\n  /**\n   * convert a viewer's state into a defined URL representation\n   * @param namedViewer the viewer object to be converted\n   */\n  asHashURL(): string {\n    const { xy, z, theta } = this.v;\n    return `/${this.name}@${xy[0]},${xy[1]},${z},${theta}`;\n  }\n}\n\nexport class ViewerURLManager {\n  vs: {\n    [k: string]: NamedHashURLViewer;\n  };\n  // precision: precisionSpecifier;\n  // fmt: precisionFormatterInterface;\n\n  constructor() {\n    this.vs = {};\n    this.updateFromURL();\n  }\n\n  asFullHashURL(): string {\n    return `#${this.vs['m'].asHashURL()}${this.vs['j'].asHashURL()}`;\n  }\n\n  updateFromURL(): void {\n    const params = currentViewerState();\n    this.vs['m'] = new NamedHashURLViewer(\n      'm',\n      params['m'] || { ...defaultMandelbrotStart },\n    );\n    this.vs['j'] = new NamedHashURLViewer('j', params['j'] || { ...defaultJuliaStart });\n  }\n\n  updateViewer(\n    name: string,\n    v: Partial<ViewerLocation>,\n    fmt: precisionFormatterInterface,\n  ): void {\n    const { xy, z, theta } = v;\n    // console.log('updateViewer:', fmt);\n    // const [[{ xy }], [{ z }], [{ theta }]] = [xyC]\n    // const [xy] = [xyCtrl?.xy];\n    const newV = this.vs[name].v;\n    if (xy !== undefined) newV.xy = xy.map((n) => +fmt.toFloatDisplayFixed(n)) as XYType;\n    if (z !== undefined) newV.z = +fmt.toFloatDisplayShort(z);\n    if (theta !== undefined) newV.theta = +fmt.toFloatDisplayShort(theta);\n\n    this.vs[name].v = newV;\n  }\n\n  updateFromViewer(\n    m: Partial<ViewerLocation>,\n    j: Partial<ViewerLocation>,\n    fmt: precisionFormatterInterface,\n  ): void {\n    this.updateViewer('m', m, fmt);\n    this.updateViewer('j', j, fmt);\n  }\n}\n\n// returns the current hash location in a normalized form\n// (excluding the leading '#' symbol)\nexport const currentLocation = (): string => {\n  // console.log(window.location);\n  const l = window.location.hash.replace('#', '') || '';\n  return l;\n};\n\nexport const currentViewerState = (): { [k: string]: ViewerLocation } => {\n  const l = currentLocation();\n  // key 'k' used to index which viewer is parsed\n  const viewerParams: { [k: string]: ViewerLocation } = {};\n  // actually parse the hash\n  try {\n    // separate each viewer's string, remove the empty string from the start\n    // (/abc/123) split => ['', 'abc', '123']\n    const qs = l.split('/').filter((v) => v.length > 0);\n    qs.forEach((s) => {\n      // viewer [name, params] is separated by @ sign\n      // assume this first split must succeed for any input to be parseable\n      const [v, params] = s.split('@');\n      const parsedVals = params.split(',').map(Number);\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some\n      if (parsedVals.some(isNaN)) {\n        // at least one parsing fail, stop now\n        viewerParams[v] = defaultViewerStart[v];\n      } else {\n        const [x, y, z, t] = parsedVals;\n        viewerParams[v] = { xy: [x, y] as XYType, z: z, theta: t };\n      }\n    });\n  } catch (error) {\n    // uhhhh, something's wrong\n    console.log(error);\n  }\n  return viewerParams;\n};\n\n// non-reloading hash change\nexport const useHashNavigator = (): ((to: string) => void) =>\n  useCallback((to) => window.history.replaceState(null, document.title, to), []);\n\n// https://github.com/molefrog/wouter#customizing-the-location-hook\nexport const useHashLocation = (): ReactUseStateType<string> => {\n  const [loc, setLoc] = useState(currentLocation());\n\n  useEffect(() => {\n    // this function is called whenever the hash changes\n    const handler = () => setLoc(currentLocation());\n\n    // subscribe to hash changes\n    window.addEventListener('hashchange', handler);\n    return () => window.removeEventListener('hashchange', handler);\n  }, []);\n\n  // remember to wrap your function with `useCallback` hook\n  // a tiny but important optimization\n  const navigate = useCallback((to) => (window.location.hash = to), []);\n\n  return [loc, navigate];\n};\n","import _ from 'lodash';\nimport { RefObject, useCallback, useEffect, useState } from 'react';\nimport { RgbColor } from 'react-colorful';\nimport { addV, subV } from 'react-use-gesture';\nimport {\n  FullGestureState,\n  Handlers,\n  StateKey,\n  UseGestureConfig,\n  Vector2,\n} from 'react-use-gesture/dist/types';\nimport { Vector, vRotate, vScale } from 'vec-la-fp';\nimport {\n  precisionSpecifier,\n  RgbFloatColour,\n  ViewerControlSprings,\n  ViewerLocation,\n} from './types';\nimport { springsConfigs } from './values';\n\n// https://usehooks.com/useWindowSize/\nexport function useWindowSize(): { w: number; h: number } {\n  const isClient = typeof window === 'object';\n\n  const getSize = useCallback(\n    () => ({\n      // default to zero, at least it's not undefined\n      w: isClient ? window.innerWidth : 0,\n      h: isClient ? window.innerHeight : 0,\n    }),\n    [isClient],\n  );\n\n  const [windowSize, setWindowSize] = useState(getSize);\n\n  useEffect(() => {\n    if (!isClient) {\n      // return false;\n      return () => {\n        // do nothing\n      };\n    }\n\n    function handleResize() {\n      setWindowSize(getSize());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [getSize, isClient]);\n  // Empty array ensures that effect is only run on mount and unmount\n\n  return windowSize;\n}\n\nexport interface GenericTouchBindParams {\n  domTarget: RefObject<HTMLCanvasElement>;\n  controls: ViewerControlSprings;\n  // screenScaleMultiplier: number;\n  // gl: any,\n  setDragging: React.Dispatch<React.SetStateAction<boolean>>;\n  DPR: number;\n  precision: precisionSpecifier;\n}\n\nexport interface GenericTouchBindReturn {\n  handlers: Handlers;\n  config: UseGestureConfig;\n}\n\n// --------------------------------------------------------------------------\n// https://gist.github.com/evdokimovm/0e7163faf7c8fe24e41e6b68461e4feb\n// Convert from degrees to radians.\nconst degToRad = (deg: number): number => (deg * Math.PI) / 180;\n// Math.radians(90); // 1.5707963267948966\n\n// Convert from radians to degrees.\n// eslint-disable-next-line\nconst radToDeg = (rad: number): number => (rad * 180) / Math.PI;\n// Math.degrees(3.141592653589793); // 180\n// --------------------------------------------------------------------------\n\n// a touchbind for re-using across renderers\nexport function genericTouchBind({\n  domTarget,\n  controls,\n  setDragging,\n  DPR,\n  precision,\n}: GenericTouchBindParams): GenericTouchBindReturn {\n  const [{ xy }, setControlXY] = controls.xyCtrl;\n  const [{ z, minZoom, maxZoom }, setControlZoom] = controls.zoomCtrl;\n  const [{ theta }, setControlRot] = controls.rotCtrl;\n\n  const conf = springsConfigs(precision);\n\n  const zoomMult = { in: 3e-3, out: 1e-3 };\n\n  // used to have screenScaleMultiplier here\n  const getRealZoom = (z: number) => (domTarget.current?.height || 100) * z;\n  // * screenScaleMultiplier;\n\n  /** Re-usable logic for XY \"panning\" */\n  const updateXY = ({\n    xy,\n    theta,\n    relMove,\n    down,\n  }: {\n    xy: Vector2;\n    theta: number;\n    relMove: Vector2;\n    down: boolean;\n  }) => {\n    setControlXY({\n      // add to the current position the relative displacement (relMove), rotated by theta,\n      // to maintain the correct displacement direction (without this it would move as if theta=0)\n      xy: addV(xy, vScale(DPR, vRotate(theta, relMove))),\n      config: down ? conf.user.xyCtrl : conf.default.xyCtrl,\n      // reset immediate value from warp function\n      immediate: false,\n    });\n  };\n  /** Re-usable logic for zooming */\n  const updateZ = ({ z, down }: { z: number; down: boolean }) => {\n    setControlZoom({\n      z: z,\n      config: down ? conf.user.zoomCtrl : conf.default.zoomCtrl,\n      // reset immediate value from warp function\n      immediate: false,\n    });\n  };\n\n  /** Re-usable logic for rotating */\n  const updateT = ({ t, down }: { t: number; down: boolean }) => {\n    setControlRot({\n      theta: t,\n      // reset immediate value from warp function\n      immediate: false,\n      config: down ? conf.user.rotCtrl : conf.default.rotCtrl,\n    });\n  };\n\n  return {\n    handlers: {\n      // prevent some browser events such as swipe-based navigation or\n      // pinch-based zoom and instead redirect them to this handler\n      // onDragStart: ({ event }: FullGestureState<StateKey<'drag'>>) =>\n      //   event?.preventDefault(),\n      // onPinchStart: ({ event }: FullGestureState<StateKey<'pinch'>>) =>\n      //   event?.preventDefault(),\n      // onWheelStart: ({ event }: FullGestureState<StateKey<'wheel'>>) =>\n      //   event?.preventDefault(),\n\n      onPinch: ({\n        event,\n        da: [d, a],\n        vdva: [vd, va],\n        down,\n        movement: [md, ma],\n        delta: [dd, da],\n        first,\n        // initial, // initial [d, a]\n        origin,\n        memo = {\n          xy: xy.getValue(),\n          z: z.getValue(),\n          t: theta.getValue(),\n          a: 0,\n          o: [0, 0] as Vector2,\n        },\n      }: FullGestureState<StateKey<'pinch'>>) => {\n        // disable native browser events\n        event && event.preventDefault();\n\n        if (first) {\n          // remember the angle, location at which the pinch gesture starts\n          // memo.a = a;\n          memo.o = origin;\n        }\n\n        // new zoom is the product of initial zoom and a function of the delta since the pinch\n        //   (initial zoom) exponentially changed by md, with linear and exponential multipliers\n        //     linear multiplier:\n        //     exponential multiplier: scale faster as pinch becomes more distant\n        //     if decreasing, scale must decrease more slowly\n        // const em = 1.33;\n        // const newZ =\n        //   memo.z * (1 + Math.sign(md) * 1e-2 * Math.abs(md) ** (md <= 0 ? 1 / em : em)); //(1 - zdelta * Math.abs(zdelta));\n        const newZ =\n          _.clamp(memo.z + md * 1e-2, 0.5, maxZoom.getValue()) ** (1 + md * 1e-3); //(1 - zdelta * Math.abs(zdelta));\n        // console.log(Math.abs(md * 1e-2));\n        // console.log(\n        //   md.toFixed(2) + ' => ' + 1e-2 * Math.abs(md) ** (md <= 0 ? 0.8 : 1.1),\n        // );\n        // console.log(newZ);\n        const newZclamp = _.clamp(newZ, minZoom.getValue(), maxZoom.getValue());\n\n        const realZoom = getRealZoom(newZclamp);\n\n        // get movement of pointer origin for panning\n        const [px, py]: Vector2 = vScale(-2 / realZoom, subV(origin, memo.o));\n        const relMove: Vector2 = [px, -py];\n\n        // setControlXY({\n        //   //\n        //   xy: addV(memo.xy, vRotate(theta.getValue(), relMove)),\n        //   immediate: false,\n        // });\n        // updateZ({});\n        updateXY({\n          xy: memo.xy,\n          theta: theta.getValue(),\n          relMove: relMove,\n          down: down,\n        });\n\n        // setControlZoom({\n        //   z: newZclamp,\n        //   immediate: false,\n        //   config: down ? springsConfigs.user.zoom : springsConfigs.default.zoom,\n        // });\n        updateZ({ z: newZclamp, down: down });\n\n        updateT({\n          t: memo.t + degToRad(ma),\n          down: down,\n        });\n\n        return memo;\n      },\n\n      onWheel: ({\n        event,\n        movement: [, my],\n        active,\n        shiftKey,\n        memo = { zoom: z.getValue(), t: theta.getValue() },\n      }: FullGestureState<StateKey<'wheel'>>) => {\n        // disable native browser events\n        event && event.preventDefault();\n\n        if (shiftKey) {\n          // if shift is pressed, rotate instead of zoom\n          const newT = memo.t + my * 1.5e-3;\n\n          updateT({\n            t: newT,\n            down: active,\n          });\n        } else {\n          // set different multipliers based on zoom direction\n          // mouse movement negative = move up the page = zoom in\n          //                                   zoom        in           out\n          const newZ = memo.zoom * (1 - my * (my < 0 ? zoomMult.in : zoomMult.out));\n\n          // setControlZoom({\n          //   z: _.clamp(newZ, minZoom.getValue(), maxZoom.getValue()),\n          //   config: active ? springsConfigs.user.zoom : springsConfigs.default.zoom,\n          //   // reset immediate value from warp function\n          //   immediate: false,\n          // });\n          updateZ({\n            z: _.clamp(newZ, minZoom.getValue(), maxZoom.getValue()),\n            down: active,\n          });\n        }\n        return memo;\n      },\n\n      onDrag: ({\n        event,\n        down,\n        movement,\n        direction: [dx, dy],\n        velocity,\n        pinching,\n        last,\n        cancel,\n        memo = { xy: xy.getValue(), theta: theta.getValue() },\n      }: FullGestureState<StateKey<'drag'>>) => {\n        // disable native browser events\n        event && event.preventDefault();\n\n        // let pinch handle movement\n        if (pinching) cancel && cancel();\n        // change according to this formula:\n        // move (x, y) in the opposite direction of drag (pan with cursor)\n        // divide by canvas size to scale appropriately\n        // multiply by 2 to correct scaling on viewport (?)\n        // use screen multiplier for more granularity\n        const realZoom = getRealZoom(z.getValue());\n\n        const [px, py]: Vector = vScale(-2 / realZoom, movement);\n        // const relMove: Vector = vScale(2 / realZoom, movement);\n\n        const relMove: Vector = [px, -py];\n        // const relDir: Vector = [dx, -dy];\n\n        // const t = theta.getValue();\n\n        // const vecXY = addV(memo.xy, vRotate(t, relMove)); // add the displacement to the starting position\n        // const velXY = vScale(velocity, vNorm(vecXY))\n\n        // setControlXY({\n        //   // add to the current position the relative displacement (relMove), rotated by theta,\n        //   // to maintain the correct displacement direction (without this it would move as if theta=0)\n        //   xy: vecXY,\n        //   // immediate: down, // immediately apply if the gesture is active\n        //   config: down ? springsConfigs.user.xy : springsConfigs.default.xy,\n        //   // reset immediate value from warp function\n        //   immediate: false,\n        //   //  {\n        //   //   // velocity also needs to be rotated according to theta\n        //   //   // -@ts-expect-error - velocity should be `[number, number]`, but only `number` allowed\n        //   //   // velocity: vScale(-velocity / realZoom, vRotate(t, relDir)), // set the velocity (gesture momentum)\n        //   //   // velocity: vMag(vScale(-velocity / realZoom, vRotate(t, relDir))), // set the velocity (gesture momentum)\n        //   //   // velocity: velocity / screenScaleMultiplier, // set the velocity (gesture momentum)\n        //   //   // mass: down ? 1 : 5,\n        //   //   ...xyCtrlSpringConfig,\n        //   //   tension: down ? xyCtrlSpringConfig.tension : xyCtrlSpringConfig.tension / 2,\n        //   //   // -@ts-expect-error - decay is undocumented?\n        //   //   // decay: true,\n        //   // },\n        // });\n\n        updateXY({\n          xy: memo.xy,\n          theta: theta.getValue(),\n          relMove: relMove,\n          down: down,\n        });\n\n        // tell the renderer that it's being dragged on\n        setDragging(down);\n\n        return memo;\n      },\n    },\n    config: {\n      eventOptions: { passive: false, capture: false },\n      domTarget: domTarget,\n      // The config object passed to useGesture has drag, wheel, scroll, pinch and move keys\n      // for specific gesture options. See here for more details.\n      // drag: {\n      //   bounds,\n      //   rubberband: true,\n      // }\n    },\n  };\n}\n\n/**\n * Warps the given controller to a desired viewer location.\n * @param controls The controller to be animated\n * @param location The (partial) viewer location to warp to: xy, zoom, theta\n * @param immediate Should the update happen immediately? (Useful for testing)\n */\nexport const warpToPoint = (\n  { xyCtrl: [, setXY], zoomCtrl: [, setZ], rotCtrl: [, setR] }: ViewerControlSprings,\n  // warp destination\n  { xy, z, theta }: Partial<ViewerLocation>,\n  precision: precisionSpecifier,\n  immediate = false,\n): void => {\n  const conf = springsConfigs(precision);\n  // can't do a simple \"if (x)\" check since values could be zero (evaluates to \"false\")\n  if (xy !== undefined) {\n    setXY({\n      // use screen scale multiplier for a simpler API\n      xy: xy,\n      config: conf.default.xyCtrl,\n      immediate: immediate,\n    });\n  }\n  if (z !== undefined) {\n    setZ({\n      z: z,\n      config: conf.default.zoomCtrl,\n      immediate: immediate,\n    });\n  }\n  if (theta !== undefined) {\n    setR({\n      theta: theta,\n      config: conf.default.rotCtrl,\n      immediate: immediate,\n    });\n  }\n};\n\n// no longer using screenScaleMultiplier\n// export const screenToReal = (x: number): number => x * screenScaleMultiplier;\n// export const RealToScreen = (x: number): number => x / screenScaleMultiplier;\n\nexport const Rgb255ColourToFloat = (c: RgbColor): RgbFloatColour =>\n  [c.r, c.g, c.b].map((e) => e / 255) as RgbFloatColour;\n","import { Button, Card, Grid, TextField } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { ChangeCoordinatesCardProps } from '../../common/info';\nimport { warpToPoint } from '../../common/utils';\nimport { defaultMandelbrotStart } from '../../common/values';\n\nconst ChangeCoordinatesCard = ({\n  precision,\n  ...props\n}: ChangeCoordinatesCardProps): JSX.Element => {\n  const [xy, setXY] = useState(defaultMandelbrotStart.xy);\n  const [x, y] = xy;\n  const [zoom, setZoom] = useState(defaultMandelbrotStart.z);\n  const [theta, setTheta] = useState(defaultMandelbrotStart.theta);\n\n  return (\n    <Card\n      style={{\n        width: 'auto',\n        zIndex: 1300,\n        position: 'relative',\n        padding: 8,\n        display: 'flex',\n        flexDirection: 'column',\n        flexShrink: 1,\n        // borderRadius: 100,\n      }}\n    >\n      <Grid container direction=\"column\" alignItems=\"center\">\n        <TextField\n          size=\"small\"\n          style={{ width: '12ch' }}\n          onChange={(e) => setXY(([x, y]) => [Number(e.target.value), y])}\n          type=\"number\"\n          defaultValue={x}\n          inputProps={{ step: 0.01 }}\n          label=\"x\"\n        />\n        <TextField\n          size=\"small\"\n          style={{ width: '12ch' }}\n          onChange={(e) => setXY(([x, y]) => [x, Number(e.target.value)])}\n          type=\"number\"\n          defaultValue={y}\n          inputProps={{ step: 0.01 }}\n          label=\"y\"\n        />\n        <Grid container direction=\"row\" justify=\"space-around\">\n          <TextField\n            size=\"small\"\n            style={{ width: '5ch' }}\n            onChange={(e) => setZoom(Number(e.target.value))}\n            type=\"number\"\n            defaultValue={zoom}\n            inputProps={{ min: 0 }}\n            label=\"zoom\"\n          />\n          <TextField\n            size=\"small\"\n            style={{ width: '5ch' }}\n            onChange={(e) => setTheta(Number(e.target.value))}\n            type=\"number\"\n            defaultValue={theta}\n            inputProps={{ step: 0.1 }}\n            label=\"theta\"\n          />\n        </Grid>\n        <Button\n          style={{ marginTop: 12 }}\n          onClick={() =>\n            warpToPoint(props.mandelbrot, { xy: xy, z: zoom, theta: theta }, precision)\n          }\n        >\n          Go\n        </Button>\n      </Grid>\n    </Card>\n  );\n};\n\nexport default ChangeCoordinatesCard;\n","import { Card, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { animated } from 'react-spring';\nimport { CoordinatesCardProps } from '../../common/info';\nimport {} from '../../common/values';\n\nconst CoordinatesCard = ({\n  mandelbrot,\n  precisionFormatter,\n}: CoordinatesCardProps): JSX.Element => {\n  return (\n    <Card\n      style={{\n        width: 'auto',\n        zIndex: 1300,\n        position: 'relative',\n        padding: '6px 12px',\n        marginBottom: 8,\n        // borderRadius: 100,\n      }}\n    >\n      <Typography align=\"right\" style={{ fontFamily: 'monospace', fontSize: '1.2rem' }}>\n        {/* https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple */}\n        {/* https://www.typescriptlang.org/docs/handbook/2/objects.html#tuple-types */}\n        <animated.span>\n          {mandelbrot.xy.interpolate(\n            // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\n            (x, y) => `${precisionFormatter.toFloatDisplayFixed(x)} : x`,\n          )}\n        </animated.span>\n        <br />\n        <animated.span>\n          {mandelbrot.xy.interpolate(\n            // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\n            (x, y) => `${precisionFormatter.toFloatDisplayFixed(y)} : y`,\n          )}\n        </animated.span>\n        <br />\n        <animated.span>\n          {mandelbrot.zoom.interpolate(\n            (z) => `${precisionFormatter.toFloatDisplayShort(z)} : z`,\n          )}\n        </animated.span>\n        <br />\n        <animated.span>\n          {mandelbrot.theta.interpolate(\n            (t) => `${precisionFormatter.toFloatDisplayShort(t)} : t`,\n          )}\n        </animated.span>\n      </Typography>\n    </Card>\n  );\n};\n\nexport default CoordinatesCard;\n\n// <Card\n//   style={{\n//     width: 'auto',\n//     position: 'absolute',\n//     zIndex: 2,\n//     right: 0,\n//     top: 0,\n//     margin: 20,\n//     padding: 8,\n//     display: settings.coords[0] ? 'block' : 'none',\n//     // borderRadius: 100,\n//   }}\n// >\n//   <Typography align=\"right\">\n//     {/* https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple */}\n//     {/* https://www.typescriptlang.org/docs/handbook/2/objects.html#tuple-types */}\n//     <animated.span>\n//       {mandelbrotControls.xyCtrl[0].xy.interpolate(\n//         // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\n//         (x, y) => `${(x * screenScaleMultiplier).toFixed(7)} : x`,\n//       )}\n//     </animated.span>\n//     <br />\n//     <animated.span>\n//       {mandelbrotControls.xyCtrl[0].xy.interpolate(\n//         // @ts-expect-error: Function call broken in TS, waiting till react-spring v9 to fix\n//         (x, y) => `${(y * screenScaleMultiplier).toFixed(7)} : y`,\n//       )}\n//     </animated.span>\n//   </Typography>\n// </Card>;\n","import { Grow } from '@material-ui/core';\nimport React from 'react';\nimport { CoordinateInterfaceProps } from '../../common/info';\nimport ChangeCoordinatesCard from './ChangeCoordinatesCard';\nimport CoordinatesCard from './CoordinatesCard';\n\nexport const CoordinateInterface = ({\n  mandelbrot,\n  precision,\n  precisionFormatter,\n  show,\n}: CoordinateInterfaceProps): JSX.Element => {\n  const {\n    // props.mandelbrot.xyCtrl[0].xy,\n    xyCtrl: [{ xy }],\n    // props.mandelbrot.zoomCtrl[0].z,\n    zoomCtrl: [{ z }],\n    // props.mandelbrot.rotCtrl[0].theta,\n    rotCtrl: [{ theta }],\n  } = mandelbrot;\n  return (\n    <Grow\n      in={show}\n      style={{\n        position: 'absolute',\n        right: 0,\n        top: 0,\n        margin: 20,\n        width: 'auto',\n        zIndex: 1,\n      }}\n    >\n      <div>\n        <CoordinatesCard\n          mandelbrot={{\n            xy: xy,\n            zoom: z,\n            theta: theta,\n          }}\n          precisionFormatter={precisionFormatter}\n        />\n        <ChangeCoordinatesCard mandelbrot={mandelbrot} precision={precision} />\n      </div>\n    </Grow>\n  );\n};\n\nexport default CoordinateInterface;\n","export default __webpack_public_path__ + \"static/media/logo-192.6d04f0d3.png\";","import {\n  createStyles,\n  Divider,\n  IconButton,\n  Theme,\n  Typography,\n  withStyles,\n  WithStyles,\n} from '@material-ui/core';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\nimport React, { PropsWithChildren } from 'react';\nimport MandelbrotMapsLogo from '../../img/logo-192.png';\n\nconst dialogStyles = (theme: Theme) =>\n  createStyles({\n    root: {\n      margin: 0,\n      // padding: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\n      padding: theme.spacing(1),\n      // https://material-ui.com/customization/breakpoints/#css-media-queries\n      // [theme.breakpoints.up('sm')]: {\n      //   padding: theme.spacing(1),\n      // },\n      display: 'flex',\n      flexDirection: 'row',\n      // align: \"middle\",\n    },\n    image: {\n      marginTop: 'auto',\n      marginBottom: 'auto',\n      height: 48,\n    },\n    titleText: {\n      fontSize: 24,\n      margin: 'auto 16px',\n      display: 'flex',\n      alignItems: 'center',\n      // alignContent: 'center',\n      justifyContent: 'center',\n      flexGrow: 1,\n    },\n    // closeButton: {\n    //   color: theme.palette.grey[500],\n    // },\n  });\n\nexport interface DialogTitleProps\n  extends PropsWithChildren<WithStyles<typeof dialogStyles>> {\n  onClose: () => void;\n  id?: string;\n}\n\n// https://material-ui.com/guides/typescript/#usage-of-withstyles\nexport const DialogTitle = withStyles(dialogStyles)(\n  ({ children, classes, onClose, ...other }: DialogTitleProps) => {\n    return (\n      <MuiDialogTitle disableTypography className={classes.root} {...other}>\n        <img\n          src={MandelbrotMapsLogo}\n          alt=\"Mandelbrot Maps logo\"\n          className={classes.image}\n        />\n        <Typography variant=\"h1\" align=\"center\" className={classes.titleText}>\n          {children}\n        </Typography>\n        {onClose ? (\n          <IconButton aria-label=\"close\" color=\"secondary\" onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        ) : null}\n      </MuiDialogTitle>\n    );\n  },\n);\n\nexport const DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(1.5),\n    // https://material-ui.com/customization/breakpoints/#css-media-queries\n    [theme.breakpoints.up('sm')]: {\n      padding: theme.spacing(3),\n    },\n  },\n}))(MuiDialogContent);\n\nexport const DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n    // https://material-ui.com/customization/breakpoints/#css-media-queries\n    // [theme.breakpoints.up('sm')]: {\n    //   padding: theme.spacing(1.5),\n    // },\n  },\n}))(MuiDialogActions);\n\nexport const DialogDivider = (): JSX.Element => (\n  <Divider style={{ marginTop: 20, marginBottom: 20 }} />\n);\n\nexport const Alert = (props: AlertProps): JSX.Element => (\n  <MuiAlert elevation={6} variant=\"filled\" {...props} />\n);\n","import mdBasics from './basics.md';\n// import mdControls from './controls.md';\nimport mdSettings from './settings.md';\n\nexport const helptext = [\n  mdBasics,\n  // mdControls,\n  mdSettings,\n];\n\nexport default helptext;\n","export default __webpack_public_path__ + \"static/media/basics.af417e96.md\";","export default __webpack_public_path__ + \"static/media/settings.2e960510.md\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1,.cls-10{fill:none;stroke-miterlimit:10;}.cls-1{stroke:#29abe2;stroke-linecap:round;stroke-width:4px;}.cls-2{fill:#1a1a1a;}.cls-3{fill:#f2f2f2;}.cls-4{fill:#363636;}.cls-5{fill:#fff;}.cls-6{fill:#da4f00;}.cls-7{fill:#f79b12;}.cls-8{fill:#2bcb71;}.cls-9{opacity:0.5;isolation:isolate;}.cls-10{stroke:#333;}\"));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"info\"\n}, /*#__PURE__*/React.createElement(\"line\", {\n  className: \"cls-1\",\n  x1: 113.71,\n  y1: 316.52,\n  x2: 113.71,\n  y2: 408.52\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M144.38,328.09l1.28,22.55h-2.15l-.84-12.43c0-.75-.08-1.55-.12-2.41s-.07-1.67-.09-2.47,0-1.48-.06-2.06,0-1,0-1.16l-4.18,16.42h-2.5l-4.48-16.42v1.21c0,.61,0,1.33,0,2.14s0,1.64,0,2.48-.05,1.58-.08,2.23l-.74,12.47h-2.1l1.28-22.55H133l4,15.7,3.83-15.7Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M151.21,337a1.3,1.3,0,0,1-2.59,0,1.3,1.3,0,0,1,2.59,0Zm0,12.74a1.3,1.3,0,1,1-1.31-1.28A1.25,1.25,0,0,1,151.21,349.71Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M183.18,350.64H181.7l.42-10.72c.13-3.55.29-7.62.48-9.76L174.31,348h-1.47l-3.42-17.82c-.39,2.08-1.38,6.27-2.18,9.66l-2.56,10.79h-1.44l5.22-21.89h2.08l3.26,17.47,8-17.47H184Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M202.22,335l-1.76,12.09c-.2,1.54-.13,2.4,1,2.85L201,351c-1.31-.39-2.14-1.09-2-3.11a6.39,6.39,0,0,1-5.22,3.11c-3.29,0-5.25-2.47-5.25-6.5,0-4.51,2.28-10.88,8.48-10.88A10.32,10.32,0,0,1,202.22,335Zm-12.07,9.5c0,3.42,1.41,5.25,3.84,5.25,2.15,0,3.75-1.38,5.19-3.71l1.47-10.31a7,7,0,0,0-3.55-.86C192,334.83,190.15,340.56,190.15,344.46Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M220.17,338.83l-1.67,11.81H217l1.67-11.75c.38-2.81-.58-4-2.56-4-2.6,0-4.74,2.5-6.53,5.79l-1.41,10h-1.47l2.37-16.71h1.24l-.48,4.48c1.7-3,4-4.8,6.53-4.8C219.24,333.61,220.65,335.53,220.17,338.83Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M240,327.12l-3.33,23.52h-1.25l.29-3.62c-1.18,2.08-3,4-5.69,4-3.14,0-5.09-2.47-5.09-6.56,0-4.35,2-10.82,7.84-10.82a5,5,0,0,1,4.48,2.37l1.28-9.05Zm-13.5,17.34c0,3.42,1.4,5.25,3.71,5.25,2.59,0,4.19-2,5.82-4.83l1-7.43a4.38,4.38,0,0,0-4.09-2.59C228.17,334.86,226.54,340.59,226.54,344.46Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M244.9,344v.32c0,3.81,1.83,5.41,4.48,5.41a7.68,7.68,0,0,0,4.8-1.73l.71,1.05a9,9,0,0,1-5.57,2c-3.74,0-5.95-2.4-5.95-6.69,0-4.7,2.53-10.69,8.48-10.69,3,0,4.83,1.67,4.83,3.94C256.68,341.71,252,343.47,244.9,344Zm.1-1.22c6.66-.48,10.14-2,10.14-5.12,0-1.5-1-2.75-3.29-2.75C247.46,334.86,245.41,339,245,342.73Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M261.8,348c-.16,1.12.13,1.7,1.12,1.7a3.75,3.75,0,0,0,1.25-.26l.35,1.15a4.31,4.31,0,0,1-1.79.42c-1.73,0-2.69-1-2.37-3.2l2.91-20.67,1.47-.19Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M283,339.85c0,4.52-2.08,11.14-8.51,11.14a14.07,14.07,0,0,1-5.34-1.09l3.23-22.78,1.47-.19-1.28,9.28a7.29,7.29,0,0,1,5.41-2.6C281.16,333.61,283,335.79,283,339.85Zm-10.65-2L270.82,349a8.68,8.68,0,0,0,3.72.74c5.37,0,7-6.11,7-9.92,0-3.33-1.38-4.93-3.74-4.93S273.9,336.14,272.36,337.84Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M297.45,333.84l-.42,1.34a5.42,5.42,0,0,0-1.31-.19c-2.59,0-4.13,2.27-5.6,5.89l-1.41,9.76h-1.47l2.37-16.71h1.28l-.52,4.29c1.25-2.88,2.95-4.61,5.48-4.61A5.27,5.27,0,0,1,297.45,333.84Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M298.69,344.27c0-4.26,2.05-10.66,8.26-10.66,3.74,0,5.92,2.37,5.92,6.63s-2,10.75-8.26,10.75C300.87,351,298.69,348.46,298.69,344.27Zm12.64-4.1c0-3.48-1.6-5.31-4.41-5.31-5.15,0-6.69,5.92-6.69,9.51s1.6,5.31,4.42,5.31C309.73,349.68,311.33,343.88,311.33,340.17Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M319.11,346.64c-.29,2,.32,3,2.08,3a6.24,6.24,0,0,0,2.82-.8l.54,1.08a6.76,6.76,0,0,1-3.52,1c-2.4,0-3.81-1.51-3.39-4.32l1.63-11.49h-2.82l.2-1.25h2.81l.87-4.09,1.15-.13-.58,4.22h4.39l-.36,1.25h-4.22Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M347.78,335.44l-.8.89a6.43,6.43,0,0,0-4.19-1.47c-2.5,0-4.16,1.15-4.16,3.07,0,1.44.83,2.34,3.74,3.24,3.33,1.05,4.67,2.4,4.67,4.76,0,2.82-2.17,5.06-6.33,5.06a8,8,0,0,1-5.79-2.21l.86-.9a7.22,7.22,0,0,0,4.9,1.8c2.91,0,4.83-1.28,4.83-3.65,0-1.79-.83-2.72-3.94-3.68-3.42-1.06-4.44-2.37-4.44-4.38,0-2.44,2.2-4.36,5.66-4.36A7.08,7.08,0,0,1,347.78,335.44Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M352.77,344v.32c0,3.81,1.83,5.41,4.48,5.41a7.66,7.66,0,0,0,4.8-1.73l.71,1.05a9,9,0,0,1-5.57,2c-3.74,0-5.95-2.4-5.95-6.69,0-4.7,2.53-10.69,8.48-10.69,3,0,4.83,1.67,4.83,3.94C364.55,341.71,359.88,343.47,352.77,344Zm.1-1.22c6.66-.48,10.14-2,10.14-5.12,0-1.5-1-2.75-3.29-2.75C355.33,334.86,353.29,339,352.87,342.73Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M369.93,346.64c-.29,2,.31,3,2.07,3a6.2,6.2,0,0,0,2.82-.8l.55,1.08a6.79,6.79,0,0,1-3.52,1c-2.4,0-3.81-1.51-3.4-4.32l1.63-11.49h-2.81l.19-1.25h2.82l.86-4.09,1.15-.13-.57,4.22h4.38l-.35,1.25h-4.22Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M143.1,372V387.2a11.76,11.76,0,0,1-.3,2.58,7.48,7.48,0,0,1-1.09,2.49,5.86,5.86,0,0,1-2.22,1.86,8.18,8.18,0,0,1-3.68.71,10.15,10.15,0,0,1-3.1-.51,9.69,9.69,0,0,1-2.9-1.52l1-1.46a10.24,10.24,0,0,0,2.83,1.28,9.31,9.31,0,0,0,2.19.31,4.65,4.65,0,0,0,3.85-1.62A6.77,6.77,0,0,0,141,387V373.79H134.4V372Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M151.21,380.84a1.3,1.3,0,1,1-1.31-1.28A1.25,1.25,0,0,1,151.21,380.84Zm0,12.73a1.3,1.3,0,0,1-2.59,0,1.3,1.3,0,0,1,2.59,0Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M167,391.65c-.54,3.65-1.82,5-5.56,6.47l-.36-1.16c3.08-1.34,4-2.49,4.39-5.5l2.65-18.85h1.54Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M174.09,389.67l1.66-11.87h1.47l-1.66,11.84c-.38,2.75.64,3.93,2.59,3.93,2.69,0,4.8-2.53,6.34-5.76l1.4-10h1.48L185,394.5h-1.19l.52-4.64c-1.41,2.88-3.59,5-6.4,5S173.64,392.93,174.09,389.67Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M193.74,391.84c-.16,1.12.12,1.7,1.12,1.7a3.69,3.69,0,0,0,1.24-.26l.35,1.15a4.24,4.24,0,0,1-1.79.42c-1.72,0-2.68-1-2.36-3.2L195.21,371l1.47-.19Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M202.44,394.5H201l2.37-16.7h1.47Zm1.34-22.56a1.21,1.21,0,0,1,1.25-1.25,1,1,0,0,1,1,1,1.21,1.21,0,0,1-1.22,1.25A1,1,0,0,1,203.78,371.94Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M222.73,378.82,221,390.92c-.2,1.53-.13,2.4,1,2.84l-.42,1.09c-1.31-.38-2.14-1.09-2-3.1a6.4,6.4,0,0,1-5.22,3.1c-3.29,0-5.24-2.46-5.24-6.49,0-4.52,2.27-10.88,8.47-10.88A10.32,10.32,0,0,1,222.73,378.82Zm-12.07,9.5c0,3.43,1.41,5.25,3.84,5.25,2.15,0,3.75-1.37,5.19-3.71l1.47-10.3a6.88,6.88,0,0,0-3.55-.87C212.49,378.69,210.66,384.42,210.66,388.32Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M247.24,379.3l-.8.9a6.45,6.45,0,0,0-4.19-1.48c-2.5,0-4.16,1.16-4.16,3.08,0,1.44.83,2.33,3.74,3.23,3.33,1.05,4.67,2.4,4.67,4.76,0,2.82-2.17,5.06-6.33,5.06a8,8,0,0,1-5.79-2.21l.86-.89a7.24,7.24,0,0,0,4.9,1.79c2.91,0,4.83-1.28,4.83-3.65,0-1.79-.84-2.72-3.94-3.68-3.42-1-4.45-2.37-4.45-4.38,0-2.43,2.21-4.35,5.67-4.35A7.11,7.11,0,0,1,247.24,379.3Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M252.23,387.81v.32c0,3.81,1.82,5.41,4.48,5.41a7.68,7.68,0,0,0,4.8-1.73l.7,1.06a9,9,0,0,1-5.56,2c-3.75,0-6-2.4-6-6.69,0-4.7,2.53-10.68,8.48-10.68,3,0,4.84,1.66,4.84,3.93C264,385.57,259.33,387.33,252.23,387.81Zm.1-1.21c6.65-.48,10.14-2,10.14-5.12,0-1.51-1-2.76-3.3-2.76C254.79,378.72,252.74,382.88,252.33,386.6Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M269.38,390.5c-.28,2,.32,3,2.08,3a6.2,6.2,0,0,0,2.82-.8l.54,1.09a6.72,6.72,0,0,1-3.52,1c-2.4,0-3.81-1.5-3.39-4.32L269.54,379h-2.81l.19-1.24h2.82l.86-4.1,1.15-.13-.58,4.23h4.39l-.35,1.24H271Z\"\n}));\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"l\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M244.65,277.51h11.44l-.52,1.76H242.45l3.88-27.35h1.88Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M277.45,259.68l-2.2,15.11c-.24,1.92-.16,3,1.24,3.56l-.52,1.36c-1.64-.48-2.68-1.36-2.48-3.88a8,8,0,0,1-6.52,3.88c-4.12,0-6.56-3.08-6.56-8.12,0-5.63,2.84-13.59,10.6-13.59A12.87,12.87,0,0,1,277.45,259.68Zm-15.08,11.87c0,4.28,1.76,6.56,4.8,6.56,2.68,0,4.68-1.72,6.48-4.64l1.84-12.87a8.68,8.68,0,0,0-4.44-1.08C264.65,259.52,262.37,266.67,262.37,271.55Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M299.89,264.51l-2.08,14.76H296l2.08-14.68c.48-3.51-.72-5-3.2-5-3.24,0-5.92,3.11-8.16,7.23l-1.76,12.48h-1.84l3-20.87h1.56L287,264c2.12-3.76,5-6,8.16-6C298.73,258,300.49,260.4,299.89,264.51Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M324.73,249.88l-4.16,29.39H319l.36-4.52c-1.48,2.6-3.72,5-7.12,5-3.92,0-6.36-3.08-6.36-8.2,0-5.44,2.52-13.51,9.8-13.51a6.2,6.2,0,0,1,5.6,3l1.6-11.32Zm-16.88,21.67c0,4.28,1.76,6.56,4.64,6.56,3.24,0,5.24-2.52,7.28-6l1.28-9.28a5.51,5.51,0,0,0-5.12-3.23C309.89,259.56,307.85,266.71,307.85,271.55Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M343,260.28l-1,1.12a8,8,0,0,0-5.24-1.84c-3.12,0-5.2,1.44-5.2,3.84,0,1.8,1,2.91,4.68,4,4.16,1.32,5.84,3,5.84,6,0,3.52-2.72,6.32-7.92,6.32a10,10,0,0,1-7.24-2.76l1.08-1.12a9,9,0,0,0,6.12,2.24c3.64,0,6-1.6,6-4.56,0-2.24-1-3.4-4.92-4.6-4.28-1.32-5.56-3-5.56-5.47,0-3,2.76-5.44,7.08-5.44A8.89,8.89,0,0,1,343,260.28Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M363.13,260.08l-1.08,1.16a6.2,6.2,0,0,0-4.44-1.68c-6.24,0-8.36,7.11-8.36,11.83,0,4.52,2.16,6.64,5.6,6.64a8.91,8.91,0,0,0,5.24-1.8l.84,1.32a10,10,0,0,1-6.16,2.16c-4.52,0-7.44-3-7.44-8.4S350.09,258,357.65,258A7.39,7.39,0,0,1,363.13,260.08Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M382.93,259.68l-2.2,15.11c-.24,1.92-.16,3,1.24,3.56l-.52,1.36c-1.64-.48-2.68-1.36-2.48-3.88a8,8,0,0,1-6.52,3.88c-4.12,0-6.56-3.08-6.56-8.12,0-5.63,2.84-13.59,10.6-13.59A12.87,12.87,0,0,1,382.93,259.68Zm-15.08,11.87c0,4.28,1.76,6.56,4.8,6.56,2.68,0,4.68-1.72,6.48-4.64L381,260.6a8.68,8.68,0,0,0-4.44-1.08C370.13,259.52,367.85,266.67,367.85,271.55Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M391.53,258.4h1.6l-.24,3a9.12,9.12,0,0,1,6.84-3.36c4,0,6.28,2.72,6.28,7.79,0,5.64-2.56,13.92-10.6,13.92a12.66,12.66,0,0,1-4.92-.92l-1.2,8.36-1.84.24Zm12.6,7.31c0-4.19-1.68-6.15-4.68-6.15s-4.84,1.56-6.72,3.72l-2,13.91a10.85,10.85,0,0,0,4.64.92C402.13,278.11,404.13,270.47,404.13,265.71Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M412.85,270.91v.4c0,4.76,2.28,6.76,5.6,6.76a9.6,9.6,0,0,0,6-2.16l.88,1.32a11.29,11.29,0,0,1-7,2.48c-4.68,0-7.44-3-7.44-8.36,0-5.88,3.16-13.35,10.6-13.35,3.8,0,6,2.08,6,4.92C427.57,268.11,421.73,270.31,412.85,270.91Zm.12-1.52c8.32-.6,12.68-2.51,12.68-6.39,0-1.88-1.28-3.44-4.12-3.44C416.05,259.56,413.49,264.75,413,269.39Z\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"browser\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Rounded_Rectangle_1\",\n  \"data-name\": \"Rounded Rectangle 1\",\n  className: \"cls-3\",\n  d: \"M184.78,13.93H485.22A4.77,4.77,0,0,1,490,18.69V211.31a4.77,4.77,0,0,1-4.78,4.76H184.78a4.77,4.77,0,0,1-4.78-4.76V18.69A4.77,4.77,0,0,1,184.78,13.93Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Top_dark\",\n  \"data-name\": \"Top dark\",\n  className: \"cls-4\",\n  d: \"M184.78,13.93H485.22A4.77,4.77,0,0,1,490,18.69V30.57H180V18.69A4.77,4.77,0,0,1,184.78,13.93Z\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Adressbar\",\n  className: \"cls-5\",\n  x: 243.8,\n  y: 17.74,\n  width: 193.39,\n  height: 9.51,\n  rx: 2.41\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Circles_2\",\n  \"data-name\": \"Circles 2\"\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"_1\",\n  \"data-name\": 1,\n  className: \"cls-6\",\n  cx: 188.56,\n  cy: 22.49,\n  r: 2.38\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"_2\",\n  \"data-name\": 2,\n  className: \"cls-7\",\n  cx: 197.12,\n  cy: 22.49,\n  r: 2.38\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"_3\",\n  \"data-name\": 3,\n  className: \"cls-8\",\n  cx: 205.68,\n  cy: 22.49,\n  r: 2.38\n})), /*#__PURE__*/React.createElement(\"image\", {\n  id: \"menu_light\",\n  \"data-name\": \"menu light\",\n  className: \"cls-9\",\n  width: 16,\n  height: 13,\n  transform: \"translate(472.79 19.16) scale(0.48 0.48)\",\n  xlinkHref: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAACXBIWXMAABc4AAAXOAGuwzgqAAAAP0lEQVQoU2P8//+/LwMDAzMDeeAv4////wkpwguYCCkgBIaBASwMDAzBDAwMrIQU4gC/R2OBCgawMDAwUJQXANvLDQCp8gj+AAAAAElFTkSuQmCC\"\n})), /*#__PURE__*/React.createElement(\"line\", {\n  className: \"cls-10\",\n  x1: 334.15,\n  y1: 216.07,\n  x2: 334.15,\n  y2: 30.57\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M423.92,95.37v31.44a24,24,0,0,1-.63,5.34,14.92,14.92,0,0,1-2.25,5.12,11.76,11.76,0,0,1-4.57,3.84,16.83,16.83,0,0,1-7.58,1.48,20.69,20.69,0,0,1-6.4-1.07,19.92,19.92,0,0,1-6-3.13l2.13-3a20.86,20.86,0,0,0,5.84,2.64,19.37,19.37,0,0,0,4.52.64c3.5,0,6.14-1.12,7.94-3.35s2.69-5.22,2.69-9V99.16H406V95.37Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M272.41,95.37l2.64,46.51h-4.44l-1.72-25.63c-.09-1.55-.18-3.21-.26-5s-.14-3.46-.18-5.09-.09-3.06-.12-4.25-.06-2-.09-2.41l-8.63,33.88h-5.14l-9.24-33.88c0,.41,0,1.25,0,2.51s0,2.74,0,4.42,0,3.38-.07,5.11-.1,3.25-.17,4.58l-1.52,25.73H239.1l2.64-46.51H249l8.26,32.39,7.89-32.39Z\"\n}));\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"p\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M26.75,258.72c0,4.87-2.56,9.71-11.28,9.71H11.31L9.79,279.27H7.87l3.88-27.35h6.08C23.51,251.92,26.75,254,26.75,258.72Zm-2,0c0-3.8-2.6-5.16-7.12-5.16H13.39l-1.84,13.19h4.08C22.91,266.75,24.79,262.79,24.79,258.72Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M29.87,271.31C29.87,266,32.43,258,40.19,258c4.68,0,7.4,3,7.4,8.27s-2.48,13.44-10.32,13.44C32.59,279.71,29.87,276.55,29.87,271.31Zm15.8-5.12c0-4.36-2-6.63-5.52-6.63-6.44,0-8.36,7.39-8.36,11.87s2,6.64,5.52,6.64C43.67,278.07,45.67,270.83,45.67,266.19Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M65.67,258.28,65.15,260a6.45,6.45,0,0,0-1.64-.24c-3.24,0-5.16,2.84-7,7.35l-1.76,12.2H52.91l3-20.87h1.6l-.64,5.35c1.56-3.59,3.68-5.75,6.84-5.75A6.66,6.66,0,0,1,65.67,258.28Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M70.11,274.27c-.36,2.52.4,3.8,2.6,3.8a7.77,7.77,0,0,0,3.52-1l.68,1.36a8.43,8.43,0,0,1-4.4,1.28c-3,0-4.76-1.88-4.24-5.4l2-14.35H66.79L67,258.4h3.52l1.08-5.12,1.44-.16-.72,5.28h5.48L77.39,260H72.11Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M93.71,258.28,93.19,260a6.45,6.45,0,0,0-1.64-.24c-3.24,0-5.16,2.84-7,7.35l-1.76,12.2H81l3-20.87h1.6l-.64,5.35c1.56-3.59,3.68-5.75,6.84-5.75A6.66,6.66,0,0,1,93.71,258.28Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M112.27,259.68l-2.2,15.11c-.24,1.92-.16,3,1.24,3.56l-.52,1.36c-1.64-.48-2.68-1.36-2.48-3.88a8,8,0,0,1-6.52,3.88c-4.12,0-6.56-3.08-6.56-8.12,0-5.63,2.84-13.59,10.6-13.59A12.87,12.87,0,0,1,112.27,259.68ZM97.19,271.55c0,4.28,1.76,6.56,4.8,6.56,2.68,0,4.68-1.72,6.48-4.64l1.84-12.87a8.68,8.68,0,0,0-4.44-1.08C99.47,259.52,97.19,266.67,97.19,271.55Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M119.75,279.27h-1.84l3-20.87h1.84Zm1.68-28.19a1.51,1.51,0,0,1,1.56-1.56,1.19,1.19,0,0,1,1.28,1.24,1.5,1.5,0,0,1-1.52,1.56A1.22,1.22,0,0,1,121.43,251.08Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-2\",\n  d: \"M131,274.27c-.36,2.52.4,3.8,2.6,3.8a7.77,7.77,0,0,0,3.52-1l.68,1.36a8.43,8.43,0,0,1-4.4,1.28c-3,0-4.76-1.88-4.24-5.4l2-14.35h-3.52l.24-1.56h3.52l1.08-5.12,1.44-.16-.72,5.28h5.48l-.44,1.56H133Z\"\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"browser-2\",\n  \"data-name\": \"browser\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Rounded_Rectangle_1-2\",\n  \"data-name\": \"Rounded Rectangle 1\",\n  className: \"cls-3\",\n  d: \"M4.86,0H135.14A4.8,4.8,0,0,1,140,4.75v220.5a4.8,4.8,0,0,1-4.86,4.75H4.86A4.8,4.8,0,0,1,0,225.25V4.75A4.8,4.8,0,0,1,4.86,0Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Top_dark-2\",\n  \"data-name\": \"Top dark\",\n  className: \"cls-4\",\n  d: \"M4.86,0H135.14A4.8,4.8,0,0,1,140,4.75V16.64H0V4.75A4.8,4.8,0,0,1,4.86,0Z\"\n}), /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Adressbar-2\",\n  \"data-name\": \"Adressbar\",\n  className: \"cls-5\",\n  x: 39.23,\n  y: 3.8,\n  width: 72.7,\n  height: 9.51,\n  rx: 2.41\n}), /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Circles_2-2\",\n  \"data-name\": \"Circles 2\"\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"_1-2\",\n  \"data-name\": 1,\n  className: \"cls-6\",\n  cx: 8.56,\n  cy: 8.56,\n  r: 2.38\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"_2-2\",\n  \"data-name\": 2,\n  className: \"cls-7\",\n  cx: 17.12,\n  cy: 8.56,\n  r: 2.38\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"_3-2\",\n  \"data-name\": 3,\n  className: \"cls-8\",\n  cx: 25.68,\n  cy: 8.56,\n  r: 2.38\n})), /*#__PURE__*/React.createElement(\"image\", {\n  id: \"menu_light-2\",\n  \"data-name\": \"menu light\",\n  className: \"cls-9\",\n  width: 16,\n  height: 13,\n  transform: \"translate(122.52 5.23) scale(0.49 0.48)\",\n  xlinkHref: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAANCAYAAACgu+4kAAAACXBIWXMAABbCAAAWwgFTLGrhAAAAQElEQVQoU+2RzQ0AEBTG6m8pOzjZfxLhMwEvESfRc9NLnaQCBM7oTpIlbfGWYPFAIAIVSJa4oP0LFwIRyJyHxgTXDAztklk6XgAAAABJRU5ErkJggg==\"\n})), /*#__PURE__*/React.createElement(\"line\", {\n  className: \"cls-10\",\n  y1: 123.32,\n  x2: 140,\n  y2: 123.32\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M83.94,152.94l2.4,42.28h-4l-1.57-23.3c-.08-1.41-.16-2.92-.23-4.52s-.13-3.14-.17-4.63-.08-2.77-.11-3.86-.06-1.82-.08-2.19l-7.84,30.8H67.63l-8.4-30.8c0,.37,0,1.13,0,2.28s0,2.49,0,4,0,3.07-.06,4.64-.09,3-.16,4.17L57.6,195.22H53.66l2.4-42.28h6.56l7.5,29.44,7.17-29.44Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M81.54,46.26V74.84A21.86,21.86,0,0,1,81,79.69a13.31,13.31,0,0,1-2,4.66,10.64,10.64,0,0,1-4.15,3.49,15.29,15.29,0,0,1-6.89,1.34,18.68,18.68,0,0,1-5.82-1,18,18,0,0,1-5.44-2.84l1.93-2.74A18.87,18.87,0,0,0,63.86,85a17.61,17.61,0,0,0,4.11.58q4.77,0,7.21-3a12.6,12.6,0,0,0,2.45-8.16V49.71H65.23V46.26Z\"\n}));\n\nfunction SvgLayoutDiagram(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    viewBox: \"0 0 490 410.52\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLayoutDiagram);\nexport default __webpack_public_path__ + \"static/media/layout-diagram.5c92978a.svg\";\nexport { ForwardRef as ReactComponent };","import { colors, createMuiTheme, responsiveFontSizes } from '@material-ui/core';\n\nlet theme = createMuiTheme({\n  props: {\n    // Name of the component ⚛️\n    MuiSwitch: {\n      // The default props to change\n      color: 'primary', // x, on the whole application 💣!\n    },\n    MuiButton: {\n      variant: 'outlined',\n      // style: {\n      //   borderRadius: 24,\n      // },\n    },\n    MuiDialog: {\n      // maxWidth: 'sm',\n      // fullWidth: true,\n      style: {\n        // fill more of the screen with this dialog\n        margin: 0,\n      },\n      PaperProps: {\n        style: {\n          // fill more of the screen with this dialog\n          margin: 12,\n          // don't expand past 1000px\n          maxHeight: 1000,\n          // don't go outside window bounds\n          height: 'calc(100% - 24px)', // = 16px top + bottom margin\n          // sm is 600px, go slightly beyond that\n          maxWidth: 680,\n          // always try to maximize width (`fullWidth={true}`)\n          width: '100%',\n        },\n      },\n    },\n  },\n  palette: {\n    primary: {\n      main: colors.blue[700],\n    },\n    secondary: {\n      main: colors.red[700],\n    },\n    info: {\n      main: colors.blue[700],\n    },\n  },\n  shape: {\n    borderRadius: 12,\n  },\n  typography: {\n    h1: {\n      fontSize: '3rem',\n    },\n    h2: {\n      fontSize: '2rem',\n    },\n  },\n});\n\ntheme = responsiveFontSizes(theme);\n\nexport const simpleBoxShadow = '0px 2px 10px 1px rgba(0, 0, 0, 0.4)';\nexport const lightBoxShadow = '0px 0px 10px 2px rgba(255, 255, 255, 0.8)';\nexport const verylightBoxShadow = '0px 1px 6px 0px rgba(0, 0, 0, 0.2)';\nexport const darkBoxShadow = '0px 0px 10px 2px rgba(0, 0, 0, 0.8)';\n\n/**\n * A box shadow comprised of two overlaid box shadows:\n * - a light box shadow (for contrasting against **dark** backgrounds)\n * - a dark box shadow (for contrasting against **light** backgrounds)\n */\nexport const contrastBoxShadow = `${lightBoxShadow}, ${darkBoxShadow}`;\n\nexport default theme;\n","import { Button, ButtonGroup, makeStyles } from '@material-ui/core';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport React from 'react';\nimport { ViewChangerProps } from '../../common/render';\n\nconst useStyles = makeStyles((theme) => ({\n  // root: {\n  //   transform: 'translateX(-50%) translateY(-50%)',\n  // },\n  changeViewButton: {\n    padding: 4,\n  },\n}));\n\nexport default function ViewChanger({\n  vertical,\n  changeFunc,\n  displayOnly = false,\n}: ViewChangerProps): JSX.Element {\n  // const { vertical, changeFunc, debug, percentFlex } = props;\n  const classes = useStyles();\n\n  const mButton = (\n    <Button\n      className={classes.changeViewButton}\n      onClick={() => {\n        // console.log('julia (up / right)');\n        // always show mandelbrot\n        // show julia if (self) hidden, otherwise hide it\n        // [true, true] => [true, false]\n        // [false, true] => [true, true]\n        changeFunc(([m, j]: boolean[]) => [true, !m]);\n      }}\n    >\n      {vertical ? <KeyboardArrowUpIcon /> : <KeyboardArrowRightIcon />}\n    </Button>\n  );\n  const jButton = (\n    <Button\n      className={classes.changeViewButton}\n      onClick={() => {\n        // console.log('mandelbrot (down / left)');\n        // [true, true] => [false, true]\n        // [true, false] => [true, true]\n        changeFunc(([m, j]: boolean[]) => [!j, true]);\n      }}\n    >\n      {vertical ? <KeyboardArrowDownIcon /> : <KeyboardArrowLeftIcon />}\n    </Button>\n  );\n\n  return (\n    <ButtonGroup\n      orientation={vertical ? 'vertical' : 'horizontal'}\n      variant=\"contained\"\n      style={\n        displayOnly\n          ? { margin: '8px 16px' }\n          : {\n              transform: vertical ? `translate(-100%, -50%)` : `translate(-50%, 0%)`, // original\n              // top margin must be large to clear FPS widget\n              marginTop: vertical ? 0 : 48,\n              // left margin must be large (and negative) to clear the settings button\n              marginLeft: vertical ? -72 : 0,\n            }\n      }\n    >\n      {vertical ? mButton : jButton}\n      {vertical ? jButton : mButton}\n    </ButtonGroup>\n  );\n}\n","import { FormControlLabelProps, SvgIcon } from '@material-ui/core';\nimport React from 'react';\nimport { RgbColor } from 'react-colorful';\nimport { defaultShadingColour } from './values';\n// https://stackoverflow.com/a/39281228/9184658\n\nexport type settingsDefinitionsType = {\n  showMinimap: boolean;\n  showCrosshair: boolean;\n  showCoordinates: boolean;\n  showFPS: boolean;\n  maxI: number;\n  useDPR: boolean;\n  useAA: boolean;\n  colour: RgbColor;\n  deepZoom: boolean;\n};\n\nexport const defaultSettings: settingsDefinitionsType = {\n  showMinimap: true,\n  showCrosshair: true,\n  showCoordinates: false,\n  maxI: 256,\n  showFPS: false,\n  useDPR: false,\n  useAA: false,\n  colour: defaultShadingColour,\n  deepZoom: false,\n};\n\nexport const defaultIterationLevels = [16, 250, 500, 750, 1000].map((i) => ({\n  value: i,\n  label: i,\n}));\n// const texsize = Math.ceil(Math.sqrt(orbit.length / 4));\n// -----\n// vec4 unpackOrbit(int i) {\n//   float fi = float(i);\n//   vec2 texcoord = vec2(mod(fi, texsize), floor(fi / texsize)) / texsize;\n//   return texture2D(orbittex, texcoord);\n// }\n// squares: 6^2, 20^2, 32^2...\n// bad iteration levels: 6, 7, 12, 13, 14, 15, 24, 26, 28, 30\n// 19 iteration levels:\nexport const perturbationIterationLevels = [\n  4,\n  5,\n  8,\n  9,\n  10,\n  11,\n  16,\n  17,\n  18,\n  19,\n  20,\n  21,\n  22,\n  23,\n  25,\n  27,\n  29,\n  31,\n  32,\n]\n  .map((l) => l * l)\n  .map((l, i) => ({\n    value: l,\n    // only show the labels of the higher levels\n    // i+n to ensure that 18 is mod n\n    label: (i + 2) % 4 ? null : l,\n  }));\n\n// export const perturbationIterationLevels = _.range(2, 33, 2)\n//   .map((i) => i * i)\n//   .map((i) => ({\n//     value: i,\n//   }));\n\nexport type settingsWidgetType = FormControlLabelProps & { helptext?: string };\n\nexport type settingsWidgetsList = {\n  // - settings widgets key k must be in the set\n  // - its type must be of FormControlLabelProps (for displaying in the Material UI form)\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  [k in keyof settingsDefinitionsType]: settingsWidgetType;\n  // using \"k\" results in an error since it is not used again\n};\n\nexport type settingsGroupType = {\n  name: string;\n  icon: typeof SvgIcon;\n  widgets: {\n    // widget groups may contain any of the keys in the settingsDefinitionsType\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    [k in keyof Partial<settingsDefinitionsType>]: settingsWidgetType;\n    // using \"k\" results in an error since it is not used again\n  };\n};\n\nexport type SettingsContextType = {\n  settings: settingsDefinitionsType;\n  setSettings: React.Dispatch<React.SetStateAction<settingsDefinitionsType>>;\n  settingsWidgets: settingsWidgetsList;\n  // newSettings: {\n  //   [k in keyof settingsDefinitionsType]: [\n  //     settingsDefinitionsType[k],\n  //     React.Dispatch<React.SetStateAction<settingsDefinitionsType[k]>>,\n  //   ];\n  // };\n};\n\nexport interface SettingsMenuProps {\n  reset: () => void;\n  toggleInfo: () => void;\n  helpState: [boolean, () => void];\n}\n\nexport interface FirstTimeInfoProps {\n  ctrl: [boolean, React.Dispatch<React.SetStateAction<boolean>>];\n}\n","import { Slider, Switch } from '@material-ui/core';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport React from 'react';\nimport { RgbColorPicker } from 'react-colorful';\nimport {\n  defaultIterationLevels,\n  perturbationIterationLevels,\n  settingsDefinitionsType,\n  settingsGroupType,\n  settingsWidgetsList,\n} from '../../common/settings';\n\nexport const settingsWidgets = (\n  settings: settingsDefinitionsType,\n): settingsWidgetsList => ({\n  showMinimap: {\n    label: 'Minimap',\n    checked: settings.showMinimap,\n    control: <Switch />,\n    helptext: `\nMinimaps are shown on the bottom-left of each viewer.\nA minimap shows the current position in the viewer at a zoom scale of 1x.\n\nClicking on a minimap will reset the current zoom level to 1x.\n    `,\n  },\n  showCrosshair: {\n    label: 'Crosshair',\n    checked: settings.showCrosshair,\n    control: <Switch />,\n    helptext: `\nPinpoints the centre point of the Mandelbrot viewer with a plus-shaped indicator.\n    `,\n  },\n  showCoordinates: {\n    label: 'Show coordinates',\n    checked: settings.showCoordinates,\n    control: <Switch />,\n    helptext: `\nDisplays the current viewer coordinates on the top-right corner,\nand allows warping to specific coordinates \n(Mandelbrot viewer only).\n    `,\n  },\n  maxI: {\n    label: 'Iterations',\n    value: settings.maxI,\n    labelPlacement: 'top',\n    style: {\n      margin: 0,\n    },\n    control: (\n      <Slider\n        min={16}\n        max={1024}\n        // step={16}\n        // increment by 16 if not in \"deep mode\"\n        step={settings.deepZoom ? null : 16}\n        marks={settings.deepZoom ? perturbationIterationLevels : defaultIterationLevels}\n        valueLabelDisplay=\"auto\"\n      />\n    ),\n    helptext: `\nSets the maximum times to iterate the fractal:\nlower values reduce image accuracy, \n**higher values may reduce performance**.\n    `,\n  },\n  useDPR: {\n    // https://stackoverflow.com/a/12830454/9184658\n    // // There is a downside that values like 1.5 will give \"1.50\" as the output. A fix suggested by @minitech:\n    // var numb = 1.5;\n    // numb = +numb.toFixed(2);\n    // // Note the plus sign that drops any \"extra\" zeroes at the end.\n    // // It changes the result (which is a string) into a number again (think \"0 + foo\"),\n    // // which means that it uses only as many digits as necessary.\n    label: `Use pixel ratio (${+window.devicePixelRatio.toFixed(3)})`,\n    checked: settings.useDPR,\n    control: <Switch />,\n    helptext: `\nIf your device's screen has a high pixel density (ratio > 1.0), using \nDPR (Device Pixel Ratio) will increase the sharpness of the image,\nbut **may reduce performance**.\n    `,\n  },\n  useAA: {\n    label: `Anti-aliasing (slow)`,\n    checked: settings.useAA,\n    control: <Switch color=\"secondary\" />,\n    helptext: `\nAnti-aliasing provides a smoothing effect which increases the quality of the image, \nbut can **severely reduce performance and crash the application**.\n    `,\n  },\n  showFPS: {\n    label: `Show FPS`,\n    checked: settings.showFPS,\n    control: <Switch />,\n    helptext: `\nMeasures performance by displaying the current \n\"Frames Per Second\" on the top-left corner.\n\nHigher values indicate better performance, while lower values \nmean that your device is slowing down significantly.\n\nBrowsers ususally set an upper bound on FPS that is equal \nto the refresh rate of your display (most commonly 60 FPS).\n    `,\n  },\n  colour: {\n    label: null,\n    // fixes horizontal alignment\n    labelPlacement: 'top',\n    style: {\n      // padding top higher because of saturation/value selector extending\n      paddingTop: 12,\n      paddingBottom: 8,\n      paddingLeft: 0,\n      paddingRight: 0,\n      margin: 0,\n    },\n    control: (\n      <RgbColorPicker\n        // set the initial colour\n        color={settings.colour}\n      />\n    ),\n    helptext: `\nChanges the primary colour of the viewers in HSV (Hue / Saturation / Value).\n\nThe top picker changes *Saturation* (horizontally) and *Value* (vertically).\nThe bottom picker changes *Hue*.\n    `,\n  },\n  deepZoom: {\n    label: `⚠️ Deep zoom`,\n    checked: settings.deepZoom,\n    control: <Switch color=\"secondary\" />,\n    helptext: `\n(Mandelbrot viewer only)\n**This feature is experimental and could severely reduce performance, especially at high zoom levels.**\nUses perturbation theory to provide deeper zoom capability.\nTo obtain a usable result, move the \"Iterations\" slider so that it stops at a predefined level; changing the iteration count will slightly affect colouring.\nZooming into some regions may give almost no improvement over the standard method.\nRegions closer to the origin will usually allow for deeper zoom without loss of quality.\n    `,\n  },\n});\n\nexport const getSettingsWidgetsGrouping = (\n  settingsWidgets: settingsWidgetsList,\n): Array<settingsGroupType> => [\n  {\n    icon: ExtensionIcon,\n    name: 'Interface',\n    widgets: {\n      showMinimap: settingsWidgets.showMinimap,\n      showCrosshair: settingsWidgets.showCrosshair,\n      showCoordinates: settingsWidgets.showCoordinates,\n    },\n    // ],\n  },\n  {\n    icon: PhotoIcon,\n    name: 'Graphics',\n    widgets: {\n      maxI: settingsWidgets.maxI,\n      colour: settingsWidgets.colour,\n      useDPR: settingsWidgets.useDPR,\n      useAA: settingsWidgets.useAA,\n      showFPS: settingsWidgets.showFPS,\n      deepZoom: settingsWidgets.deepZoom,\n    },\n  },\n];\n","import React, { createContext, ReactNode, useState } from 'react';\r\nimport {\r\n  defaultSettings,\r\n  SettingsContextType,\r\n  settingsDefinitionsType,\r\n} from '../../common/settings';\r\nimport { settingsWidgets } from './SettingsDefinitions';\r\n\r\nexport const SettingsContext = createContext<SettingsContextType>({\r\n  // provide the context with the default values\r\n  settings: defaultSettings,\r\n  // can't set state until it's initialized\r\n  setSettings: () => {\r\n    return;\r\n  },\r\n  settingsWidgets: settingsWidgets(defaultSettings),\r\n});\r\n\r\n// export const useSettings = (): SettingsContextType => useContext(SettingsContext);\r\n\r\nexport const SettingsProvider = ({ children }: { children: ReactNode }): JSX.Element => {\r\n  // https://reactjs.org/docs/context.html#updating-context-from-a-nested-component\r\n  // no grouping: all settings are accessible\r\n  const [settings, setSettings] = useState<settingsDefinitionsType>(defaultSettings);\r\n\r\n  return (\r\n    <SettingsContext.Provider\r\n      value={{\r\n        settings,\r\n        setSettings,\r\n        settingsWidgets: settingsWidgets(settings),\r\n      }}\r\n    >\r\n      {children}\r\n    </SettingsContext.Provider>\r\n  );\r\n};\r\n\r\nexport default SettingsProvider;\r\n","import {\n  Backdrop,\n  Divider,\n  Fab,\n  FormControlLabel,\n  FormGroup,\n  Grid,\n  makeStyles,\n  Popover,\n  Typography,\n} from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport {\n  HelpOutline,\n  InfoOutlined,\n  MyLocationOutlined,\n  SettingsOutlined,\n  SvgIconComponent,\n} from '@material-ui/icons';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport React, { useState } from 'react';\nimport { SettingsMenuProps, settingsWidgetType } from '../../common/settings';\n// react-colorful requires style imports\n// import 'react-colorful/dist/index.css';\nimport '../../css/react-colorful.css';\nimport { contrastBoxShadow } from '../../theme/theme';\nimport { SettingsContext } from './SettingsContext';\nimport { getSettingsWidgetsGrouping } from './SettingsDefinitions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'column',\n    zIndex: 2,\n  },\n  settingsButton: {\n    boxShadow: contrastBoxShadow,\n  },\n  popoverCardGrid: {\n    paddingTop: 18,\n    paddingBottom: 18,\n    paddingRight: 22,\n    paddingLeft: 22,\n  },\n  sliderControl: {\n    width: 30,\n  },\n}));\n\nexport const GroupDivider = (): JSX.Element => (\n  <Divider style={{ marginTop: 8, marginBottom: 12 }} />\n);\nexport const GroupTitle = (props: {\n  title: string;\n  icon: SvgIconComponent;\n}): JSX.Element => (\n  <Grid container alignItems=\"center\" justify=\"center\" spacing={1}>\n    {/* remove margin to center based only on text and not icon (not ideal) */}\n    <Grid item style={{ marginLeft: -24 }}>\n      <props.icon color=\"primary\" fontSize=\"small\" />\n    </Grid>\n    <Grid item>\n      <Typography color=\"primary\" variant=\"button\" style={{ fontSize: 14 }}>\n        {props.title}\n      </Typography>\n    </Grid>\n  </Grid>\n);\n\nexport const SettingsMenuButton = ({\n  onClick,\n  displayOnly = false,\n}: {\n  onClick: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n  displayOnly?: boolean;\n}): JSX.Element => {\n  const classes = useStyles();\n\n  return (\n    <Fab\n      aria-controls=\"menu\"\n      aria-haspopup=\"true\"\n      aria-label=\"settings\"\n      size=\"small\"\n      onClick={onClick}\n      className={classes.settingsButton}\n    >\n      <SettingsIcon className=\"rotate-center\" />\n    </Fab>\n  );\n};\n\nexport const SettingsHelpButton = ({\n  onClick,\n}: {\n  onClick: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\n}): JSX.Element => (\n  <Button size=\"small\" color=\"primary\" startIcon={<HelpOutline />} onClick={onClick}>\n    Help\n  </Button>\n);\n\nexport default function SettingsMenu(props: SettingsMenuProps): JSX.Element {\n  const [helpOpen, setHelpOpen] = props.helpState;\n  const classes = useStyles();\n\n  const [anchorEl, setAnchorEl] = useState<EventTarget & HTMLButtonElement>();\n\n  const ResetButton = () => (\n    <Button\n      startIcon={<MyLocationOutlined />}\n      color=\"secondary\"\n      aria-controls=\"reset\"\n      onClick={props.reset}\n    >\n      Reset\n    </Button>\n  );\n  const AboutButton = () => (\n    <Button\n      startIcon={<InfoOutlined />}\n      color=\"primary\"\n      aria-controls=\"about\"\n      onClick={() => {\n        props.toggleInfo();\n        setAnchorEl(undefined);\n      }}\n    >\n      About\n    </Button>\n  );\n\n  return (\n    <div className={classes.root}>\n      <SettingsMenuButton onClick={(e) => setAnchorEl(e.currentTarget)} />\n\n      <Backdrop open={Boolean(anchorEl)}>\n        <Popover\n          id=\"menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={Boolean(anchorEl)}\n          onClose={() => setAnchorEl(undefined)}\n          anchorOrigin={{\n            horizontal: 'right',\n            vertical: 'bottom',\n          }}\n          transformOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          style={{ userSelect: 'none' }}\n        >\n          <Grid container direction=\"column\" className={classes.popoverCardGrid}>\n            <Grid\n              item\n              container\n              direction=\"row\"\n              alignItems=\"center\"\n              justify=\"space-between\"\n              style={{ padding: '4px 0' }}\n            >\n              {/* https://stackoverflow.com/a/51970114/9184658 */}\n              <Grid item xs container direction=\"row\" alignItems=\"center\">\n                <Grid item>\n                  <SettingsOutlined\n                    className=\"rotate-center\"\n                    style={{ marginRight: 4 }}\n                  />\n                </Grid>\n                <Grid item>\n                  <Typography variant=\"h1\" style={{ fontSize: 20 }}>\n                    Settings\n                  </Typography>\n                </Grid>\n              </Grid>\n              <Grid item>\n                <SettingsHelpButton onClick={setHelpOpen} />\n              </Grid>\n            </Grid>\n            <SettingsContext.Consumer>\n              {({ setSettings, settingsWidgets }) =>\n                getSettingsWidgetsGrouping(settingsWidgets).map((g) => (\n                  <Grid item key={g.name}>\n                    <GroupDivider />\n                    <GroupTitle icon={g.icon} title={g.name} />\n                    <FormGroup>\n                      {Object.entries(g.widgets).map(([k, widgetUnchecked], j) => {\n                        const {\n                          helptext,\n                          ...widget\n                        } = widgetUnchecked as settingsWidgetType;\n\n                        return (\n                          <FormControlLabel\n                            key={`${k}-control`}\n                            {...widget}\n                            // ...e catches all event arguments\n                            onChange={\n                              helpOpen\n                                ? (...e) => {\n                                    /** help is open - do nothing, otherwise there may\n                                     * be an infinite update loop in the iteration or\n                                     * colour selectors\n                                     */\n                                  }\n                                : (...e) => {\n                                    // the value is the last element of the \"e\" array\n                                    // https://stackoverflow.com/a/12099341/9184658\n                                    // > using destructuring is nice too:\n                                    // > const [lastItem] = arr.slice(-1)\n                                    // > – diachedelic Mar 11 '19 at 6:30\n                                    const [val] = e.slice(-1);\n                                    console.debug(`${k} ->`, val);\n                                    // TODO: updating state like this seems to be very slow\n                                    // either have individual useState pairs, or use a Map?\n                                    setSettings((prevState) => ({\n                                      ...prevState,\n                                      [k]: val,\n                                    }));\n                                  }\n                            }\n                          />\n                        );\n                      })}\n                    </FormGroup>\n                  </Grid>\n                ))\n              }\n            </SettingsContext.Consumer>\n\n            <GroupDivider />\n\n            <Grid\n              container\n              direction=\"row\"\n              justify=\"space-between\"\n              // alignItems=\"stretch\"\n              spacing={1}\n            >\n              <Grid item style={{ margin: 'auto' }}>\n                <ResetButton />\n              </Grid>\n              <Grid item style={{ margin: 'auto' }}>\n                <AboutButton />\n              </Grid>\n            </Grid>\n          </Grid>\n        </Popover>\n      </Backdrop>\n    </div>\n  );\n}\n","import {\n  darken,\n  FormControlLabel,\n  FormGroup,\n  Grid,\n  lighten,\n  Link,\n  Typography,\n  useTheme,\n} from '@material-ui/core';\nimport { Variant } from '@material-ui/core/styles/createTypography';\nimport { ChevronRightSharp } from '@material-ui/icons';\nimport Alert from '@material-ui/lab/Alert';\nimport { noop } from 'lodash';\nimport Markdown, { MarkdownToJSX } from 'markdown-to-jsx';\nimport React, { useEffect, useState } from 'react';\nimport { settingsWidgetType } from '../../common/settings';\n//\n// imports for markdown\nimport { ReactComponent as ViewerLayoutDiagramSVG } from '../../img/layout-diagram.svg';\nimport { verylightBoxShadow } from '../../theme/theme';\nimport ViewChanger from '../render/ViewChanger';\nimport { SettingsContext } from '../settings/SettingsContext';\nimport { getSettingsWidgetsGrouping } from '../settings/SettingsDefinitions';\nimport {\n  GroupTitle,\n  SettingsHelpButton,\n  SettingsMenuButton,\n} from '../settings/SettingsMenu';\n\n// higher-order-component for variable typography \"variants\"\nfunction wrapMdOverrideTypographyHOC(variant?: Variant | 'inherit') {\n  return function variableMdOverrideTypographyHOC({\n    children,\n  }: React.DetailedHTMLProps<\n    React.HTMLAttributes<HTMLParagraphElement>,\n    HTMLParagraphElement\n  >): JSX.Element {\n    return (\n      <Typography variant={variant} paragraph>\n        {children}\n      </Typography>\n    );\n  };\n}\n\nconst MdOverrideLink = ({\n  children,\n  title,\n  href,\n}: // ...props\nReact.DetailedHTMLProps<\n  React.AnchorHTMLAttributes<HTMLAnchorElement>,\n  HTMLAnchorElement\n>): JSX.Element => (\n  <Link title={title} href={href} target=\"_blank\">\n    {children}\n  </Link>\n);\n\nfunction SettingsInstructionBlock({\n  children,\n}: React.DetailedHTMLProps<\n  React.HTMLAttributes<HTMLParagraphElement>,\n  HTMLParagraphElement\n>): JSX.Element {\n  return (\n    <Typography\n      variant=\"body2\"\n      // paragraph\n      style={{\n        padding: '8px 12px',\n        // centre help text vertically\n        marginTop: 'auto',\n        marginBottom: 'auto',\n      }}\n    >\n      {children}\n    </Typography>\n  );\n}\n\nconst baseMdOverrides = {\n  a: MdOverrideLink,\n  h1: wrapMdOverrideTypographyHOC('h1'),\n  h2: wrapMdOverrideTypographyHOC('h2'),\n  p: wrapMdOverrideTypographyHOC('body1'),\n};\n\nconst mdOverrides: MarkdownToJSX.Overrides = {\n  ...baseMdOverrides,\n  ViewerLayoutDiagram: function ViewerLayoutDiagram() {\n    return (\n      <Grid container justify=\"center\" style={{ padding: '12px 0' }}>\n        <Grid item xs={12} sm={9}>\n          <ViewerLayoutDiagramSVG style={{ width: '100%' }} />\n        </Grid>\n      </Grid>\n    );\n  },\n\n  ViewChangerDisplay: function ViewChangerDisplay() {\n    return (\n      <Grid container justify=\"space-evenly\">\n        <Grid item>\n          <Grid container direction=\"column\">\n            <Grid item>\n              <ViewChanger vertical={true} changeFunc={noop} displayOnly />\n            </Grid>\n            <Grid item>\n              <Typography variant=\"body2\" align=\"center\">\n                Portrait\n              </Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item>\n          <Grid container direction=\"column\" style={{ height: '100%' }}>\n            <Grid item style={{ margin: 'auto' }}>\n              <ViewChanger vertical={false} changeFunc={noop} displayOnly />\n            </Grid>\n            <Grid item style={{ marginLeft: 'auto', marginRight: 'auto' }}>\n              <Typography variant=\"body2\" align=\"center\">\n                Landscape\n              </Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    );\n  },\n\n  HelpBreadcrumbs: function HelpBreadcrumbs() {\n    return (\n      <Grid container justify=\"center\" alignItems=\"center\">\n        <Grid item>\n          <SettingsMenuButton onClick={noop} displayOnly />\n        </Grid>\n        <Grid item style={{ lineHeight: 1, textAlign: 'center' }}>\n          {/* line height messes up alignment otherwise */}\n          <ChevronRightSharp />\n        </Grid>\n        <Grid item>\n          <SettingsHelpButton onClick={noop} />\n        </Grid>\n      </Grid>\n    );\n  },\n\n  SettingsMenuButton: function SettingsMenuButtonDisplay() {\n    return (\n      <Grid container justify=\"center\">\n        <Grid item style={{ marginBottom: 12 }}>\n          <SettingsMenuButton onClick={noop} />\n        </Grid>\n      </Grid>\n    );\n  },\n\n  SettingsInstructions: function SettingsInstructions() {\n    const theme = useTheme();\n\n    return (\n      <SettingsContext.Consumer>\n        {({ setSettings, settingsWidgets }) =>\n          getSettingsWidgetsGrouping(settingsWidgets).map((g, i) => (\n            <Grid container direction=\"column\" alignItems=\"flex-end\" key={g.name}>\n              <Grid item xs={5} container style={{ userSelect: 'none', marginTop: 12 }}>\n                <Grid item xs>\n                  <GroupTitle icon={g.icon} title={g.name} />\n                </Grid>\n              </Grid>\n              {Object.entries(g.widgets).map(([k, widgetUnchecked], j) => {\n                // widget will contain\n                // label, control, (checked or value), ...\n                // helptext\n                const { helptext, ...widget } = widgetUnchecked as settingsWidgetType;\n                return (\n                  <Grid\n                    container\n                    direction=\"row\"\n                    justify=\"space-between\"\n                    // align center shrinks to content\n                    // alignItems=\"center\"\n                    key={k}\n                    style={{\n                      marginTop: 6,\n                      marginBottom: 6,\n                      borderRadius: theme.shape.borderRadius,\n                      backgroundColor: theme.palette.grey[50],\n                      boxShadow: verylightBoxShadow,\n                    }}\n                  >\n                    <Grid item xs={6} sm={7}>\n                      <div\n                        style={{\n                          // fill the available vertical space\n                          height: '100%',\n                          borderTopLeftRadius: theme.shape.borderRadius,\n                          borderBottomLeftRadius: theme.shape.borderRadius,\n                          // https://github.com/mui-org/material-ui/blob/master/packages/material-ui-lab/src/Alert/Alert.js#L16\n                          backgroundColor: lighten(theme.palette.info.main, 0.9),\n                          color: darken(theme.palette.info.main, 0.6),\n                          display: 'flex',\n                          flexDirection: 'column',\n                        }}\n                      >\n                        <Markdown\n                          options={{\n                            wrapper: React.Fragment,\n                            forceBlock: true,\n                            overrides: {\n                              ...baseMdOverrides,\n                              p: SettingsInstructionBlock,\n                            },\n                          }}\n                        >\n                          {\n                            // default if no description is provided\n                            helptext?.trim() || '(no description)'\n                          }\n                        </Markdown>\n                      </div>\n                    </Grid>\n                    <Grid\n                      item\n                      xs={6}\n                      sm={5}\n                      style={{\n                        display: 'flex',\n                        flexDirection: 'column',\n                        userSelect: 'none',\n                      }}\n                    >\n                      <FormGroup\n                        style={{\n                          height: '100%',\n                        }}\n                      >\n                        <FormControlLabel\n                          key={`${k}-control`}\n                          {...widget}\n                          style={{\n                            // make the entire area selectable\n                            height: '100%',\n                            padding: '10px 12px',\n                            // if this is a \"top\" label, tweak the margins\n                            ...(widget.labelPlacement === 'top'\n                              ? {\n                                  margin: 8,\n                                  // correctly centres iteration slider\n                                  justifyContent: 'center',\n                                }\n                              : {}),\n                          }}\n                          onChange={(...e) => {\n                            // the value is the last element of the \"e\" array\n                            // https://stackoverflow.com/a/12099341/9184658\n                            // > using destructuring is nice too:\n                            // > const [lastItem] = arr.slice(-1)\n                            // > – diachedelic Mar 11 '19 at 6:30\n                            const [val] = e.slice(-1);\n                            console.debug(`${k} ->`, val);\n                            // TODO: updating state like this seems to be very slow\n                            // either have individual useState pairs, or use a Map?\n                            setSettings((prevState) => ({\n                              ...prevState,\n                              [k]: val,\n                            }));\n                          }}\n                        />\n                      </FormGroup>\n                    </Grid>\n                  </Grid>\n                );\n              })}\n            </Grid>\n          ))\n        }\n      </SettingsContext.Consumer>\n    );\n  },\n\n  Alert: function AlertMd(props) {\n    return <Alert {...props} style={{ marginBottom: 16 }} />;\n  },\n};\n\nexport const MarkdownFromFile = ({\n  f,\n  style,\n}: {\n  f: string;\n  style?: React.CSSProperties;\n}): JSX.Element => {\n  const [infoMdText, setInfoMdText] = useState('');\n\n  // https://github.com/facebook/create-react-app/issues/2961#issuecomment-322916352\n  useEffect(() => {\n    console.log(`loaded md: ${f}`);\n    fetch(f)\n      .then((response) => response.text())\n      .then((text) => {\n        // Logs a string of Markdown content.\n        // Now you could use e.g. <rexxars/react-markdown> to render it.\n        // console.log(text);\n        setInfoMdText(text);\n      });\n  }, [f]);\n\n  return (\n    <Markdown options={{ wrapper: React.Fragment, overrides: mdOverrides }} {...style}>\n      {infoMdText}\n    </Markdown>\n  );\n};\n\nexport default mdOverrides;\n","import { Dialog, Fade, IconButton, MobileStepper } from '@material-ui/core';\nimport { HelpOutline, KeyboardArrowLeft, KeyboardArrowRight } from '@material-ui/icons';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { mod } from 'react-swipeable-views-core';\nimport { FirstTimeInfoProps } from '../../common/settings';\nimport { DialogActions, DialogContent, DialogTitle } from '../custom/DialogComponents';\nimport helptext from './helptext/helptext';\nimport { MarkdownFromFile } from './MarkdownOverrides';\n\n// const useStyles = makeStyles((theme) => ({\n//   // root: {\n//   //   transform: 'translateX(-50%) translateY(-50%)',\n//   // },\n//   changeViewButton: {\n//     padding: 4,\n//   },\n// }));\n\n/**\n * A component shown to users when they first visit the application.\n * Uses Local Storage to track repeat visits.\n */\nexport default function FirstTimeInfo({\n  ctrl: [open, setOpen],\n}: FirstTimeInfoProps): JSX.Element {\n  // const classes = useStyles();\n  const returningUserKey = 'returningUser';\n\n  // const isFirstVisit = (): boolean => {\n  //   return true;\n  // };\n  // assume this is a new user\n  // const [open, setOpen] = ctrl;\n\n  // https://programmingwithmosh.com/react/localstorage-react/\n  useEffect(() => {\n    const returningUser = localStorage.getItem(returningUserKey);\n    console.info(`Returning user? => ${returningUser}`);\n    if (!returningUser) {\n      // setOpen(true);\n      // then they are no longer a new user\n      // localStorage.setItem(returningUserKey)\n    }\n  }, [setOpen]);\n\n  const handleClose = () => setOpen(false);\n\n  const helptextEntries = Object.entries(helptext);\n\n  // https://material-ui.com/components/steppers/#dots\n  const steps = helptextEntries.length;\n  const [activeStep, setActiveStep] = useState(0);\n\n  const handleNext = () => {\n    setActiveStep((prev) => mod(prev + 1, steps));\n  };\n\n  const handleBack = () => {\n    setActiveStep((prev) => mod(prev - 1, steps));\n  };\n\n  const contentRef = useRef<HTMLElement>();\n  // scroll to top of Markdown if page changes\n  useEffect(() => {\n    contentRef.current?.scrollTo({ top: 0 });\n  }, [activeStep]);\n\n  return (\n    <Dialog onClose={handleClose} open={open}>\n      <DialogTitle onClose={handleClose}>\n        <HelpOutline style={{ marginRight: 8 }} />\n        Help\n      </DialogTitle>\n      <DialogContent dividers ref={contentRef}>\n        {helptextEntries.map(([name, md], i) => (\n          <Fade\n            in={i === activeStep}\n            // hide this element if it's not being show,\n            // otherwise it will take up vertical space\n            style={i === activeStep ? {} : { display: 'none' }}\n            key={name}\n          >\n            <div>\n              <MarkdownFromFile f={md} />\n            </div>\n          </Fade>\n        ))}\n\n        {/* <SwipeableViews\n          // don't enable mouse events: a user may want to copy text\n          // enableMouseEvents\n          resistance\n          animateHeight\n          hysteresis={0.2}\n          index={activeStep}\n          onChangeIndex={handleStepChange}\n          style={{\n            // explicitly make all the available area swipeable:\n            // makes it possible to swipe on empty areas without content\n            minHeight: '100%',\n          }}\n          // the library doesn't appear to support functional components\n          // and hooks well (useRef also bugged)... this is only a partial\n          // solution for now\n          // slideRenderer={slideRenderer}\n        >\n          {helptextEntries.map(([name, md], k) => (\n            <div key={k}>\n              <MarkdownFromFile f={md} />\n            </div>\n          ))}\n        </SwipeableViews> */}\n      </DialogContent>\n\n      <DialogActions style={{ padding: 2 }}>\n        <MobileStepper\n          variant=\"dots\"\n          steps={steps}\n          position=\"static\"\n          activeStep={activeStep}\n          style={{\n            backgroundColor: 'inherit',\n            flexGrow: 1,\n            // width: '100%',\n            maxWidth: 240,\n            margin: 'auto',\n            padding: 0,\n          }}\n          nextButton={\n            // <Button variant=\"text\" onClick={handleNext} endIcon={<KeyboardArrowRight />}>\n            //   Next\n            // </Button>\n            <IconButton color=\"primary\" onClick={handleNext}>\n              <KeyboardArrowRight />\n            </IconButton>\n          }\n          backButton={\n            // <Button variant=\"text\" onClick={handleBack} startIcon={<KeyboardArrowLeft />}>\n            //   Back\n            // </Button>\n            <IconButton color=\"primary\" onClick={handleBack}>\n              <KeyboardArrowLeft />\n            </IconButton>\n          }\n        />\n      </DialogActions>\n    </Dialog>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/info.5e092896.md\";","import {\n  Box,\n  Grid,\n  Paper,\n  Snackbar,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport { InfoOutlined } from '@material-ui/icons';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport LaunchIcon from '@material-ui/icons/Launch';\n// for evaluating build time\nimport preval from 'preval.macro';\nimport React, { useMemo, useState } from 'react';\nimport { InfoDialogProps } from '../../common/info';\nimport clientDetect from '../../dist/clientDetect';\nimport {\n  Alert,\n  DialogActions,\n  DialogContent,\n  DialogDivider,\n  DialogTitle,\n} from '../custom/DialogComponents';\nimport survey from '../surveyLink.json';\nimport infoTextMarkdown from './info.md';\nimport { MarkdownFromFile } from './MarkdownOverrides';\n\nconst dateTimeStamp = preval`module.exports = new Date();`;\nconst GITSHA = process.env.REACT_APP_GIT_SHA;\n\nexport default function InfoDialog({\n  ctrl: [open, setOpen],\n}: InfoDialogProps): JSX.Element {\n  const [snackBarOpen, setSnackBarOpen] = useState(false);\n\n  const handleClose = () => setOpen(false);\n\n  // guard against null / undefined window\n  const clientData = useMemo(() => clientDetect(window), []);\n\n  const writeClientDataToClipboard = () => {\n    const data = JSON.stringify(clientData);\n    console.log(snackBarOpen);\n    try {\n      navigator.clipboard.writeText(data);\n      setSnackBarOpen(true);\n    } catch (e) {\n      window.prompt('Auto copy to clipboard failed, please copy manually:', data);\n    }\n  };\n\n  return (\n    <Dialog onClose={handleClose} open={open}>\n      <DialogTitle onClose={handleClose}>\n        <InfoOutlined style={{ marginRight: 8 }} />\n        About\n      </DialogTitle>\n      <DialogContent dividers>\n        <Grid\n          container\n          justify=\"center\"\n          style={{\n            marginBottom: 16,\n          }}\n        >\n          <Grid item>\n            <Button\n              color=\"primary\"\n              endIcon={<GitHubIcon />}\n              startIcon={<LaunchIcon />}\n              href=\"https://github.com/JMaio/mandelbrot-maps\"\n              target=\"_blank\"\n              rel=\"noopener\"\n            >\n              View on GitHub\n            </Button>\n          </Grid>\n        </Grid>\n\n        <MarkdownFromFile f={infoTextMarkdown} />\n\n        <DialogDivider />\n\n        <Box style={{ display: 'flex' }}>\n          <TableContainer\n            component={Paper}\n            style={{ width: 'auto', margin: 'auto', maxWidth: 460 }}\n            // attempt to stop manual copying of the table\n            onClick={writeClientDataToClipboard}\n            // https://stackoverflow.com/a/46337736/9184658\n            onContextMenu={(e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n              e.preventDefault();\n              writeClientDataToClipboard();\n            }}\n          >\n            <Table size=\"small\" aria-label=\"a dense table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"center\" colSpan={2} variant=\"head\">\n                    Device properties\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {Object.entries(clientData).map(([k, v]) => (\n                  <TableRow key={k}>\n                    <TableCell style={{ userSelect: 'none' }}>{k}</TableCell>\n                    <TableCell align=\"right\" style={{ fontFamily: 'monospace' }}>\n                      {String(v)}\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n\n        <DialogDivider />\n\n        <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n          <Typography align=\"center\" style={{ margin: 'auto' }}>\n            Build\n          </Typography>\n          <Button\n            color=\"primary\"\n            variant=\"outlined\"\n            startIcon={<LaunchIcon />}\n            href={`https://github.com/JMaio/mandelbrot-maps/tree/${GITSHA}`}\n            // href={`https://${process.env.REPOSITORY}/tree/${GITSHA}`}\n            target=\"_blank\"\n            rel=\"noopener\"\n            style={{ margin: '8px 0' }}\n          >\n            {GITSHA}\n          </Button>\n          <code>{dateTimeStamp}</code>\n        </Box>\n      </DialogContent>\n\n      <DialogActions>\n        <Button\n          onClick={() => {\n            writeClientDataToClipboard();\n          }}\n          color=\"primary\"\n          variant=\"outlined\"\n          startIcon={<FileCopyIcon />}\n        >\n          Copy info\n        </Button>\n        <Snackbar\n          open={snackBarOpen}\n          autoHideDuration={5000}\n          // clicking outside the snackbar would trigger close\n          onClose={(e, reason) => {\n            switch (reason) {\n              case 'clickaway':\n                // don't close the snackbar on clicking outside\n                break;\n              default:\n                setSnackBarOpen(false);\n            }\n          }}\n        >\n          <Alert onClose={() => setSnackBarOpen(false)} severity=\"info\">\n            Device properties copied!\n          </Alert>\n        </Snackbar>\n        <Button\n          color=\"primary\"\n          variant=\"outlined\"\n          startIcon={<LaunchIcon />}\n          href={survey.link}\n          target=\"_blank\"\n          rel=\"noopener\"\n        >\n          Feedback\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","/* eslint-disable */\n/**\n * JavaScript Client Detection\n * (C) viazenetti GmbH (Christian Ludwig)\n *\n * modified by @JMaio\n */\nexport default function clientDetect(window) {\n  var unknown = '-';\n\n  // screen\n  var screenSize = '';\n  if (window.screen.width) {\n    var width = window.screen.width ? window.screen.width : '';\n    var height = window.screen.height ? window.screen.height : '';\n    screenSize += '' + width + ' x ' + height;\n  }\n\n  // inner window\n  var windowSize = '';\n  if (window.screen.width) {\n    var w = window.innerWidth ? window.innerWidth : '';\n    var h = window.innerHeight ? window.innerHeight : '';\n    windowSize += '' + w + ' x ' + h;\n  }\n\n  // browser\n  var nVer = navigator.appVersion;\n  var nAgt = navigator.userAgent;\n  var browser = navigator.appName;\n  var version = '' + parseFloat(navigator.appVersion);\n  var majorVersion = parseInt(navigator.appVersion, 10);\n  var nameOffset, verOffset, ix;\n\n  // Opera\n  if ((verOffset = nAgt.indexOf('Opera')) != -1) {\n    browser = 'Opera';\n    version = nAgt.substring(verOffset + 6);\n    if ((verOffset = nAgt.indexOf('Version')) != -1) {\n      version = nAgt.substring(verOffset + 8);\n    }\n  }\n  // Opera Next\n  if ((verOffset = nAgt.indexOf('OPR')) != -1) {\n    browser = 'Opera';\n    version = nAgt.substring(verOffset + 4);\n  }\n  // Edge\n  else if ((verOffset = nAgt.indexOf('Edge')) != -1) {\n    browser = 'Microsoft Edge';\n    version = nAgt.substring(verOffset + 5);\n  }\n  // MSIE\n  else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {\n    browser = 'Microsoft Internet Explorer';\n    version = nAgt.substring(verOffset + 5);\n  }\n  // Chrome\n  else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {\n    browser = 'Chrome';\n    version = nAgt.substring(verOffset + 7);\n  }\n  // Safari\n  else if ((verOffset = nAgt.indexOf('Safari')) != -1) {\n    browser = 'Safari';\n    version = nAgt.substring(verOffset + 7);\n    if ((verOffset = nAgt.indexOf('Version')) != -1) {\n      version = nAgt.substring(verOffset + 8);\n    }\n  }\n  // Firefox\n  else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {\n    browser = 'Firefox';\n    version = nAgt.substring(verOffset + 8);\n  }\n  // MSIE 11+\n  else if (nAgt.indexOf('Trident/') != -1) {\n    browser = 'Microsoft Internet Explorer';\n    version = nAgt.substring(nAgt.indexOf('rv:') + 3);\n  }\n  // Other browsers\n  else if (\n    (nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))\n  ) {\n    browser = nAgt.substring(nameOffset, verOffset);\n    version = nAgt.substring(verOffset + 1);\n    if (browser.toLowerCase() == browser.toUpperCase()) {\n      browser = navigator.appName;\n    }\n  }\n  // trim the version string\n  if ((ix = version.indexOf(';')) != -1) version = version.substring(0, ix);\n  if ((ix = version.indexOf(' ')) != -1) version = version.substring(0, ix);\n  if ((ix = version.indexOf(')')) != -1) version = version.substring(0, ix);\n\n  majorVersion = parseInt('' + version, 10);\n  if (isNaN(majorVersion)) {\n    version = '' + parseFloat(navigator.appVersion);\n    majorVersion = parseInt(navigator.appVersion, 10);\n  }\n\n  // mobile version\n  var mobile = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);\n\n  // cookie\n  var cookieEnabled = navigator.cookieEnabled ? true : false;\n\n  if (typeof navigator.cookieEnabled == 'undefined' && !cookieEnabled) {\n    document.cookie = 'testcookie';\n    cookieEnabled = document.cookie.indexOf('testcookie') != -1 ? true : false;\n  }\n\n  // system\n  var os = unknown;\n  var clientStrings = [\n    { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\n    { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\n    { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\n    { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\n    { s: 'Windows Vista', r: /Windows NT 6.0/ },\n    { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\n    { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\n    { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },\n    { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },\n    { s: 'Windows 98', r: /(Windows 98|Win98)/ },\n    { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },\n    { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\n    { s: 'Windows CE', r: /Windows CE/ },\n    { s: 'Windows 3.11', r: /Win16/ },\n    { s: 'Android', r: /Android/ },\n    { s: 'Open BSD', r: /OpenBSD/ },\n    { s: 'Sun OS', r: /SunOS/ },\n    { s: 'Chrome OS', r: /CrOS/ },\n    { s: 'Linux', r: /(Linux|X11(?!.*CrOS))/ },\n    { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\n    { s: 'Mac OS X', r: /Mac OS X/ },\n    { s: 'Mac OS', r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n    { s: 'QNX', r: /QNX/ },\n    { s: 'UNIX', r: /UNIX/ },\n    { s: 'BeOS', r: /BeOS/ },\n    { s: 'OS/2', r: /OS\\/2/ },\n    {\n      s: 'Search Bot',\n      r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/,\n    },\n  ];\n  for (var id in clientStrings) {\n    var cs = clientStrings[id];\n    if (cs.r.test(nAgt)) {\n      os = cs.s;\n      break;\n    }\n  }\n\n  var osVersion = unknown;\n\n  if (/Windows/.test(os)) {\n    osVersion = /Windows (.*)/.exec(os)[1];\n    os = 'Windows';\n  }\n\n  switch (os) {\n    case 'Mac OS X':\n      osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\n      break;\n\n    case 'Android':\n      osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\n      break;\n\n    case 'iOS':\n      osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\n      osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\n      break;\n\n    default:\n      break;\n  }\n\n  // user agent string manipulation to obtain device model\n  var system = nAgt.substring(nAgt.indexOf('(') + 1, nAgt.indexOf(')'));\n  var device = system.substring(system.lastIndexOf(';') + 1);\n\n  // use JavaScript to detect GPU used from within your browser - by cvan\n  // https://gist.github.com/cvan/042b2448fcecefafbb6a91469484cdf8\n  var canvas = document.createElement('canvas');\n  var gl;\n  var debugInfo;\n  var gpuVendor;\n  var renderer;\n\n  try {\n    gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    // move block here if webgl not available\n    // if (gl) {\n    debugInfo = gl.getExtension('WEBGL_debug_renderer_info');\n    gpuVendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);\n    renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);\n    // }\n  } catch (e) {\n    //   do nothing\n  }\n  // ----------------------------------------------------------------\n\n  //   window.jscd = {\n  return {\n    browser: browser,\n    browserVersion: majorVersion,\n    browserRelease: version,\n    // vendor: navigator.vendor,\n    device: device,\n    os: os,\n    osVersion: osVersion,\n    mobile: mobile,\n    platform: navigator.platform,\n    screen: screenSize,\n    windowSize: windowSize,\n    dpr: +window.devicePixelRatio.toFixed(3),\n    gpu: renderer,\n    gpuVendor: gpuVendor,\n    userAgent: navigator.userAgent,\n    // cookies: cookieEnabled,\n    // flashVersion: flashVersion\n  };\n}\n// (this)\n\n// alert(\n//     'OS: ' + jscd.os +' '+ jscd.osVersion + '\\n' +\n//     'Browser: ' + jscd.browser +' '+ jscd.browserMajorVersion +\n//       ' (' + jscd.browserVersion + ')\\n' +\n//     'Mobile: ' + jscd.mobile + '\\n' +\n//     'Flash: ' + jscd.flashVersion + '\\n' +\n//     'Cookies: ' + jscd.cookies + '\\n' +\n//     'Screen Size: ' + jscd.screen + '\\n\\n' +\n//     'Full User Agent: ' + navigator.userAgent\n// );\n","// TODO set max iterations as parameter\n\nimport { RendererRenderValues } from '../common/render';\n\nconst newSmoothJuliaShader = ({\n  maxI = 300,\n  AA = 1,\n  B = 64,\n}: RendererRenderValues): string => `\n\n#define AA ${AA}\n#define MAXI ${maxI}\n#define B ${B.toFixed(1)}\n\n// https://webglfundamentals.org/webgl/lessons/webgl-precision-issues.html\n// prefer high float precision (lower than this may break colours on mobile)\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n// need to know the resolution of the canvas\nuniform vec2 resolution;\n\n// properties should be passed as uniforms\nuniform int   u_maxI;\nuniform vec2  u_xy;\nuniform vec2  u_c;\nuniform float u_zoom;\nuniform float u_theta;\nuniform vec3  u_colour;\n\nfloat julia( vec2 z, vec2 c ) {\n\n  float l = 0.0;\n  for( int i=0; i<MAXI; i++ )\n  {\n      z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c;\n      if( dot(z,z)>(B*B) ) break;\n      l += 1.0;\n  }\n\n  // maxed out iterations\n  if( l>float(MAXI)-1.0 ) return 0.0;\n\n  // equivalent optimized smooth interation count\n  l = l - log2(log2(dot(z,z))) + 4.0;\n\n  return l;\n}\n\nvoid main() {    \n  // set the initial colour to black\n  vec3 col = vec3(0.0);\n\n  // anti-aliasing\n  #if AA>1\n  for( int m=0; m<AA; m++ )\n  for( int n=0; n<AA; n++ )\n  {\n      vec2 p = (2.0*(gl_FragCoord.xy + vec2(float(m), float(n)) / float(AA) ) - resolution.xy)/resolution.y;\n      float w = float(AA*m+n);\n  #else    \n      // adjust pixels to range from [-1, 1]\n      vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\n  #endif\n  \n  // constant \"c\" to add, based on mandelbrot position\n  vec2 c = u_c;\n\n  float sinT = sin(u_theta);\n  float cosT = cos(u_theta);\n\n  vec2 xy = vec2( p.x*cosT - p.y*sinT, p.x*sinT + p.y*cosT );\n  // c is based on offset and grid position, z_0 = 0\n  vec2 z = u_xy + xy/u_zoom;\n\n  float l = julia(z, c);\n  // col += 0.5 + 0.5*cos( 3.0 + l*0.15 + vec3(0.0,0.6,1.0));\n  col += 0.5 + 0.5*cos( 3.0 + l*0.15 + u_colour);\n\n\n  // antialiasing\n  #if AA>1\n  }\n  col /= float(AA*AA);\n  #endif\n\n  // Output to screen\n  gl_FragColor = vec4( col, 1.0 );\n}\n`;\n\nexport default newSmoothJuliaShader;\n","export const fullVertexShader = `\nattribute vec4 position;\n\nvoid main() {\n  gl_Position = position;\n}\n`;\n\n// This \"position\" array specifies the vertex positions of the element\n// to be displayed by the vertex shader. It represents two triangles,\n// each filling half of the screen diagonally, and together filling the\n// full canvas space to allow the fragment shader to act on the full canvas.\nexport const fullscreenVertexArray = {\n  position: {\n    data: [-1, -1, 0, 1, -1, 0, -1, 1, 0, -1, 1, 0, 1, -1, 0, 1, 1, 0],\n    numComponents: 3,\n  },\n  // this array can only be used with \"gl.TRIANGLE_FAN\"\n  // position: { data: [1, 1, 1, -1, -1, -1, -1, 1], numComponents: 2 }\n};\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { animated } from 'react-spring';\nimport * as twgl from 'twgl.js';\nimport { WebGLCanvasProps } from '../../common/render';\nimport { fullscreenVertexArray, fullVertexShader } from '../../shaders/fullVertexShader';\n\n// https://mariusschulz.com/blog/typing-destructured-object-parameters-in-typescript\n// https://stackoverflow.com/a/50294843/9184658\nconst WebGLCanvas = React.forwardRef<HTMLCanvasElement, WebGLCanvasProps>(\n  (props: WebGLCanvasProps, refAny) => {\n    // const { mini = false, ...rest } = props;\n    // props:\n    // id\n    // fragShader\n    // -- uniforms:\n    //    u_zoom\n    //    u_pos\n    //    u_maxI\n    // ref\n    // glRef\n\n    const canvasRef = refAny as React.MutableRefObject<HTMLCanvasElement>;\n\n    const gl = useRef<WebGLRenderingContext | null>();\n    const renderRequestRef = useRef<number>();\n    const bufferInfo = useRef<twgl.BufferInfo>();\n    const programInfo = useRef<twgl.ProgramInfo>();\n\n    const u = props.u;\n    const setFps = props.setFPS;\n\n    // have a zoom callback\n    // keeps minimaps at a fixed zoom level\n    const zoom = useCallback(() => (props.mini ? 0.95 : props.u.zoom.getValue()), [\n      props.mini,\n      props.u.zoom,\n    ]);\n\n    // const DPR = props.useDPR ? props.DPR : 1;\n\n    // canvas setup step - get webgl context\n    const setupCanvas = useCallback(() => {\n      gl.current = canvasRef.current.getContext('webgl');\n      console.debug(`WebGL canvas context created`);\n    }, [gl, canvasRef]);\n\n    useEffect(() => {\n      setupCanvas();\n\n      // https://www.khronos.org/webgl/wiki/HandlingContextLost\n      canvasRef.current.addEventListener(\n        'webglcontextlost',\n        (event: Event) => {\n          console.error('WebGL context lost!');\n          event.preventDefault();\n          // trigger an error alert in future?\n        },\n        false,\n      );\n      canvasRef.current.addEventListener(\n        'webglcontextrestored',\n        (event: Event) => {\n          console.error('WebGL context restored! Setting up...');\n          setupCanvas();\n        },\n        false,\n      );\n\n      // remove this context?\n      // return () => gl.current ??\n    }, [canvasRef, setupCanvas]);\n\n    const compileShader = useCallback(() => {\n      const ctx = gl.current as WebGLRenderingContext;\n      bufferInfo.current = twgl.createBufferInfoFromArrays(ctx, fullscreenVertexArray);\n      programInfo.current = twgl.createProgramInfo(ctx, [\n        fullVertexShader,\n        props.fragShader,\n      ]);\n      console.debug(`Fragment shader compiled`);\n    }, [gl, props.fragShader]);\n\n    // re-compile program if shader changes\n    useEffect(compileShader, [compileShader]);\n\n    const then = useRef(0);\n    const frames = useRef(0);\n    const elapsedTime = useRef(0);\n    // fps update interval\n    const interval = 1000;\n\n    // the main render function for WebGL\n    const render = useCallback(\n      (time) => {\n        const ctx = gl.current as WebGLRenderingContext;\n        const prog = programInfo.current as twgl.ProgramInfo;\n        const buff = bufferInfo.current as twgl.BufferInfo;\n\n        twgl.resizeCanvasToDisplaySize(canvasRef.current, props.DPR);\n        // scale the viewport to the canvas size\n        ctx.viewport(0, 0, canvasRef.current.width, canvasRef.current.height);\n\n        const uniforms = {\n          resolution: [canvasRef.current.width, canvasRef.current.height],\n          u_zoom: zoom(),\n          u_c: u.c === undefined ? 0 : u.c.getValue(),\n          u_xy: u.xy.getValue(),\n          u_maxI: u.maxI,\n          u_theta: u.theta.getValue(),\n          u_colour: u.colour,\n        };\n\n        ctx.useProgram(prog.program);\n        twgl.setBuffersAndAttributes(ctx, prog, buff);\n        twgl.setUniforms(prog, uniforms);\n        twgl.drawBufferInfo(ctx, buff);\n\n        // calculate fps\n        if (setFps !== undefined) {\n          frames.current++;\n          elapsedTime.current += time - then.current;\n          then.current = time;\n\n          // console.log(elapsedTime.current);\n          if (elapsedTime.current >= interval) {\n            //multiply with (1000 / elapsed) for accuracy\n            setFps((frames.current * (interval / elapsedTime.current)).toFixed(1));\n            frames.current = 0;\n            elapsedTime.current -= interval;\n\n            // document.getElementById('test').innerHTML = fps;\n          }\n        }\n\n        // The 'state' will always be the initial value here\n        renderRequestRef.current = requestAnimationFrame(render);\n      },\n      [gl, u, zoom, props.DPR, setFps, interval, canvasRef],\n    );\n\n    useEffect(() => {\n      renderRequestRef.current = requestAnimationFrame(render);\n      return () => cancelAnimationFrame(renderRequestRef.current as number);\n    }, [render]);\n\n    return (\n      <animated.canvas\n        className=\"renderer\"\n        ref={refAny}\n        id={props.id}\n        style={{\n          // cursor should show whether the viewer is being grabbed\n          cursor: props.dragging ? 'grabbing' : 'grab',\n          // adding style allows direct style override\n          ...props.style,\n        }}\n      />\n    );\n  },\n);\n\nWebGLCanvas.displayName = 'WebGLCanvas';\n\nexport default WebGLCanvas;\n","import { ButtonBase, Grow, makeStyles } from '@material-ui/core';\nimport React from 'react';\nimport { MinimapViewerProps } from '../../common/render';\nimport { simpleBoxShadow } from '../../theme/theme';\nimport WebGLCanvas from './WebGLCanvas';\n\nconst miniSize = 100;\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    borderRadius: theme.shape.borderRadius,\n  },\n}));\n\nconst MinimapViewer = (props: MinimapViewerProps): JSX.Element => {\n  const { canvasRef, onClick, show, ...rest } = props;\n  const classes = useStyles();\n\n  return (\n    <Grow in={show}>\n      <ButtonBase\n        style={{\n          position: 'absolute',\n          // make minimap stick out through backdrop\n          zIndex: 1300,\n          margin: '0.5rem',\n          left: 0,\n          bottom: 0,\n          // cursor: 'pointer',\n          height: miniSize,\n          width: miniSize,\n          // borderRadius: borderRadius,\n          // border: \"1px solid #000\",\n          boxShadow: simpleBoxShadow,\n          overflow: 'hidden',\n          // opacity: zoom.interpolate((z) => _.clamp(z - 1, 0, 1)),\n          // display: zoom.interpolate((z) => (_.clamp(z - 1, 0, 1) === 0 ? 'none' : 'block')),\n        }}\n        onClick={onClick}\n        className={classes.root}\n      >\n        <WebGLCanvas\n          id={props.id}\n          mini={true}\n          ref={canvasRef}\n          {...rest}\n          // setting border radius here stops the canvas clickable area from overflowing\n          // outside the div circle, which would make the clickable area a rectangle\n          style={{\n            // borderRadius: borderRadius,\n            // cursor should be \"pointer\" (looks clickable) if this is a minimap,\n            cursor: 'pointer',\n          }}\n        />\n      </ButtonBase>\n    </Grow>\n  );\n};\nexport default MinimapViewer;\n","import React, { useRef, useState } from 'react';\nimport { useGesture } from 'react-use-gesture';\nimport { JuliaRendererProps } from '../../common/render';\nimport { MandelbrotMapsWebGLUniforms } from '../../common/types';\nimport { genericTouchBind, Rgb255ColourToFloat } from '../../common/utils';\nimport newSmoothJuliaShader from '../../shaders/newSmoothJuliaShader';\nimport { SettingsContext } from '../settings/SettingsContext';\nimport MinimapViewer from './MinimapViewer';\nimport WebGLCanvas from './WebGLCanvas';\n\nexport default function JuliaRenderer({\n  precision,\n  ...props\n}: JuliaRendererProps): JSX.Element {\n  // variables to hold canvas and webgl information\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const miniCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  const [{ xy }] = props.controls.xyCtrl;\n  const [{ z }, setControlZoom] = props.controls.zoomCtrl;\n  const [{ theta }] = props.controls.rotCtrl;\n  const maxI = props.maxI; // -> global\n  const AA = props.useAA ? 2 : 1;\n\n  const fragShader = newSmoothJuliaShader({\n    maxI: maxI,\n    AA: AA,\n  });\n\n  const miniFragShader = newSmoothJuliaShader({\n    maxI: maxI,\n    AA: 2,\n  });\n\n  const u: MandelbrotMapsWebGLUniforms = {\n    zoom: z,\n    xy: xy,\n    c: props.c,\n    theta: theta,\n    maxI: maxI,\n    colour: Rgb255ColourToFloat(props.colour),\n  };\n\n  const [dragging, setDragging] = useState(false);\n\n  const gtb = genericTouchBind({\n    domTarget: canvasRef,\n    controls: props.controls,\n    setDragging: setDragging,\n    DPR: props.DPR,\n    precision: precision,\n  });\n\n  useGesture(gtb.handlers, gtb.config);\n\n  return (\n    <SettingsContext.Consumer>\n      {({ settings }) => (\n        <div\n          className=\"renderer\"\n          style={{\n            position: 'relative',\n          }}\n        >\n          <WebGLCanvas\n            id=\"julia-canvas\"\n            fragShader={fragShader}\n            DPR={props.DPR}\n            u={u}\n            ref={canvasRef}\n            dragging={dragging}\n          />\n          <MinimapViewer\n            id=\"julia-minimap-canvas\"\n            fragShader={miniFragShader}\n            DPR={props.DPR}\n            u={u}\n            canvasRef={miniCanvasRef}\n            onClick={() => setControlZoom({ z: 1 })}\n            show={settings.showMinimap}\n          />\n        </div>\n      )}\n    </SettingsContext.Consumer>\n  );\n}\n","// TODO set max iterations as parameter, crosshair as parameter\n\nimport { RendererRenderValues } from '../common/render';\n\nconst makeCrosshair = (stroke: number, radius: number) => ({\n  stroke,\n  radius,\n});\n\nexport const standardCrosshair = makeCrosshair(2, 100);\nexport const miniCrosshair = makeCrosshair(1, 30);\n\nexport interface MandelbrotShaderParams {\n  maxI: number;\n  /** Radial boundary */\n  B: number;\n  /** Anti-aliasing samples */\n  AA: number;\n}\n\nconst newSmoothMandelbrotShader = (\n  { maxI = 300, AA = 1, B = 64 }: RendererRenderValues,\n  showCrosshair = true,\n  crosshairShape = {\n    stroke: 2,\n    radius: 100,\n  },\n): string => {\n  return `\n// Adapted by Joao Maio/2019, based on work by inigo quilez - iq/2013\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n// See here for more information on smooth iteration count:\n// http://iquilezles.org/www/articles/mset_smooth/mset_smooth.htm\n\n#define false 0\n#define true 1\n\n// render parameters\n#define AA ${AA}\n#define MAXI ${maxI}\n#define B ${B.toFixed(1)}\n\n// crosshair parameters\n#define show_crosshair ${showCrosshair}\n#define cross_stroke ${crosshairShape.stroke.toFixed(1)}\n#define cross_radius ${crosshairShape.radius.toFixed(1)}\n\n// https://webglfundamentals.org/webgl/lessons/webgl-precision-issues.html\n// prefer high float precision (lower than this may break colours on mobile)\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n// need to know the resolution of the canvas\nuniform vec2 resolution;\n\n// properties should be passed as uniforms\nuniform int   u_maxI;  \nuniform vec2  u_xy;\nuniform float u_zoom;\nuniform float u_theta;\nuniform vec3  u_colour;\n\nbool crosshair( float x, float y ) {\n  float abs_x = abs(2.0*x - resolution.x);\n  float abs_y = abs(2.0*y - resolution.y);\n\n  return \n  // crosshair in centre of screen\n  (abs_x <= cross_stroke || abs_y <= cross_stroke) &&\n  // crosshair size / \"radius\"\n  (abs_x <= cross_radius && abs_y <= cross_radius);\n}\n\nfloat mandelbrot( in vec2 c ) {\n    {\n        float c2 = dot(c, c);\n        // skip computation inside M1 - http://iquilezles.org/www/articles/mset_1bulb/mset1bulb.htm\n        if( 256.0*c2*c2 - 96.0*c2 + 32.0*c.x - 3.0 < 0.0 ) return 0.0;\n        // skip computation inside M2 - http://iquilezles.org/www/articles/mset_2bulb/mset2bulb.htm\n        if( 16.0*(c2+2.0*c.x+1.0) - 1.0 < 0.0 ) return 0.0;\n    }\n\n    float l = 0.0;\n    vec2 z  = vec2(0.0);\n    for( int i=0; i<MAXI; i++ )\n    {\n        z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y ) + c;\n        if( dot(z,z)>(B*B) ) break;\n        l += 1.0;\n    }\n\n    // maxed out iterations\n    if( l>float(MAXI)-1.0 ) return 0.0;\n    \n    // optimized smooth interation count\n    l = l - log2(log2(dot(z,z))) + 4.0;\n\n    return l;\n}\n\nvoid main() {    \n    // set the initial colour to black\n    vec3 col = vec3(0.0);\n\n    // anti-aliasing\n    #if AA>1\n    for( int m=0; m<AA; m++ )\n    for( int n=0; n<AA; n++ )\n    {\n        // vec2 p = (-iResolution.xy + 2.0*(fragCoord.xy+vec2(float(m),float(n))/float(AA)))/iResolution.y;\n        vec2 p = (2.0*(gl_FragCoord.xy + vec2(float(m), float(n)) / float(AA) ) - resolution.xy)/resolution.y;\n        float w = float(AA*m+n);\n    #else    \n        // adjust pixels to range from [-1, 1]\n        vec2 p = (2.0*gl_FragCoord.xy - resolution.xy)/resolution.y;\n    #endif\n\n    float sinT = sin(u_theta);\n    float cosT = cos(u_theta);\n\n    vec2 xy = vec2( p.x*cosT - p.y*sinT, p.x*sinT + p.y*cosT );\n    // c is based on offset and grid position, z_0 = 0\n    vec2 c = u_xy + xy/u_zoom;\n    \n    float l = mandelbrot(c);\n    // col += 0.5 + 0.5*cos( 3.0 + l*0.15 + vec3(0.0,0.6,1.0));\n    col += 0.5 + 0.5*cos( 3.0 + l*0.15 + u_colour);\n\n    // antialiasing\n    #if AA>1\n    }\n    col /= float(AA*AA);\n    #endif\n\n    #if show_crosshair\n    if (crosshair(gl_FragCoord.x, gl_FragCoord.y)) {\n        col = 1. - col;\n    }\n    #endif\n\n    // Output to screen\n    gl_FragColor = vec4( col, 1.0 );\n}\n    `;\n};\n\nexport default newSmoothMandelbrotShader;\n","import { Card, Grow } from '@material-ui/core';\nimport React from 'react';\nimport { animated } from 'react-spring';\nimport { FPSCardProps } from '../../common/info';\n\nconst FPSCard = (props: FPSCardProps): JSX.Element => (\n  <Grow in={props.show}>\n    <Card\n      style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        padding: '4px 12px',\n        margin: 6,\n        fontFamily: 'monospace',\n        borderRadius: 100,\n        fontSize: '1.8rem',\n        zIndex: 1300,\n        userSelect: 'none',\n      }}\n    >\n      <animated.div>{props.FPS}</animated.div>\n    </Card>\n  </Grow>\n);\n\nexport default FPSCard;\n","import React, { useRef, useState } from 'react';\nimport { useGesture } from 'react-use-gesture';\nimport { MandelbrotRendererProps } from '../../common/render';\nimport { MandelbrotMapsWebGLUniforms } from '../../common/types';\nimport { genericTouchBind, Rgb255ColourToFloat } from '../../common/utils';\nimport newSmoothMandelbrotShader, {\n  miniCrosshair,\n  standardCrosshair,\n} from '../../shaders/newSmoothMandelbrotShader';\nimport FPSCard from '../info/FPSCard';\nimport { SettingsContext } from '../settings/SettingsContext';\nimport MinimapViewer from './MinimapViewer';\nimport WebGLCanvas from './WebGLCanvas';\n\nexport default function MandelbrotRenderer({\n  precision,\n  ...props\n}: MandelbrotRendererProps): JSX.Element {\n  // variables to hold canvas and webgl information\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const miniCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  // const gl = useRef<WebGLRenderingContext>(null);\n  // const miniGl = useRef<WebGLRenderingContext>(null);\n\n  // this multiplier subdivides the screen space into smaller increments\n  // to allow for velocity calculations to not immediately decay, due to the\n  // otherwise small scale that is being mapped to the screen.\n  // const screenScaleMultiplier = props.screenScaleMultiplier; // -> global\n\n  // temporary bounds to prevent excessive panning\n  // eslint-disable-next-line\n  // const radialBound = 1;\n  // const relativeRadialBound = radialBound;// / -screenScaleMultiplier;\n\n  // read incoming props\n  const [{ xy }] = props.controls.xyCtrl;\n  // const [{ theta, last_pointer_angle }, setControlRot] = props.controls.rot;\n  const [{ z }, setControlZoom] = props.controls.zoomCtrl;\n  const [{ theta }] = props.controls.rotCtrl;\n  const maxI = props.maxI; // -> global\n  const AA = props.useAA ? 2 : 1; // -> global\n\n  const fragShader = newSmoothMandelbrotShader(\n    {\n      maxI: maxI,\n      AA: AA,\n    },\n    props.showCrosshair,\n    standardCrosshair,\n  );\n  const miniFragShader = newSmoothMandelbrotShader(\n    {\n      maxI: maxI,\n      AA: 2,\n    },\n    props.showCrosshair,\n    miniCrosshair,\n  );\n\n  const u: MandelbrotMapsWebGLUniforms = {\n    zoom: z,\n    xy: xy,\n    theta: theta,\n    maxI: maxI,\n    colour: Rgb255ColourToFloat(props.colour), // vec3(0.0,0.6,1.0)\n    // screenScaleMultiplier: screenScaleMultiplier,\n  };\n\n  const [dragging, setDragging] = useState(false);\n\n  const gtb = genericTouchBind({\n    domTarget: canvasRef,\n    controls: props.controls,\n    // gl: gl,\n    setDragging: setDragging,\n    DPR: props.DPR,\n    precision: precision,\n  });\n\n  // https://use-gesture.netlify.app/docs/changelog/#breaking\n  // When adding events directly to the dom element using `domTarget`\n  // you no longer need to clean the effect yourself.\n  // const touchBind =\n  useGesture(gtb.handlers, gtb.config);\n\n  // useEffect(() => {\n  //   touchBind();\n  // }, [touchBind]);\n\n  const [FPS, setFPS] = useState('');\n\n  return (\n    <SettingsContext.Consumer>\n      {({ settings }) => (\n        <div\n          className=\"renderer\"\n          style={{\n            position: 'relative',\n          }}\n        >\n          <FPSCard FPS={FPS} show={settings.showFPS} />\n          <WebGLCanvas\n            id=\"mandelbrot-canvas\"\n            fragShader={fragShader}\n            DPR={props.DPR}\n            // touchBind={touchBind}\n            u={u}\n            ref={canvasRef}\n            // glRef={gl}\n            setFPS={setFPS}\n            dragging={dragging}\n          />\n          <MinimapViewer\n            id=\"mandelbrot-minimap-canvas\"\n            fragShader={miniFragShader}\n            DPR={props.DPR}\n            u={u}\n            canvasRef={miniCanvasRef}\n            // glRef={miniGl}\n            show={settings.showMinimap}\n            onClick={() => setControlZoom({ z: 1 })}\n          />\n        </div>\n      )}\n    </SettingsContext.Consumer>\n  );\n}\n","// TODO set max iterations as parameter, crosshair as parameter\n\nimport { RendererRenderValues } from '../common/render';\n\nconst makeCrosshair = (stroke: number, radius: number) => ({\n  stroke,\n  radius,\n});\n\nexport const standardCrosshair = makeCrosshair(2, 100);\nexport const miniCrosshair = makeCrosshair(1, 30);\n\nexport interface MandelbrotShaderParams {\n  maxI: number;\n  /** Radial boundary */\n  B: number;\n  /** Anti-aliasing samples */\n  AA: number;\n}\n\nexport const mandelbrotDeepVert = `\nprecision highp float;\n\nattribute vec2 position;\n\n// [sin, cos] of angle phi\n// uniform vec2 rotator;\nuniform float u_theta;\nvec2 sincosT = vec2(sin(u_theta), cos(u_theta));\n\nuniform vec2 center;\nuniform vec2 size;\nvarying vec2 delta;\n\nuniform vec2 u_xy;\nuniform float u_zoom;\n\nvoid main() {\n\n  /*  window coordinates with new origin in complex space  */\n  vec2 z = size * position;\n\n  // delta is the array of pixels?\n  delta = center + vec2(z.x * sincosT.y - z.y * sincosT.x, dot(z, sincosT));\n\n  // delta = center + vec2(z.x * sincosT.y - z.y * sincosT.x, dot(z, sincosT));\n\n  gl_Position = vec4(position, 0., 1.0);\n\n}`;\n\n// TODO: uniforms should also be typed (or at least declared)\nconst mandelbrotShaderDeep = (\n  { maxI = 300, AA = 1, B = 64 }: RendererRenderValues,\n  showCrosshair = true,\n  crosshairShape = {\n    stroke: 2,\n    radius: 100,\n  },\n): string => `\n// Adapted by Joao Maio/2021, based on work by @munrocket/deep-fractal\n// GNU GPL 3.0\n\n#define false 0\n#define true 1\n\n// render parameters\n#define AA ${AA}\n#define MAXI ${maxI}\n#define B ${B.toFixed(1)}\n\n// crosshair parameters\n#define show_crosshair ${showCrosshair}\n#define cross_stroke ${crosshairShape.stroke.toFixed(1)}\n#define cross_radius ${crosshairShape.radius.toFixed(1)}\n\n// https://webglfundamentals.org/webgl/lessons/webgl-precision-issues.html\n// prefer high float precision (lower than this may break colours on mobile)\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\n// need to know the resolution of the canvas\nuniform vec2  resolution;\n\n// properties should be passed as uniforms\n// uniform int   u_maxI;\nuniform vec2  u_xy;\nuniform float u_zoom;\nuniform vec3  u_colour;\nuniform float u_theta;\nvec2 sincosT = vec2(sin(u_theta), cos(u_theta));\n\nbool crosshair( float x, float y ) {\n  float abs_x = abs(2.0*x - resolution.x);\n  float abs_y = abs(2.0*y - resolution.y);\n\n  return \n  // crosshair in centre of screen\n  (abs_x <= cross_stroke || abs_y <= cross_stroke) &&\n  // crosshair size / \"radius\"\n  (abs_x <= cross_radius && abs_y <= cross_radius);\n}\n\n// ----- shader adapted from \"deep-fractal\" (@munrocket)\n\n// #define imax ${1024}\n#define square_radius ${3e5}.\n// #define super_sampling ${0}\n#define color_scheme ${0}\n#define is_julia ${0}\nconst float logLogRR = log2(log2(square_radius));\n\nvarying vec2 delta;\nvarying vec2 texcoord;\n\n// uniform vec2 rotator;\nuniform vec2 size;\nuniform vec2 pixelsize;\nuniform float texsize;\nuniform sampler2D orbittex;\nuniform sampler2D exteriortex;\n\n// this is a way to index into the \"texture\" matrix containing iteration data\nvec4 unpackOrbit(int i) {\n  float fi = float(i);\n  vec2 texcoord = vec2(mod(fi, texsize), floor(fi / texsize)) / texsize;\n  return texture2D(orbittex, texcoord);\n}\n\n// generic interpolation function?\nfloat interpolate(float s, float s1, float s2, float s3, float d) {\n  float d2 = d * d, d3 = d * d2;\n  return 0.5 * (s * (d3 - d2) + s1 * (d + 4.*d2 - 3.*d3) + s2 * (2. - 5.*d2 + 3.*d3) + s3 * (-d + 2.*d2 - d3));\n}\n\nstruct result {\n  float time;\n  float zz;\n  float dzdz;\n  float stripe;\n  float argZ;\n};\n\n/*  fractal calculator with perturbation theory for mandelbrot & julia set */\nresult calculator(vec2 AAfloat) {\n  // delta is calculated from the \"centre\" point\n  float u = delta.x + AAfloat.x, v = delta.y + AAfloat.y;\n  // float u = delta.x - u_xy.x + AAfloat.x, v = delta.y - u_xy.y + AAfloat.y;\n  // float u = u_xy.x + AAfloat.x, v = u_xy.y + AAfloat.y;\n  \n  // float u = 0., v = 0.;\n  float zz, time, temp, du = 0., dv = 0.;\n  float stripe, s1, s2, s3;\n  vec2 z, dz, O, dO;\n\n  for (int i = 0; i < MAXI; i++) {\n    /*  Recall global coordinates: Z = O + W, Z' = O' + W'  */\n    vec4 values = unpackOrbit(i);\n    O = values.xy;\n    dO = values.zw;\n    z = O + vec2(u, v);\n    dz = dO + vec2(du, dv);\n    zz = dot(z, z);\n\n    /*  Calc derivative:  dW'(u,v) -> 2 * (O' * W + Z * W')  */\n    temp = 2. * (dO.x * u - dO.y * v + z.x * du - z.y * dv);\n    dv =   2. * (dO.x * v + dO.y * u + z.x * dv + z.y * du);\n    du = temp;\n\n    /*  Next step in the iterative process:  W(u,v) -> W^2 + 2 * O * W + <delta>  */\n    temp = u * u - v * v + 2. * (u * O.x - v * O.y);\n    v =    u * v + u * v + 2. * (v * O.x + u * O.y);\n    u = temp;\n    #if (!is_julia)\n      u += delta.x;\n      v += delta.y;\n    #endif\n\n    /*  Stripe average, a color algo based on statistcs  */\n    #if (color_scheme == 0)\n      stripe += z.x * z.y / zz * step(0.0, time);\n      s3 = s2; s2 = s1; s1 = stripe;\n    #endif\n\n    /*  Loop in webgl1  */\n      time += 1.;\n      if (zz > square_radius) { break; }\n  }\n\n  time += clamp(1.0 + logLogRR - log2(log2(zz)), 0., 1.);\n  #if (color_scheme == 0)\n    stripe = interpolate(stripe, s1, s2, s3, fract(time));\n  #endif\n  return result(time, zz, dot(dz,dz), stripe, atan(z.y, z.x));\n}\n\nvoid main() {\n  /*  Get result  */\n  result R = calculator(vec2(0));\n\n  /*  DEM (Distance Estimation) = 2 * |Z / Z'| * ln(|Z|)  */\n  float dem = sqrt(R.zz / R.dzdz) * log2(R.zz);\n  float dem_weight = 800. / min(size.x, size.y);\n\n  /*  Adaptive supersampling with additional 4 points in SSAAx4 pattern */\n  // #if (super_sampling == 1 && color_scheme != 1)\n  #if (AA == 2 && color_scheme != 1)\n    if (-log2(dem * dem_weight) > 0.5) {\n      R.time /= 5.;\n      R.zz /= 5.;\n      R.dzdz /= 5.;\n      R.stripe /= 5.;\n      for (int i = 0; i < 4; i++) {\n        vec2 offset = pixelsize * vec2(vec4(-1., 3., 3., 1.)[i], vec4(-3., -1., 1., 3.)[i]) / 4.;\n        offset = vec2(offset.x * sincosT.y - offset.y * sincosT.x, dot(offset, sincosT));\n        result RI = calculator(offset);\n        R.time += RI.time / 5.;\n        R.zz += RI.zz / 5.;\n        R.dzdz += RI.dzdz / 5.;\n        R.stripe += RI.stripe / 5.;\n      }\n    }\n  #endif\n\n  /*  Final coloring  */\n  vec3 color;\n  #if (color_scheme == 0)\n    // // original colour scheme\n    // col += 0.5 + 0.5*cos( 3.0 + l*0.15 + u_colour);\n\n    // \"wisps\" / stripes\n    // color += 0.7 + 2.5 * (R.stripe / clamp(R.time, 0., 200.)) * (1. - 0.6 * step(float(MAXI), 1. + R.time));\n\n    // color = 0.5 + 0.5 * sin(color + vec3(4.0, 4.6, 5.2) + 50.0 * R.time / float(MAXI));\n    color = 0.5 + 0.5 * cos(3.0 + u_colour + 50.0 * R.time / float(MAXI));\n  #else\n    vec2 texcoord = vec2(R.argZ / 2. / 3.14159265, log2(R.zz) / log2(square_radius) - 1.0);\n    color = texture2D(exteriortex, texcoord).xyz;\n  #endif\n\n  #if show_crosshair\n    if (crosshair(gl_FragCoord.x, gl_FragCoord.y)) {\n      color = 1. - color;\n    }\n  #endif\n  \n  gl_FragColor = vec4(color, 1.);\n}`;\n\nexport default mandelbrotShaderDeep;\n","import Double from 'double.js';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { animated } from 'react-spring';\nimport * as twgl from 'twgl.js';\nimport { vScale } from 'vec-la-fp';\nimport { WebGLCanvasProps } from '../../common/render';\nimport { fullscreenVertexArray } from '../../shaders/fullVertexShader';\nimport { mandelbrotDeepVert } from '../../shaders/mandelbrotShaderDeep';\n\n// https://mariusschulz.com/blog/typing-destructured-object-parameters-in-typescript\n// https://stackoverflow.com/a/50294843/9184658\nconst WebGLCanvasDeep = React.forwardRef<HTMLCanvasElement, WebGLCanvasProps>(\n  (\n    { u, fragShader, setFPS, DPR, dragging, id, mini, ...props }: WebGLCanvasProps,\n    refAny,\n  ) => {\n    // const { mini = false, ...rest } = props;\n    // props:\n    // id\n    // fragShader\n    // -- uniforms:\n    //    u_zoom\n    //    u_pos\n    //    u_maxI\n    // ref\n    // glRef\n\n    const maxI = u.maxI;\n    const squareRadius = 3e5;\n\n    const canvasRef = refAny as React.MutableRefObject<HTMLCanvasElement>;\n\n    const gl = useRef<WebGLRenderingContext>();\n    const renderRequestRef = useRef<number>();\n    const bufferInfo = useRef<twgl.BufferInfo>();\n    const programInfo = useRef<twgl.ProgramInfo>();\n\n    // const u = props.u;\n    // const setFps = props.fps;\n\n    // have a zoom callback\n    // keeps minimaps at a fixed zoom level\n    const zoom = useCallback(() => (mini ? 0.95 : u.zoom.getValue()), [mini, u.zoom]);\n\n    // const DPR = props.useDPR ? props.DPR : 1;\n\n    // canvas setup step - get webgl context\n    const setupCanvas = useCallback(() => {\n      gl.current = twgl.getWebGLContext(canvasRef.current, {\n        antialias: false,\n        depth: false,\n      });\n      console.debug(`WebGL canvas context created`);\n    }, [gl, canvasRef]);\n\n    useEffect(() => {\n      setupCanvas();\n\n      // https://www.khronos.org/webgl/wiki/HandlingContextLost\n      canvasRef.current.addEventListener(\n        'webglcontextlost',\n        (event: Event) => {\n          console.error('WebGL context lost!');\n          event.preventDefault();\n          // trigger an error alert in future?\n        },\n        false,\n      );\n      canvasRef.current.addEventListener(\n        'webglcontextrestored',\n        (event: Event) => {\n          console.error('WebGL context restored! Setting up...');\n          setupCanvas();\n        },\n        false,\n      );\n\n      // remove this context?\n      // return () => gl.current ??\n    }, [canvasRef, setupCanvas]);\n\n    const compileShader = useCallback(() => {\n      const ctx = gl.current as WebGLRenderingContext;\n      bufferInfo.current = twgl.createBufferInfoFromArrays(ctx, fullscreenVertexArray);\n      programInfo.current = twgl.createProgramInfo(ctx, [mandelbrotDeepVert, fragShader]);\n      console.debug(`Fragment shader compiled`);\n    }, [gl, fragShader]);\n\n    // re-compile program if shader changes\n    useEffect(compileShader, [compileShader]);\n\n    const then = useRef(0);\n    const frames = useRef(0);\n    const elapsedTime = useRef(0);\n    // fps update interval\n    const interval = 1000;\n\n    // interface calcOrbitIn {\n    //   c: { x: Double; y: Double };\n    //   c0?: { x: Double; y: Double };\n    //   returnIteration?: boolean;\n    // }\n    /**\n     * (From deep-fractal)\n     * Calculating orbit for one point in Mandelbrot/Julia fractal.\n     * For Mandelbrot c0=undefined, for julia set c0 it is initial c.\n     * If you want only iteration count, you need to pass returnIteration = true\n     */\n    const calcOrbit = useCallback(\n      (\n        c: { x: Double; y: Double },\n        c0?: { x: Double; y: Double },\n        returnTexture = true,\n      ): [orbit: number[], iterations: number] => {\n        // this happens in double.js, with high precision\n        let x = c0 ? c0.x : c.x,\n          y = c0 ? c0.y : c.y;\n        let xx = x.sqr(),\n          yy = y.sqr(),\n          xy = x.mul(y);\n        let dx = Double.One,\n          dy = Double.Zero;\n        let temp: Double, i: number;\n\n        // save the orbit params\n        const orbit = [x.toNumber(), y.toNumber(), dx.toNumber(), dy.toNumber()];\n        // normal iteration until maxI and within radius\n        for (i = 1; i < maxI && xx.add(yy).lt(squareRadius); i++) {\n          // dx = 2(x * dx - y * dy) + 1\n          temp = x.mul(dx).sub(y.mul(dy)).mul(2).add(1);\n          // dy = 2(x * dy + y * dx)\n          dy = x.mul(dy).add(y.mul(dx)).mul(2);\n          dx = temp;\n          // x = x^2 - y^2 + c.x\n          x = xx.sub(yy).add(c.x);\n          // y = xy + xy + c.y\n          y = xy.add(xy).add(c.y);\n\n          xx = x.sqr();\n          yy = y.sqr();\n          xy = x.mul(y);\n          // don't do extra computation if only the iteration count matters\n          if (returnTexture) {\n            orbit.push(x.toNumber());\n            orbit.push(y.toNumber());\n            orbit.push(dx.toNumber());\n            orbit.push(dy.toNumber());\n          }\n        }\n        // this becomes a \"texture\" as a way to pass data to webgl\n        return [orbit, i];\n      },\n      [maxI],\n    );\n\n    interface deepfractalBaseAimType {\n      x: Double;\n      y: Double;\n    }\n    interface deepfractalAimType extends deepfractalBaseAimType {\n      hx: Double;\n      hy: Double;\n      phi: number;\n    }\n\n    /**\n     * Logarithmic search of new reference point.\n     * aim: the object representing ~bounding box? or current view?~ current view!\n     *   - x, y, width, height, angle\n     * aim = { x: Double, y: Double, hx: Double, hy: Double, phi: number };\n     */\n    const searchOrigin = useCallback(\n      (\n        aim: deepfractalAimType,\n        // julia: { x: Double; y: Double }\n      ): deepfractalBaseAimType => {\n        const defaultBaseAimType: deepfractalBaseAimType = {\n          x: Double.Zero,\n          y: Double.Zero,\n        };\n        const repeat = 15,\n          n = 12,\n          m = 3;\n        const z = defaultBaseAimType;\n        const zbest: deepfractalBaseAimType = { x: new Double(0), y: new Double(0) };\n        const newAim = Object.assign({}, aim);\n\n        let fbest = -Infinity;\n\n        for (let k = 0; k < repeat; k++) {\n          for (let i = 0; i <= n; i++) {\n            for (let j = 0; j <= n; j++) {\n              z.x = newAim.x.add(newAim.hx.mul((2 * i) / n - 1));\n              z.y = newAim.y.add(newAim.hy.mul((2 * j) / n - 1));\n              // f = julia ? calcOrbit(julia, z, true) : calcOrbit(z, null, true);\n              // invert the \"return iterations\" logic\n              // const [, f] = julia ? calcOrbit(julia, z) : calcOrbit(z, undefined);\n              const [, f] = calcOrbit(z, undefined);\n              if (f === maxI) {\n                return z;\n              } else if (f > fbest) {\n                Object.assign(zbest, z);\n                fbest = f;\n              }\n            }\n          }\n          Object.assign(newAim, zbest);\n          newAim.hx = newAim.hx.div(m / n);\n          newAim.hy = newAim.hy.div(m / n);\n        }\n        return zbest;\n      },\n      [calcOrbit, maxI],\n    );\n\n    // the main render function for WebGL\n    const render = useCallback(\n      (time) => {\n        const ctx = gl.current as WebGLRenderingContext;\n        const prog = programInfo.current as twgl.ProgramInfo;\n        const buff = bufferInfo.current as twgl.BufferInfo;\n\n        twgl.resizeCanvasToDisplaySize(canvasRef.current, DPR);\n        // scale the viewport to the canvas size\n        ctx.viewport(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n        const [x, y] = u.xy.getValue();\n        // const ratio = ctx.canvas.width / ctx.canvas.height;\n\n        // console.log(ratio);\n\n        // \"size\", meaning the number of units from the centre to the edge of the canvas\n        const size = vScale(\n          // use the height as the dominant dimension\n          1 / (zoom() * ctx.canvas.height),\n          [ctx.canvas.width, ctx.canvas.height],\n        );\n        const [hx, hy] = size;\n\n        // console.log('x, y:', [x, y]);\n        // console.log('hx, hy:', size);\n\n        // console.log(ratio);\n        // deep-fractal\n        // const julia = { x: Double.Zero, y: Double.Zero };\n        // const origin = searchOrigin(aim, julia ? julia : 0);\n        // const orbit = julia ? calcOrbit(julia, origin) : calcOrbit(origin);\n        // const texsize = Math.ceil(Math.sqrt(orbit.length / 4));\n        const aim: deepfractalAimType = {\n          x: new Double(x),\n          y: new Double(y),\n          // looks like a way to get the screen size ratio?\n          hx: new Double(hx),\n          hy: new Double(hy),\n          phi: u.theta,\n        };\n\n        const origin = searchOrigin(aim);\n        // console.log(origin);\n        const [orbit] = calcOrbit(origin);\n        // console.debug(orbit);\n        const texsize = Math.ceil(Math.sqrt(orbit.length / 4));\n\n        // pass orbit data to webgl through a large array\n        const orbittex = twgl.createTexture(ctx, {\n          format: ctx.RGBA,\n          type: ctx.FLOAT,\n          minMag: ctx.NEAREST,\n          wrap: ctx.CLAMP_TO_EDGE,\n          src: orbit,\n        });\n\n        const center = [aim.x.sub(origin.x).toNumber(), aim.y.sub(origin.y).toNumber()];\n\n        // console.log(\"'size':\", size);\n        // console.log('center:', center);\n\n        const uniforms = {\n          resolution: [ctx.canvas.width, ctx.canvas.height],\n          u_zoom: zoom(),\n          u_c: u.c === undefined ? 0 : u.c.getValue(),\n          u_xy: [x, y],\n          u_maxI: u.maxI,\n          u_theta: u.theta.getValue(),\n          u_colour: u.colour,\n\n          orbittex: orbittex,\n          texsize: texsize,\n          size: size,\n          // size of a pixel in fractal space?\n          pixelsize: [hy, hy].map((i) => i / ctx.canvas.width),\n          // perturbation centre point?\n          // center: [aim.x.sub(origin.x).toNumber(), aim.y.sub(origin.y).toNumber()],\n          center: center,\n        };\n\n        // console.log([hx, hx].map((i) => i / ctx.canvas.width));\n\n        ctx.useProgram(prog.program);\n        twgl.setBuffersAndAttributes(ctx, prog, buff);\n        twgl.setUniforms(prog, uniforms);\n        twgl.drawBufferInfo(ctx, buff);\n\n        // calculate fps\n        if (setFPS !== undefined) {\n          frames.current++;\n          elapsedTime.current += time - then.current;\n          then.current = time;\n\n          // console.log(elapsedTime.current);\n          if (elapsedTime.current >= interval) {\n            //multiply with (1000 / elapsed) for accuracy\n            setFPS((frames.current * (interval / elapsedTime.current)).toFixed(1));\n            frames.current = 0;\n            elapsedTime.current -= interval;\n\n            // document.getElementById('test').innerHTML = fps;\n          }\n        }\n\n        // The 'state' will always be the initial value here\n        renderRequestRef.current = requestAnimationFrame(render);\n      },\n      [gl, u, zoom, DPR, setFPS, interval, canvasRef, calcOrbit, searchOrigin],\n    );\n\n    useEffect(() => {\n      renderRequestRef.current = requestAnimationFrame(render);\n      return () => cancelAnimationFrame(renderRequestRef.current as number);\n    }, [render]);\n\n    return (\n      <animated.canvas\n        className=\"renderer\"\n        ref={refAny}\n        id={id}\n        style={{\n          // cursor should show whether the viewer is being grabbed\n          cursor: dragging ? 'grabbing' : 'grab',\n          // adding style allows direct style override\n          ...props.style,\n        }}\n      />\n    );\n  },\n);\n\nWebGLCanvasDeep.displayName = 'WebGLCanvas';\n\nexport default WebGLCanvasDeep;\n","import React, { useRef, useState } from 'react';\nimport { useGesture } from 'react-use-gesture';\nimport { MandelbrotRendererProps } from '../../common/render';\nimport { MandelbrotMapsWebGLUniforms } from '../../common/types';\nimport { genericTouchBind, Rgb255ColourToFloat } from '../../common/utils';\nimport mandelbrotShaderDeep from '../../shaders/mandelbrotShaderDeep';\nimport newSmoothMandelbrotShader, {\n  miniCrosshair,\n  standardCrosshair,\n} from '../../shaders/newSmoothMandelbrotShader';\nimport FPSCard from '../info/FPSCard';\nimport { SettingsContext } from '../settings/SettingsContext';\nimport MinimapViewer from './MinimapViewer';\nimport WebGLCanvasDeep from './WebGLCanvasDeep';\n\nexport default function MandelbrotRendererDeep({\n  controls,\n  maxI,\n  useAA,\n  DPR,\n  showCrosshair,\n  colour,\n  style,\n  precision,\n}: MandelbrotRendererProps): JSX.Element {\n  // variables to hold canvas and webgl information\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const miniCanvasRef = useRef<HTMLCanvasElement>(null);\n\n  // const gl = useRef<WebGLRenderingContext>(null);\n  // const miniGl = useRef<WebGLRenderingContext>(null);\n\n  // this multiplier subdivides the screen space into smaller increments\n  // to allow for velocity calculations to not immediately decay, due to the\n  // otherwise small scale that is being mapped to the screen.\n  // const screenScaleMultiplier = props.screenScaleMultiplier; // -> global\n\n  // temporary bounds to prevent excessive panning\n  // eslint-disable-next-line\n  // const radialBound = 1;\n  // const relativeRadialBound = radialBound;// / -screenScaleMultiplier;\n\n  // read incoming props\n  // read incoming props\n  const [{ xy }] = controls.xyCtrl;\n  // const [{ theta, last_pointer_angle }, setControlRot] = props.controls.rot;\n  const [{ z }, setControlZoom] = controls.zoomCtrl;\n  const [{ theta }] = controls.rotCtrl;\n  // const maxI = props.maxI; // -> global\n  const AA = useAA ? 2 : 1; // -> global\n\n  // const fragShader = newSmoothMandelbrotShader(\n  //   {\n  //     maxI: maxI,\n  //     AA: AA,\n  //   },\n  //   showCrosshair,\n  //   standardCrosshair,\n  // );\n  const fragShader = mandelbrotShaderDeep(\n    {\n      maxI: maxI,\n      AA: AA,\n    },\n    showCrosshair,\n    standardCrosshair,\n  );\n  const miniFragShader = newSmoothMandelbrotShader(\n    {\n      maxI: maxI,\n      AA: 2,\n    },\n    showCrosshair,\n    miniCrosshair,\n  );\n\n  const u: MandelbrotMapsWebGLUniforms = {\n    zoom: z,\n    xy: xy,\n    theta: theta,\n    maxI: maxI,\n    colour: Rgb255ColourToFloat(colour), // vec3(0.0,0.6,1.0)\n    // screenScaleMultiplier: screenScaleMultiplier,\n  };\n\n  const [dragging, setDragging] = useState(false);\n\n  const gtb = genericTouchBind({\n    domTarget: canvasRef,\n    controls: controls,\n    // gl: gl,\n    setDragging: setDragging,\n    DPR: DPR,\n    precision: precision,\n  });\n\n  // https://use-gesture.netlify.app/docs/changelog/#breaking\n  // When adding events directly to the dom element using `domTarget`\n  // you no longer need to clean the effect yourself.\n  // const touchBind =\n  useGesture(gtb.handlers, gtb.config);\n\n  // useEffect(() => {\n  //   touchBind();\n  // }, [touchBind]);\n\n  const [FPS, setFPS] = useState('');\n\n  return (\n    <SettingsContext.Consumer>\n      {({ settings }) => (\n        <div\n          className=\"renderer\"\n          style={{\n            position: 'relative',\n            ...style,\n          }}\n        >\n          <FPSCard FPS={FPS} show={settings.showFPS} />\n          <WebGLCanvasDeep\n            id=\"mandelbrot-canvas\"\n            fragShader={fragShader}\n            DPR={DPR}\n            // touchBind={touchBind}\n            u={u}\n            ref={canvasRef}\n            // glRef={gl}\n            setFPS={setFPS}\n            dragging={dragging}\n          />\n          <MinimapViewer\n            id=\"mandelbrot-minimap-canvas\"\n            fragShader={miniFragShader}\n            DPR={DPR}\n            u={u}\n            canvasRef={miniCanvasRef}\n            // glRef={miniGl}\n            show={settings.showMinimap}\n            onClick={() => setControlZoom({ z: 1 })}\n          />\n        </div>\n      )}\n    </SettingsContext.Consumer>\n  );\n}\n","import { Grid } from '@material-ui/core';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useSpring } from 'react-spring';\nimport './App.css';\nimport {\n  currentLocation,\n  useHashLocation,\n  useHashNavigator,\n  ViewerURLManager,\n} from './common/routing';\nimport { settingsDefinitionsType } from './common/settings';\nimport {\n  SpringAnimatedValueWithSetter,\n  SpringControl,\n  springControlKeys,\n  ViewerControlSprings,\n  ViewerLocation,\n  ViewerRotationControl,\n  ViewerXYControl,\n  ViewerZoomControl,\n} from './common/types';\nimport { useWindowSize, warpToPoint } from './common/utils';\nimport {\n  deepZoomPrecision,\n  defaultPrecision,\n  PrecisionFormatter,\n  springsConfigs,\n  viewerOrigin,\n} from './common/values';\nimport CoordinateInterface from './components/info/CoordinateInterface';\nimport FirstTimeInfo from './components/info/FirstTimeInfo';\nimport InfoDialog from './components/info/InfoDialog';\nimport JuliaRenderer from './components/render/JuliaRenderer';\n// import 'typeface-roboto';\nimport MandelbrotRenderer from './components/render/MandelbrotRenderer';\nimport MandelbrotRendererDeep from './components/render/MandelbrotRendererDeep';\nimport ViewChanger from './components/render/ViewChanger';\nimport SettingsMenu from './components/settings/SettingsMenu';\n\nfunction App({ settings }: { settings: settingsDefinitionsType }): JSX.Element {\n  const size = useWindowSize();\n  const vertical = size.w < size.h;\n\n  const DPR = window.devicePixelRatio;\n  const currentDPR = settings.useDPR ? DPR : 1;\n\n  // set application float precision based on whether deep zoom is enabled\n  const [precision, setPrecision] = useState(defaultPrecision);\n  const precisionFormatter = PrecisionFormatter(precision);\n\n  // update the new precision\n  useEffect(() => {\n    setPrecision(settings.deepZoom ? deepZoomPrecision : defaultPrecision);\n  }, [settings.deepZoom]);\n\n  // if app is started with a hash location, assume\n  // it should be the starting position\n  // detects hash updates\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [loc, navigate] = useHashLocation();\n\n  // non-reloading hash update\n  const updateBrowserHash = useHashNavigator();\n\n  // why is this a memo?\n  // does making it a memo mean it won't slow down initial rendering?\n  const urlManager = useMemo(() => new ViewerURLManager(), []);\n\n  /**\n   * generic callback.\n   * called when the viewer has moved and the hash url needs to be updated\n   */\n  const updateHash = useCallback(\n    (name: string, v: Partial<ViewerLocation>) => {\n      // console.log('deepzoom:', settings.deepZoom);\n      urlManager.updateViewer(name, v, precisionFormatter);\n      const u = urlManager.asFullHashURL();\n      // console.debug(`Updated # for ${name} => ${u}`);\n      updateBrowserHash(u);\n    },\n    [precisionFormatter, updateBrowserHash, urlManager],\n  );\n\n  // The 'updateM' function makes the dependencies of useEffect Hook (at line 127) change on\n  // every render. To fix this, wrap the definition of 'updateM' in its own useCallback() Hook\n  // callbacks for springs to update url when animation stops\n  const updateM = useCallback((v: Partial<ViewerLocation>) => updateHash('m', v), [\n    updateHash,\n  ]);\n  const updateJ = useCallback((v: Partial<ViewerLocation>) => updateHash('j', v), [\n    updateHash,\n  ]);\n\n  const mandelbrotControls: ViewerControlSprings = {\n    xyCtrl: useSpring<ViewerXYControl>(() => ({\n      xy: viewerOrigin.xy,\n      config: springsConfigs(precision).default.xyCtrl,\n      onRest: updateM,\n    })),\n\n    zoomCtrl: useSpring<ViewerZoomControl>(() => ({\n      z: viewerOrigin.z,\n      minZoom: 0.5,\n      // Numeric literals with absolute values equal to 2^53 or greater are too large\n      // to be represented accurately as integers. [ts(80008)]\n      maxZoom: 1e16,\n      // 100_000_000_000_000_000,\n      config: springsConfigs(precision).default.zoomCtrl,\n      onRest: updateM,\n    })),\n\n    rotCtrl: useSpring<ViewerRotationControl>(() => ({\n      theta: viewerOrigin.theta, // all angles in rad\n      config: springsConfigs(precision).default.rotCtrl,\n      onRest: updateM,\n    })),\n  };\n\n  // make sure that the spring \"onRest\" is updated if the precision changes\n  useEffect(() => {\n    Object.entries(mandelbrotControls).forEach(\n      ([k, [, set]]: [string, SpringAnimatedValueWithSetter<SpringControl>]) => {\n        try {\n          const key = k as springControlKeys;\n          set({\n            onRest: updateM,\n            // hacky way to grab the config\n            config: springsConfigs(precision).default[key],\n          });\n        } catch (error) {\n          // guess not\n        }\n      },\n    );\n    // explicitly not adding mandelbrotControls to the deps list\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [precision, updateM]);\n\n  const juliaControls: ViewerControlSprings = {\n    xyCtrl: useSpring<ViewerXYControl>(() => ({\n      xy: viewerOrigin.xy,\n      config: springsConfigs(precision).default.xyCtrl,\n      onRest: updateJ,\n    })),\n\n    zoomCtrl: useSpring<ViewerZoomControl>(() => ({\n      z: viewerOrigin.z,\n      minZoom: 0.5,\n      maxZoom: 2000,\n      config: springsConfigs(precision).default.zoomCtrl,\n      onRest: updateJ,\n    })),\n\n    rotCtrl: useSpring<ViewerRotationControl>(() => ({\n      theta: viewerOrigin.theta, // all angles in rad\n      config: springsConfigs(precision).default.rotCtrl,\n      onRest: updateJ,\n    })),\n  };\n\n  useEffect(() => {\n    // viewer should update if user goes back / forward on the page\n    // parse current location after user change\n    urlManager.updateFromURL();\n    console.log(`Warping to requested url => ${currentLocation()}`);\n\n    // warp to the newly parsed locations\n    warpToPoint(mandelbrotControls, urlManager.vs['m'].v, precision);\n    warpToPoint(juliaControls, urlManager.vs['j'].v, precision);\n    // this update process should only trigger when the hash location changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loc]);\n\n  const reset = () => {\n    warpToPoint(mandelbrotControls, viewerOrigin, precision);\n    warpToPoint(juliaControls, viewerOrigin, precision);\n  };\n\n  const [showInfo, setShowInfo] = useState(false);\n  const toggleInfo = () => setShowInfo((i) => !i);\n\n  const [openHelp, setOpenHelp] = useState(false);\n  const toggleHelp = () => setOpenHelp((i) => !i);\n\n  // [showMandelbrot, showJulia]\n  const [[showMandelbrot, showJulia], setViewerState] = useState<[boolean, boolean]>([\n    true,\n    true,\n  ]);\n\n  return (\n    <>\n      <Grid container>\n        <Grid\n          item\n          container\n          direction={vertical ? 'column-reverse' : 'row'}\n          alignItems={vertical ? 'flex-end' : 'flex-start'}\n          justify=\"center\"\n          className=\"fullSize\"\n          style={{\n            position: 'absolute',\n          }}\n        >\n          <CoordinateInterface\n            show={settings.showCoordinates}\n            mandelbrot={mandelbrotControls}\n            precision={precision}\n            precisionFormatter={precisionFormatter}\n          />\n          <Grid\n            item\n            xs\n            className=\"renderer\"\n            style={{\n              // flex-grow takes up more space in a ratio format\n              flexGrow: showMandelbrot ? 1 : 0, // percentFlex.m.interpolate((x) => x),\n            }}\n          >\n            {settings.deepZoom ? (\n              <MandelbrotRendererDeep\n                controls={mandelbrotControls}\n                DPR={currentDPR}\n                precision={precision}\n                {...settings}\n              />\n            ) : (\n              <MandelbrotRenderer\n                controls={mandelbrotControls}\n                DPR={currentDPR}\n                precision={precision}\n                {...settings}\n              />\n            )}\n          </Grid>\n\n          <Grid item style={{ width: 0, height: 0, zIndex: 1 }}>\n            <ViewChanger vertical={vertical} changeFunc={setViewerState} />\n          </Grid>\n\n          <Grid\n            item\n            xs\n            className=\"renderer\"\n            style={{\n              // flex-grow takes up more space in a ratio format\n              flexGrow: showJulia ? 1 : 0, // percentFlex.j.interpolate((x) => x),\n            }}\n          >\n            <JuliaRenderer\n              c={mandelbrotControls.xyCtrl[0].xy}\n              controls={juliaControls}\n              DPR={currentDPR}\n              precision={precision}\n              {...settings}\n            />\n          </Grid>\n\n          {/* Settings menu uses SettingsContext so must be within provider */}\n          <SettingsMenu\n            reset={reset}\n            toggleInfo={toggleInfo}\n            helpState={[openHelp, toggleHelp]}\n          />\n        </Grid>\n      </Grid>\n      <InfoDialog ctrl={[showInfo, setShowInfo]} />\n\n      {/* FirstTimeInfo requires access to settings */}\n      <FirstTimeInfo ctrl={[openHelp, toggleHelp]} />\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config): void {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister(): void {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","// https://felixgerschau.com/create-a-pwa-update-notification-with-create-react-app/\n\nimport { Button, Snackbar } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport React, { FC, useEffect } from 'react';\nimport * as serviceWorker from '../serviceWorkerRegistration';\n// service worker config has been removed from CRA / react-scripts 4.0\n// https://github.com/facebook/create-react-app/issues/9776#issuecomment-728945921\n// files sourced from https://github.com/cra-template/pwa/tree/master/packages/cra-template-pwa-typescript\n\nconst ServiceWorkerWrapper: FC = () => {\n  const [showReload, setShowReload] = React.useState(false);\n  const [waitingWorker, setWaitingWorker] = React.useState<ServiceWorker | null>(null);\n\n  const onSWUpdate = (registration: ServiceWorkerRegistration) => {\n    console.log('Out of date version detected! Triggering snackbar.');\n    setShowReload(true);\n    setWaitingWorker(registration.waiting);\n  };\n\n  useEffect(() => {\n    console.log('Registering Service Worker for update detection...');\n    serviceWorker.register({ onUpdate: onSWUpdate });\n  }, []);\n\n  const reloadPage = () => {\n    // optional chaining was not working here...\n    // https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html\n    waitingWorker && waitingWorker.postMessage({ type: 'SKIP_WAITING' });\n    setShowReload(false);\n    // reload(b: Boolean) is deprecated\n    window.location.reload();\n  };\n\n  return (\n    <Snackbar open={showReload} anchorOrigin={{ vertical: 'top', horizontal: 'center' }}>\n      <Alert\n        severity=\"info\"\n        action={\n          <Button color=\"inherit\" variant=\"outlined\" size=\"small\" onClick={reloadPage}>\n            Update\n          </Button>\n        }\n      >\n        A new version is available!\n      </Alert>\n    </Snackbar>\n  );\n};\n\nexport default ServiceWorkerWrapper;\n","import { ThemeProvider } from '@material-ui/core';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport ServiceWorkerWrapper from './components/ServiceWorkerWrapper';\nimport SettingsProvider, { SettingsContext } from './components/settings/SettingsContext';\nimport './index.css';\nimport theme from './theme/theme';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <ServiceWorkerWrapper />\n      <SettingsProvider>\n        <SettingsContext.Consumer>\n          {({ settings }) => <App settings={settings} />}\n        </SettingsContext.Consumer>\n      </SettingsProvider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// The default service worker is not used: it's overridden instead\n// by the ServiceWorkerWrapper (ServiceWorkerWrapper.tsx)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.register();\n"],"sourceRoot":""}